/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Lt=Object.create;var _e=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var wt=Object.getOwnPropertyNames;var kt=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty;var fe=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,e)=>(typeof require<"u"?require:r)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ae=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Ht=(t,r)=>{for(var e in r)_e(t,e,{get:r[e],enumerable:!0})},Ue=(t,r,e,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of wt(r))!Nt.call(t,n)&&n!==e&&_e(t,n,{get:()=>r[n],enumerable:!(o=It(r,n))||o.enumerable});return t};var Ee=(t,r,e)=>(e=t!=null?Lt(kt(t)):{},Ue(r||!t||!t.__esModule?_e(e,"default",{value:t,enumerable:!0}):e,t)),Dt=t=>Ue(_e({},"__esModule",{value:!0}),t);var de=ae((Wr,at)=>{"use strict";var z="\\\\/",ot=`[^${z}]`,te="\\.",Zt="\\+",zt="\\?",Se="\\/",Jt="(?=.)",nt="[^/]",He=`(?:${Se}|$)`,st=`(?:^|${Se})`,De=`${te}{1,2}${He}`,er=`(?!${te})`,tr=`(?!${st}${De})`,rr=`(?!${te}{0,1}${He})`,or=`(?!${De})`,nr=`[^.${Se}]`,sr=`${nt}*?`,ir="/",it={DOT_LITERAL:te,PLUS_LITERAL:Zt,QMARK_LITERAL:zt,SLASH_LITERAL:Se,ONE_CHAR:Jt,QMARK:nt,END_ANCHOR:He,DOTS_SLASH:De,NO_DOT:er,NO_DOTS:tr,NO_DOT_SLASH:rr,NO_DOTS_SLASH:or,QMARK_NO_DOT:nr,STAR:sr,START_ANCHOR:st,SEP:ir},ar={...it,SLASH_LITERAL:`[${z}]`,QMARK:ot,STAR:`${ot}*?`,DOTS_SLASH:`${te}{1,2}(?:[${z}]|$)`,NO_DOT:`(?!${te})`,NO_DOTS:`(?!(?:^|[${z}])${te}{1,2}(?:[${z}]|$))`,NO_DOT_SLASH:`(?!${te}{0,1}(?:[${z}]|$))`,NO_DOTS_SLASH:`(?!${te}{1,2}(?:[${z}]|$))`,QMARK_NO_DOT:`[^.${z}]`,START_ANCHOR:`(?:^|[${z}])`,END_ANCHOR:`(?:[${z}]|$)`,SEP:"\\"},ur={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};at.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ur,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?ar:it}}});var Ae=ae(G=>{"use strict";var{REGEX_BACKSLASH:cr,REGEX_REMOVE_BACKSLASH:lr,REGEX_SPECIAL_CHARS:fr,REGEX_SPECIAL_CHARS_GLOBAL:pr}=de();G.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);G.hasRegexChars=t=>fr.test(t);G.isRegexChar=t=>t.length===1&&G.hasRegexChars(t);G.escapeRegex=t=>t.replace(pr,"\\$1");G.toPosixSlashes=t=>t.replace(cr,"/");G.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let t=navigator.platform.toLowerCase();return t==="win32"||t==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};G.removeBackslashes=t=>t.replace(lr,r=>r==="\\"?"":r);G.escapeLast=(t,r,e)=>{let o=t.lastIndexOf(r,e);return o===-1?t:t[o-1]==="\\"?G.escapeLast(t,r,o-1):`${t.slice(0,o)}\\${t.slice(o)}`};G.removePrefix=(t,r={})=>{let e=t;return e.startsWith("./")&&(e=e.slice(2),r.prefix="./"),e};G.wrapOutput=(t,r={},e={})=>{let o=e.contains?"":"^",n=e.contains?"":"$",u=`${o}(?:${t})${n}`;return r.negated===!0&&(u=`(?:^(?!${u}).*$)`),u};G.basename=(t,{windows:r}={})=>{let e=t.split(r?/[\\/]/:"/"),o=e[e.length-1];return o===""?e[e.length-2]:o}});var dt=ae((Ur,ht)=>{"use strict";var ut=Ae(),{CHAR_ASTERISK:Me,CHAR_AT:gr,CHAR_BACKWARD_SLASH:Re,CHAR_COMMA:hr,CHAR_DOT:Pe,CHAR_EXCLAMATION_MARK:Ge,CHAR_FORWARD_SLASH:gt,CHAR_LEFT_CURLY_BRACE:Be,CHAR_LEFT_PARENTHESES:Fe,CHAR_LEFT_SQUARE_BRACKET:dr,CHAR_PLUS:Ar,CHAR_QUESTION_MARK:ct,CHAR_RIGHT_CURLY_BRACE:Rr,CHAR_RIGHT_PARENTHESES:lt,CHAR_RIGHT_SQUARE_BRACKET:br}=de(),ft=t=>t===gt||t===Re,pt=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Cr=(t,r)=>{let e=r||{},o=t.length-1,n=e.parts===!0||e.scanToEnd===!0,u=[],a=[],f=[],p=t,d=-1,C=0,L=0,I=!1,F=!1,y=!1,N=!1,ne=!1,Q=!1,E=!1,Z=!1,se=!1,D=!1,H=0,j,h,R={value:"",depth:0,isGlob:!1},c=()=>d>=o,P=()=>p.charCodeAt(d+1),w=()=>(j=h,p.charCodeAt(++d));for(;d<o;){h=w();let _;if(h===Re){E=R.backslashes=!0,h=w(),h===Be&&(Q=!0);continue}if(Q===!0||h===Be){for(H++;c()!==!0&&(h=w());){if(h===Re){E=R.backslashes=!0,w();continue}if(h===Be){H++;continue}if(Q!==!0&&h===Pe&&(h=w())===Pe){if(I=R.isBrace=!0,y=R.isGlob=!0,D=!0,n===!0)continue;break}if(Q!==!0&&h===hr){if(I=R.isBrace=!0,y=R.isGlob=!0,D=!0,n===!0)continue;break}if(h===Rr&&(H--,H===0)){Q=!1,I=R.isBrace=!0,D=!0;break}}if(n===!0)continue;break}if(h===gt){if(u.push(d),a.push(R),R={value:"",depth:0,isGlob:!1},D===!0)continue;if(j===Pe&&d===C+1){C+=2;continue}L=d+1;continue}if(e.noext!==!0&&(h===Ar||h===gr||h===Me||h===ct||h===Ge)===!0&&P()===Fe){if(y=R.isGlob=!0,N=R.isExtglob=!0,D=!0,h===Ge&&d===C&&(se=!0),n===!0){for(;c()!==!0&&(h=w());){if(h===Re){E=R.backslashes=!0,h=w();continue}if(h===lt){y=R.isGlob=!0,D=!0;break}}continue}break}if(h===Me){if(j===Me&&(ne=R.isGlobstar=!0),y=R.isGlob=!0,D=!0,n===!0)continue;break}if(h===ct){if(y=R.isGlob=!0,D=!0,n===!0)continue;break}if(h===dr){for(;c()!==!0&&(_=w());){if(_===Re){E=R.backslashes=!0,w();continue}if(_===br){F=R.isBracket=!0,y=R.isGlob=!0,D=!0;break}}if(n===!0)continue;break}if(e.nonegate!==!0&&h===Ge&&d===C){Z=R.negated=!0,C++;continue}if(e.noparen!==!0&&h===Fe){if(y=R.isGlob=!0,n===!0){for(;c()!==!0&&(h=w());){if(h===Fe){E=R.backslashes=!0,h=w();continue}if(h===lt){D=!0;break}}continue}break}if(y===!0){if(D=!0,n===!0)continue;break}}e.noext===!0&&(N=!1,y=!1);let T=p,s="",i="";C>0&&(s=p.slice(0,C),p=p.slice(C),L-=C),T&&y===!0&&L>0?(T=p.slice(0,L),i=p.slice(L)):y===!0?(T="",i=p):T=p,T&&T!==""&&T!=="/"&&T!==p&&ft(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),e.unescape===!0&&(i&&(i=ut.removeBackslashes(i)),T&&E===!0&&(T=ut.removeBackslashes(T)));let V={prefix:s,input:t,start:C,base:T,glob:i,isBrace:I,isBracket:F,isGlob:y,isExtglob:N,isGlobstar:ne,negated:Z,negatedExtglob:se};if(e.tokens===!0&&(V.maxDepth=0,ft(h)||a.push(R),V.tokens=a),e.parts===!0||e.tokens===!0){let _;for(let O=0;O<u.length;O++){let ee=_?_+1:C,U=u[O],oe=t.slice(ee,U);e.tokens&&(O===0&&C!==0?(a[O].isPrefix=!0,a[O].value=s):a[O].value=oe,pt(a[O]),V.maxDepth+=a[O].depth),(O!==0||oe!=="")&&f.push(oe),_=U}if(_&&_+1<t.length){let O=t.slice(_+1);f.push(O),e.tokens&&(a[a.length-1].value=O,pt(a[a.length-1]),V.maxDepth+=a[a.length-1].depth)}V.slashes=u,V.parts=f}return V};ht.exports=Cr});var bt=ae((Kr,Rt)=>{"use strict";var ve=de(),J=Ae(),{MAX_LENGTH:Te,POSIX_REGEX_SOURCE:yr,REGEX_NON_SPECIAL_CHARS:_r,REGEX_SPECIAL_CHARS_BACKREF:Er,REPLACEMENTS:At}=ve,mr=(t,r)=>{if(typeof r.expandRange=="function")return r.expandRange(...t,r);t.sort();let e=`[${t.join("-")}]`;try{new RegExp(e)}catch{return t.map(n=>J.escapeRegex(n)).join("..")}return e},le=(t,r)=>`Missing ${t}: "${r}" - use "\\\\${r}" to match literal characters`,je=(t,r)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=At[t]||t;let e={...r},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let u={type:"bos",value:"",output:e.prepend||""},a=[u],f=e.capture?"":"?:",p=ve.globChars(e.windows),d=ve.extglobChars(p),{DOT_LITERAL:C,PLUS_LITERAL:L,SLASH_LITERAL:I,ONE_CHAR:F,DOTS_SLASH:y,NO_DOT:N,NO_DOT_SLASH:ne,NO_DOTS_SLASH:Q,QMARK:E,QMARK_NO_DOT:Z,STAR:se,START_ANCHOR:D}=p,H=g=>`(${f}(?:(?!${D}${g.dot?y:C}).)*?)`,j=e.dot?"":N,h=e.dot?E:Z,R=e.bash===!0?H(e):se;e.capture&&(R=`(${R})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let c={input:t,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};t=J.removePrefix(t,c),n=t.length;let P=[],w=[],T=[],s=u,i,V=()=>c.index===n-1,_=c.peek=(g=1)=>t[c.index+g],O=c.advance=()=>t[++c.index]||"",ee=()=>t.slice(c.index+1),U=(g="",m=0)=>{c.consumed+=g,c.index+=m},oe=g=>{c.output+=g.output!=null?g.output:g.value,U(g.value)},Tt=()=>{let g=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)O(),c.start++,g++;return g%2===0?!1:(c.negated=!0,c.start++,!0)},be=g=>{c[g]++,T.push(g)},ie=g=>{c[g]--,T.pop()},b=g=>{if(s.type==="globstar"){let m=c.braces>0&&(g.type==="comma"||g.type==="brace"),l=g.extglob===!0||P.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!m&&!l&&(c.output=c.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,c.output+=s.output)}if(P.length&&g.type!=="paren"&&(P[P.length-1].inner+=g.value),(g.value||g.output)&&oe(g),s&&s.type==="text"&&g.type==="text"){s.output=(s.output||s.value)+g.value,s.value+=g.value;return}g.prev=s,a.push(g),s=g},Ce=(g,m)=>{let l={...d[m],conditions:1,inner:""};l.prev=s,l.parens=c.parens,l.output=c.output;let A=(e.capture?"(":"")+l.open;be("parens"),b({type:g,value:m,output:c.output?"":F}),b({type:"paren",extglob:!0,value:O(),output:A}),P.push(l)},$t=g=>{let m=g.close+(e.capture?")":""),l;if(g.type==="negate"){let A=R;if(g.inner&&g.inner.length>1&&g.inner.includes("/")&&(A=H(e)),(A!==R||V()||/^\)+$/.test(ee()))&&(m=g.close=`)$))${A}`),g.inner.includes("*")&&(l=ee())&&/^\.[^\\/.]+$/.test(l)){let S=je(l,{...r,fastpaths:!1}).output;m=g.close=`)${S})${A})`}g.prev.type==="bos"&&(c.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:i,output:m}),ie("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let g=!1,m=t.replace(Er,(l,A,S,M,k,Le)=>M==="\\"?(g=!0,l):M==="?"?A?A+M+(k?E.repeat(k.length):""):Le===0?h+(k?E.repeat(k.length):""):E.repeat(S.length):M==="."?C.repeat(S.length):M==="*"?A?A+M+(k?R:""):R:A?l:`\\${l}`);return g===!0&&(e.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===t&&e.contains===!0?(c.output=t,c):(c.output=J.wrapOutput(m,c,r),c)}for(;!V();){if(i=O(),i==="\0")continue;if(i==="\\"){let l=_();if(l==="/"&&e.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",b({type:"text",value:i});continue}let A=/^\\+/.exec(ee()),S=0;if(A&&A[0].length>2&&(S=A[0].length,c.index+=S,S%2!==0&&(i+="\\")),e.unescape===!0?i=O():i+=O(),c.brackets===0){b({type:"text",value:i});continue}}if(c.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(e.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let A=s.value.lastIndexOf("["),S=s.value.slice(0,A),M=s.value.slice(A+2),k=yr[M];if(k){s.value=S+k,c.backtrack=!0,O(),!u.output&&a.indexOf(s)===1&&(u.output=F);continue}}}(i==="["&&_()!==":"||i==="-"&&_()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),e.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,oe({value:i});continue}if(c.quotes===1&&i!=='"'){i=J.escapeRegex(i),s.value+=i,oe({value:i});continue}if(i==='"'){c.quotes=c.quotes===1?0:1,e.keepQuotes===!0&&b({type:"text",value:i});continue}if(i==="("){be("parens"),b({type:"paren",value:i});continue}if(i===")"){if(c.parens===0&&e.strictBrackets===!0)throw new SyntaxError(le("opening","("));let l=P[P.length-1];if(l&&c.parens===l.parens+1){$t(P.pop());continue}b({type:"paren",value:i,output:c.parens?")":"\\)"}),ie("parens");continue}if(i==="["){if(e.nobracket===!0||!ee().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(le("closing","]"));i=`\\${i}`}else be("brackets");b({type:"bracket",value:i});continue}if(i==="]"){if(e.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:i,output:`\\${i}`});continue}if(c.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(le("opening","["));b({type:"text",value:i,output:`\\${i}`});continue}ie("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,oe({value:i}),e.literalBrackets===!1||J.hasRegexChars(l))continue;let A=J.escapeRegex(s.value);if(c.output=c.output.slice(0,-s.value.length),e.literalBrackets===!0){c.output+=A,s.value=A;continue}s.value=`(${f}${A}|${s.value})`,c.output+=s.value;continue}if(i==="{"&&e.nobrace!==!0){be("braces");let l={type:"brace",value:i,output:"(",outputIndex:c.output.length,tokensIndex:c.tokens.length};w.push(l),b(l);continue}if(i==="}"){let l=w[w.length-1];if(e.nobrace===!0||!l){b({type:"text",value:i,output:i});continue}let A=")";if(l.dots===!0){let S=a.slice(),M=[];for(let k=S.length-1;k>=0&&(a.pop(),S[k].type!=="brace");k--)S[k].type!=="dots"&&M.unshift(S[k].value);A=mr(M,e),c.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=c.output.slice(0,l.outputIndex),M=c.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=A="\\}",c.output=S;for(let k of M)c.output+=k.output||k.value}b({type:"brace",value:i,output:A}),ie("braces"),w.pop();continue}if(i==="|"){P.length>0&&P[P.length-1].conditions++,b({type:"text",value:i});continue}if(i===","){let l=i,A=w[w.length-1];A&&T[T.length-1]==="braces"&&(A.comma=!0,l="|"),b({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&c.index===c.start+1){c.start=c.index+1,c.consumed="",c.output="",a.pop(),s=u;continue}b({type:"slash",value:i,output:I});continue}if(i==="."){if(c.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=w[w.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(c.braces+c.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:i,output:C});continue}b({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&e.noextglob!==!0&&_()==="("&&_(2)!=="?"){Ce("qmark",i);continue}if(s&&s.type==="paren"){let A=_(),S=i;(s.value==="("&&!/[!=<:]/.test(A)||A==="<"&&!/<([!=]|\w+>)/.test(ee()))&&(S=`\\${i}`),b({type:"text",value:i,output:S});continue}if(e.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:i,output:Z});continue}b({type:"qmark",value:i,output:E});continue}if(i==="!"){if(e.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){Ce("negate",i);continue}if(e.nonegate!==!0&&c.index===0){Tt();continue}}if(i==="+"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){Ce("plus",i);continue}if(s&&s.value==="("||e.regex===!1){b({type:"plus",value:i,output:L});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||c.parens>0){b({type:"plus",value:i});continue}b({type:"plus",value:L});continue}if(i==="@"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){b({type:"at",extglob:!0,value:i,output:""});continue}b({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=_r.exec(ee());l&&(i+=l[0],c.index+=l[0].length),b({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=R,c.backtrack=!0,c.globstar=!0,U(i);continue}let g=ee();if(e.noextglob!==!0&&/^\([^?]/.test(g)){Ce("star",i);continue}if(s.type==="star"){if(e.noglobstar===!0){U(i);continue}let l=s.prev,A=l.prev,S=l.type==="slash"||l.type==="bos",M=A&&(A.type==="star"||A.type==="globstar");if(e.bash===!0&&(!S||g[0]&&g[0]!=="/")){b({type:"star",value:i,output:""});continue}let k=c.braces>0&&(l.type==="comma"||l.type==="brace"),Le=P.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!k&&!Le){b({type:"star",value:i,output:""});continue}for(;g.slice(0,3)==="/**";){let ye=t[c.index+4];if(ye&&ye!=="/")break;g=g.slice(3),U("/**",3)}if(l.type==="bos"&&V()){s.type="globstar",s.value+=i,s.output=H(e),c.output=s.output,c.globstar=!0,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!M&&V()){c.output=c.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=H(e)+(e.strictSlashes?")":"|$)"),s.value+=i,c.globstar=!0,c.output+=l.output+s.output,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&g[0]==="/"){let ye=g[1]!==void 0?"|$":"";c.output=c.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${H(e)}${I}|${I}${ye})`,s.value+=i,c.output+=l.output+s.output,c.globstar=!0,U(i+O()),b({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&g[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${I}|${H(e)}${I})`,c.output=s.output,c.globstar=!0,U(i+O()),b({type:"slash",value:"/",output:""});continue}c.output=c.output.slice(0,-s.output.length),s.type="globstar",s.output=H(e),s.value+=i,c.output+=s.output,c.globstar=!0,U(i);continue}let m={type:"star",value:i,output:R};if(e.bash===!0){m.output=".*?",(s.type==="bos"||s.type==="slash")&&(m.output=j+m.output),b(m);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&e.regex===!0){m.output=i,b(m);continue}(c.index===c.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(c.output+=ne,s.output+=ne):e.dot===!0?(c.output+=Q,s.output+=Q):(c.output+=j,s.output+=j),_()!=="*"&&(c.output+=F,s.output+=F)),b(m)}for(;c.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing","]"));c.output=J.escapeLast(c.output,"["),ie("brackets")}for(;c.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing",")"));c.output=J.escapeLast(c.output,"("),ie("parens")}for(;c.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing","}"));c.output=J.escapeLast(c.output,"{"),ie("braces")}if(e.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${I}?`}),c.backtrack===!0){c.output="";for(let g of c.tokens)c.output+=g.output!=null?g.output:g.value,g.suffix&&(c.output+=g.suffix)}return c};je.fastpaths=(t,r)=>{let e={...r},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);t=At[t]||t;let{DOT_LITERAL:u,SLASH_LITERAL:a,ONE_CHAR:f,DOTS_SLASH:p,NO_DOT:d,NO_DOTS:C,NO_DOTS_SLASH:L,STAR:I,START_ANCHOR:F}=ve.globChars(e.windows),y=e.dot?C:d,N=e.dot?L:d,ne=e.capture?"":"?:",Q={negated:!1,prefix:""},E=e.bash===!0?".*?":I;e.capture&&(E=`(${E})`);let Z=j=>j.noglobstar===!0?E:`(${ne}(?:(?!${F}${j.dot?p:u}).)*?)`,se=j=>{switch(j){case"*":return`${y}${f}${E}`;case".*":return`${u}${f}${E}`;case"*.*":return`${y}${E}${u}${f}${E}`;case"*/*":return`${y}${E}${a}${f}${N}${E}`;case"**":return y+Z(e);case"**/*":return`(?:${y}${Z(e)}${a})?${N}${f}${E}`;case"**/*.*":return`(?:${y}${Z(e)}${a})?${N}${E}${u}${f}${E}`;case"**/.*":return`(?:${y}${Z(e)}${a})?${u}${f}${E}`;default:{let h=/^(.*?)\.(\w+)$/.exec(j);if(!h)return;let R=se(h[1]);return R?R+u+h[2]:void 0}}},D=J.removePrefix(t,Q),H=se(D);return H&&e.strictSlashes!==!0&&(H+=`${a}?`),H};Rt.exports=je});var _t=ae((Xr,yt)=>{"use strict";var xr=dt(),We=bt(),Ct=Ae(),Or=de(),Sr=t=>t&&typeof t=="object"&&!Array.isArray(t),$=(t,r,e=!1)=>{if(Array.isArray(t)){let C=t.map(I=>$(I,r,e));return I=>{for(let F of C){let y=F(I);if(y)return y}return!1}}let o=Sr(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=r||{},u=n.windows,a=o?$.compileRe(t,r):$.makeRe(t,r,!1,!0),f=a.state;delete a.state;let p=()=>!1;if(n.ignore){let C={...r,ignore:null,onMatch:null,onResult:null};p=$(n.ignore,C,e)}let d=(C,L=!1)=>{let{isMatch:I,match:F,output:y}=$.test(C,a,r,{glob:t,posix:u}),N={glob:t,state:f,regex:a,posix:u,input:C,output:y,match:F,isMatch:I};return typeof n.onResult=="function"&&n.onResult(N),I===!1?(N.isMatch=!1,L?N:!1):p(C)?(typeof n.onIgnore=="function"&&n.onIgnore(N),N.isMatch=!1,L?N:!1):(typeof n.onMatch=="function"&&n.onMatch(N),L?N:!0)};return e&&(d.state=f),d};$.test=(t,r,e,{glob:o,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let u=e||{},a=u.format||(n?Ct.toPosixSlashes:null),f=t===o,p=f&&a?a(t):t;return f===!1&&(p=a?a(t):t,f=p===o),(f===!1||u.capture===!0)&&(u.matchBase===!0||u.basename===!0?f=$.matchBase(t,r,e,n):f=r.exec(p)),{isMatch:!!f,match:f,output:p}};$.matchBase=(t,r,e)=>(r instanceof RegExp?r:$.makeRe(r,e)).test(Ct.basename(t));$.isMatch=(t,r,e)=>$(r,e)(t);$.parse=(t,r)=>Array.isArray(t)?t.map(e=>$.parse(e,r)):We(t,{...r,fastpaths:!1});$.scan=(t,r)=>xr(t,r);$.compileRe=(t,r,e=!1,o=!1)=>{if(e===!0)return t.output;let n=r||{},u=n.contains?"":"^",a=n.contains?"":"$",f=`${u}(?:${t.output})${a}`;t&&t.negated===!0&&(f=`^(?!${f}).*$`);let p=$.toRegex(f,r);return o===!0&&(p.state=t),p};$.makeRe=(t,r={},e=!1,o=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=We.fastpaths(t,r)),n.output||(n=We(t,r)),$.compileRe(n,r,e,o)};$.toRegex=(t,r)=>{try{let e=r||{};return new RegExp(t,e.flags||(e.nocase?"i":""))}catch(e){if(r&&r.debug===!0)throw e;return/$^/}};$.constants=Or;yt.exports=$});var Ot=ae((qr,xt)=>{"use strict";var Et=_t(),vr=Ae();function mt(t,r,e=!1){return r&&(r.windows===null||r.windows===void 0)&&(r={...r,windows:vr.isWindows()}),Et(t,r,e)}Object.assign(mt,Et);xt.exports=mt});var Ir={};Ht(Ir,{default:()=>Lr});var B=fe("@yarnpkg/core");var Ke=(t=0)=>r=>`\x1B[${r+t}m`,Xe=(t=0)=>r=>`\x1B[${38+t};5;${r}m`,qe=(t=0)=>(r,e,o)=>`\x1B[${38+t};2;${r};${e};${o}m`,x={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},kr=Object.keys(x.modifier),Mt=Object.keys(x.color),Pt=Object.keys(x.bgColor),Nr=[...Mt,...Pt];function Gt(){let t=new Map;for(let[r,e]of Object.entries(x)){for(let[o,n]of Object.entries(e))x[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[o]=x[o],t.set(n[0],n[1]);Object.defineProperty(x,r,{value:e,enumerable:!1})}return Object.defineProperty(x,"codes",{value:t,enumerable:!1}),x.color.close="\x1B[39m",x.bgColor.close="\x1B[49m",x.color.ansi=Ke(),x.color.ansi256=Xe(),x.color.ansi16m=qe(),x.bgColor.ansi=Ke(10),x.bgColor.ansi256=Xe(10),x.bgColor.ansi16m=qe(10),Object.defineProperties(x,{rgbToAnsi256:{value(r,e,o){return r===e&&e===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(e/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(r){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!e)return[0,0,0];let[o]=e;o.length===3&&(o=[...o].map(u=>u+u).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:r=>x.rgbToAnsi256(...x.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let e,o,n;if(r>=232)e=((r-232)*10+8)/255,o=e,n=e;else{r-=16;let f=r%36;e=Math.floor(r/36)/5,o=Math.floor(f/6)/5,n=f%6/5}let u=Math.max(e,o,n)*2;if(u===0)return 30;let a=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(e));return u===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(r,e,o)=>x.ansi256ToAnsi(x.rgbToAnsi256(r,e,o)),enumerable:!1},hexToAnsi:{value:r=>x.ansi256ToAnsi(x.hexToAnsi256(r)),enumerable:!1}}),x}var Bt=Gt(),Y=Bt;var xe=Ee(fe("process"),1),Qe=Ee(fe("os"),1),Ie=Ee(fe("tty"),1);function K(t,r=globalThis.Deno?globalThis.Deno.args:xe.default.argv){let e=t.startsWith("-")?"":t.length===1?"-":"--",o=r.indexOf(e+t),n=r.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:v}=xe.default,me;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?me=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(me=1);function Ft(){if("FORCE_COLOR"in v)return v.FORCE_COLOR==="true"?1:v.FORCE_COLOR==="false"?0:v.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(v.FORCE_COLOR,10),3)}function jt(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Wt(t,{streamIsTTY:r,sniffFlags:e=!0}={}){let o=Ft();o!==void 0&&(me=o);let n=e?me:o;if(n===0)return 0;if(e){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in v&&"AGENT_NAME"in v)return 1;if(t&&!r&&n===void 0)return 0;let u=n||0;if(v.TERM==="dumb")return u;if(xe.default.platform==="win32"){let a=Qe.default.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in v)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(a=>a in v)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(a=>a in v)||v.CI_NAME==="codeship"?1:u;if("TEAMCITY_VERSION"in v)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(v.TEAMCITY_VERSION)?1:0;if(v.COLORTERM==="truecolor"||v.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in v){let a=Number.parseInt((v.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(v.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(v.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(v.TERM)||"COLORTERM"in v?1:u}function Ye(t,r={}){let e=Wt(t,{streamIsTTY:t&&t.isTTY,...r});return jt(e)}var Vt={stdout:Ye({isTTY:Ie.default.isatty(1)}),stderr:Ye({isTTY:Ie.default.isatty(2)})},Ze=Vt;function ze(t,r,e){let o=t.indexOf(r);if(o===-1)return t;let n=r.length,u=0,a="";do a+=t.slice(u,o)+r+e,u=o+n,o=t.indexOf(r,u);while(o!==-1);return a+=t.slice(u),a}function Je(t,r,e,o){let n=0,u="";do{let a=t[o-1]==="\r";u+=t.slice(n,a?o-1:o)+r+(a?`\r
`:`
`)+e,n=o+1,o=t.indexOf(`
`,n)}while(o!==-1);return u+=t.slice(n),u}var{stdout:et,stderr:tt}=Ze,we=Symbol("GENERATOR"),ue=Symbol("STYLER"),pe=Symbol("IS_EMPTY"),rt=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null),Ut=(t,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=et?et.level:0;t.level=r.level===void 0?e:r.level};var Kt=t=>{let r=(...e)=>e.join(" ");return Ut(r,t),Object.setPrototypeOf(r,ge.prototype),r};function ge(t){return Kt(t)}Object.setPrototypeOf(ge.prototype,Function.prototype);for(let[t,r]of Object.entries(Y))ce[t]={get(){let e=Oe(this,Ne(r.open,r.close,this[ue]),this[pe]);return Object.defineProperty(this,t,{value:e}),e}};ce.visible={get(){let t=Oe(this,this[ue],!0);return Object.defineProperty(this,"visible",{value:t}),t}};var ke=(t,r,e,...o)=>t==="rgb"?r==="ansi16m"?Y[e].ansi16m(...o):r==="ansi256"?Y[e].ansi256(Y.rgbToAnsi256(...o)):Y[e].ansi(Y.rgbToAnsi(...o)):t==="hex"?ke("rgb",r,e,...Y.hexToRgb(...o)):Y[e][t](...o),Xt=["rgb","hex","ansi256"];for(let t of Xt){ce[t]={get(){let{level:e}=this;return function(...o){let n=Ne(ke(t,rt[e],"color",...o),Y.color.close,this[ue]);return Oe(this,n,this[pe])}}};let r="bg"+t[0].toUpperCase()+t.slice(1);ce[r]={get(){let{level:e}=this;return function(...o){let n=Ne(ke(t,rt[e],"bgColor",...o),Y.bgColor.close,this[ue]);return Oe(this,n,this[pe])}}}}var qt=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this[we].level},set(t){this[we].level=t}}}),Ne=(t,r,e)=>{let o,n;return e===void 0?(o=t,n=r):(o=e.openAll+t,n=r+e.closeAll),{open:t,close:r,openAll:o,closeAll:n,parent:e}},Oe=(t,r,e)=>{let o=(...n)=>Yt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,qt),o[we]=t,o[ue]=r,o[pe]=e,o},Yt=(t,r)=>{if(t.level<=0||!r)return t[pe]?"":r;let e=t[ue];if(e===void 0)return r;let{openAll:o,closeAll:n}=e;if(r.includes("\x1B"))for(;e!==void 0;)r=ze(r,e.close,e.open),e=e.parent;let u=r.indexOf(`
`);return u!==-1&&(r=Je(r,n,o,u)),o+r+n};Object.defineProperties(ge.prototype,ce);var Qt=ge(),Fr=ge({level:tt?tt.level:0});var he=Qt;var Ve=fe("@yarnpkg/core"),St=Ee(Ot()),re="root",X="catalog:",W=class extends Error{constructor(e,o){super(e);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},$e=class{constructor(){this.configCache=new Map}getInheritanceChain(r){let e=r.split("/"),o=[];for(let n=0;n<e.length;n++)o.push(e.slice(0,n+1).join("/"));return o}resolveInheritedRange(r,e,o){let n=this.getInheritanceChain(e);for(let a=n.length-1;a>=0;a--){let f=n[a],p=r.list?.[f];if(p&&typeof p=="object"){let d=p[o];if(d)return d}}if(r.list&&typeof r.list=="object"){let a=r.list[o];if(typeof a=="string")return a}let u=r.list?.[re];if(u&&typeof u=="object"){let a=u[o];if(a)return a}return null}validateInheritanceStructure(r){if(!r.list)return!0;let e=Object.keys(r.list);for(let o of e)if(typeof r.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let u=0;u<n.length-1;u++){let a=n[u];if(!e.includes(a)&&a!==re)return!1}}return!0}async readConfiguration(r){let o=r.cwd,n=this.configCache.get(o);if(n)return n;let u=r.configuration.get("catalogs")||{},a=u;if(u.list?a.list=Object.entries(u.list).reduce((f,[p,d])=>(typeof d=="string"?f[re]={...f[re]||{},[p]:d}:f[p]=d,f),{}):a.list={},!this.isValidConfiguration(a))throw new W("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'off' | 'warn' | 'strict' | { [package: string]: 'off' | 'warn' | 'strict' } }, list: { [alias: string]: { [packageName: string]: string } } }",W.INVALID_FORMAT);if(!this.validateInheritanceStructure(a))throw new W("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",W.INVALID_ALIAS);return this.configCache.set(o,a),a}async getRange(r,e,o){let n=await this.readConfiguration(r),u=e.length===0?re:e,a=this.resolveInheritedRange(n,u,o);if(a)return/^[^:]+:/.test(a)?a:`${r.configuration.get("defaultProtocol")}${a}`;let f=n.list?.[u];if(!f||typeof f=="string")throw new W(`Alias "${u}" not found in .yarnrc.yml catalogs.`,W.INVALID_ALIAS);let p=f[o];if(!p)throw new W(`Package "${o}" not found in alias "${u}"`,W.INVALID_ALIAS);return/^[^:]+:/.test(p)?p:`${r.configuration.get("defaultProtocol")}${p}`}async getDefaultAliasGroups(r){let e=await this.readConfiguration(r.project);if(e.options){if(await this.shouldIgnoreWorkspace(r))return[];if(e.options.default){if(Array.isArray(e.options.default))return e.options.default;if(e.options.default==="max"){let o=Object.keys(e.list||{}),n=[...r.manifest.dependencies,...r.manifest.devDependencies],u=Object.fromEntries(o.map(f=>[f,0]));for(let[f,p]of n)if(p.range.startsWith(X)){let d=p.range.substring(X.length);u[d]=(u[d]||0)+1}let a=Math.max(...Object.values(u));return Object.keys(u).filter(f=>u[f]===a)}}}return[]}async getGroupValidationLevel(r,e){let n=(await this.readConfiguration(r.project)).options?.validation||"warn";if(typeof n=="string")return n;let u=this.getInheritanceChain(e);for(let a=u.length-1;a>=0;a--){let f=u[a];if(n[f]!==void 0)return n[f]}return"warn"}async getValidationLevelForPackage(r,e){let o=(await this.findDependency(r.project,e)).map(([u])=>u);if(o.length===0)return"off";let n=[];for(let u of o){let a=await this.getGroupValidationLevel(r,u);n.push(a)}return n.includes("strict")?"strict":n.includes("warn")?"warn":"off"}async findDependency(r,e){let o=Ve.structUtils.stringifyIdent(e),n=await this.readConfiguration(r),u=[];for(let a of Object.keys(n.list||{})){let f=this.resolveInheritedRange(n,a,o);f&&u.push([a,f])}return u}clearCache(r){this.configCache.delete(r)}async shouldIgnoreWorkspace(r){if(!r.manifest.name)return!1;let e=await this.readConfiguration(r.project);return e.options?.ignoredWorkspaces?(0,St.isMatch)(Ve.structUtils.stringifyIdent(r.manifest.name),e.options.ignoredWorkspaces):!1}async getValidationLevel(r){let e=await this.readConfiguration(r.project);return e.options?.validation&&typeof e.options.validation=="string"?e.options.validation:"warn"}isValidConfiguration(r){if(!r||typeof r!="object"||!("list"in r)||!r.list||typeof r.list!="object")return!1;for(let[e,o]of Object.entries(r.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in r&&r.options&&typeof r.options=="object"){if("ignoredWorkspaces"in r.options&&r.options.ignoredWorkspaces&&(!Array.isArray(r.options.ignoredWorkspaces)||r.options.ignoredWorkspaces.length===0))return!1;if("default"in r.options&&r.options.default){if(Array.isArray(r.options.default)){if(r.options.default.length===0)return!1;let e=Object.keys(r.list||{});for(let o of r.options.default)if(o!=="root"&&!e.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),u=!0;for(let a of n)if(a!=="root"&&!e.includes(a)){u=!1;break}if(!u)return!1}else return!1}else if(typeof r.options.default!="string"||r.options.default!=="max")return!1}if("validation"in r.options){let e=r.options.validation;if(typeof e=="string"){if(!["warn","strict","off"].includes(e))return!1}else if(typeof e=="object"&&e!==null)for(let[o,n]of Object.entries(e)){if(typeof n!="string"||!["warn","strict","off"].includes(n))return!1;let u=Object.keys(r.list||{});if(!u.includes(o)&&o!==re)if(o.includes("/")){let a=this.getInheritanceChain(o),f=!0;for(let p of a)if(p!==re&&!u.includes(p)){f=!1;break}if(!f)return!1}else return!1}else return!1}}return!0}};var q=new $e,Tr={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:B.SettingsType.ANY,default:{}}},hooks:{validateWorkspace:async(t,r)=>{let e=await q.shouldIgnoreWorkspace(t);if(!e){let n=await $r(t);if(n.length>0){let u=n.filter(p=>p.validationLevel==="strict"),a=n.filter(p=>p.validationLevel==="warn"),f=p=>`The following dependencies are listed in the catalogs but not using the catalog protocol: ${p.map(C=>he.yellow(C.packageName)).join(", ")}. Consider using the catalog protocol instead.`;u.length>0&&r.reportError(B.MessageName.INVALID_MANIFEST,f(u)),a.length>0&&r.reportWarning(B.MessageName.INVALID_MANIFEST,f(a))}}let o=[...Object.values(t.manifest.raw.dependencies||{}),...Object.values(t.manifest.raw.devDependencies||{})].some(n=>n.startsWith(X));e&&o&&r.reportError(B.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},reduceDependency:async(t,r,...e)=>{let o=t.range.startsWith(X),n=t.range.includes("catalog%3A")&&t.range.startsWith("patch:");if(!o&&!n)return t;try{let u="",a=t.range;if(o)u=t.range.slice(X.length);else if(n){let L=t.range.match(/catalog%3A([^#&]*)/);L&&(u=L[1]||"")}let f=B.structUtils.stringifyIdent(t),p=await q.getRange(r,u,f),d;if(o?d=B.structUtils.makeDescriptor(B.structUtils.makeIdent(t.scope,t.name),p):d=B.structUtils.makeDescriptor(B.structUtils.makeIdent(t.scope,t.name),a.replace(/catalog%3A[^#&]*/,p)),n)return d;let C=await r.configuration.reduceHook(L=>L.reduceDependency,d,r,...e);return C!==d?C:d}catch(u){throw u instanceof W?new Error(`Failed to resolve ${B.structUtils.stringifyDescriptor(t)}: ${u.message}`):u}},afterWorkspaceDependencyAddition:async(t,r,e)=>{vt(t,e)},afterWorkspaceDependencyReplacement:async(t,r,e,o)=>{vt(t,o)},beforeWorkspacePacking:async(t,r)=>{if(await q.shouldIgnoreWorkspace(t))return;let e=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of e){let n=r[o];if(!(!n||typeof n!="object"))for(let[u,a]of Object.entries(n)){let f=a;if(f.startsWith(X))try{let p=f.slice(X.length),d=await q.getRange(t.project,p,u);n[u]=d}catch(p){throw p instanceof W?new Error(`Failed to resolve catalog dependency ${u}@${f} during packaging: ${p.message}`):p}}}}}};async function $r(t){let r=[...t.manifest.dependencies.values(),...t.manifest.devDependencies.values()],e=[],o=await q.getDefaultAliasGroups(t);for(let n of r){if(n.range.startsWith(X))continue;let u=(await q.findDependency(t.project,n)).map(([f])=>f),a=o.length>0?u.filter(([f])=>o.includes(f)):u;if(a.length>0){let f=await q.getValidationLevelForPackage(t,n);f!=="off"&&e.push({packageName:B.structUtils.stringifyIdent(n),validationLevel:f,applicableGroups:a})}}return e}async function vt(t,r){if(r.range.startsWith(X)){if(await q.shouldIgnoreWorkspace(t))throw new Error(he.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await q.shouldIgnoreWorkspace(t))return;let e=await q.findDependency(t.project,r);if(e.length===0)return;let o=await q.getDefaultAliasGroups(t);if(o.length>0){for(let p of o)if(e.some(([d])=>d===p)){r.range=`${X}${p}`;return}}let n=e.map(([p])=>p===re?"":p),u=n.filter(p=>p!=="").length>0?` (${n.join(", ")})`:"",a=await q.getValidationLevelForPackage(t,r),f=`\u27A4 ${r.name} is listed in the catalogs config${u}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${r.name}@${X}${n[0]}' instead.`;if(a==="strict")throw new Error(he.red(f));a==="warn"&&console.warn(he.yellow(f))}var Lr=Tr;return Dt(Ir);})();
return plugin;
}
};
