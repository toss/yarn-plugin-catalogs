/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Ht=Object.create;var Ce=Object.defineProperty;var kt=Object.getOwnPropertyDescriptor;var wt=Object.getOwnPropertyNames;var Nt=Object.getPrototypeOf,Mt=Object.prototype.hasOwnProperty;var ie=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var ae=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Pt=(r,t)=>{for(var e in t)Ce(r,e,{get:t[e],enumerable:!0})},Ve=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of wt(t))!Mt.call(r,n)&&n!==e&&Ce(r,n,{get:()=>t[n],enumerable:!(o=kt(t,n))||o.enumerable});return r};var ye=(r,t,e)=>(e=r!=null?Ht(Nt(r)):{},Ve(t||!r||!r.__esModule?Ce(e,"default",{value:r,enumerable:!0}):e,r)),Dt=r=>Ve(Ce({},"__esModule",{value:!0}),r);var ge=ae((Ur,ut)=>{"use strict";var Z="\\\\/",nt=`[^${Z}]`,ee="\\.",Jt="\\+",er="\\?",Oe="\\/",tr="(?=.)",st="[^/]",Ne=`(?:${Oe}|$)`,it=`(?:^|${Oe})`,Me=`${ee}{1,2}${Ne}`,rr=`(?!${ee})`,or=`(?!${it}${Me})`,nr=`(?!${ee}{0,1}${Ne})`,sr=`(?!${Me})`,ir=`[^.${Oe}]`,ar=`${st}*?`,ur="/",at={DOT_LITERAL:ee,PLUS_LITERAL:Jt,QMARK_LITERAL:er,SLASH_LITERAL:Oe,ONE_CHAR:tr,QMARK:st,END_ANCHOR:Ne,DOTS_SLASH:Me,NO_DOT:rr,NO_DOTS:or,NO_DOT_SLASH:nr,NO_DOTS_SLASH:sr,QMARK_NO_DOT:ir,STAR:ar,START_ANCHOR:it,SEP:ur},cr={...at,SLASH_LITERAL:`[${Z}]`,QMARK:nt,STAR:`${nt}*?`,DOTS_SLASH:`${ee}{1,2}(?:[${Z}]|$)`,NO_DOT:`(?!${ee})`,NO_DOTS:`(?!(?:^|[${Z}])${ee}{1,2}(?:[${Z}]|$))`,NO_DOT_SLASH:`(?!${ee}{0,1}(?:[${Z}]|$))`,NO_DOTS_SLASH:`(?!${ee}{1,2}(?:[${Z}]|$))`,QMARK_NO_DOT:`[^.${Z}]`,START_ANCHOR:`(?:^|[${Z}])`,END_ANCHOR:`(?:[${Z}]|$)`,SEP:"\\"},lr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ut.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:lr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(r){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${r.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(r){return r===!0?cr:at}}});var he=ae(B=>{"use strict";var{REGEX_BACKSLASH:fr,REGEX_REMOVE_BACKSLASH:pr,REGEX_SPECIAL_CHARS:gr,REGEX_SPECIAL_CHARS_GLOBAL:hr}=ge();B.isObject=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);B.hasRegexChars=r=>gr.test(r);B.isRegexChar=r=>r.length===1&&B.hasRegexChars(r);B.escapeRegex=r=>r.replace(hr,"\\$1");B.toPosixSlashes=r=>r.replace(fr,"/");B.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let r=navigator.platform.toLowerCase();return r==="win32"||r==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};B.removeBackslashes=r=>r.replace(pr,t=>t==="\\"?"":t);B.escapeLast=(r,t,e)=>{let o=r.lastIndexOf(t,e);return o===-1?r:r[o-1]==="\\"?B.escapeLast(r,t,o-1):`${r.slice(0,o)}\\${r.slice(o)}`};B.removePrefix=(r,t={})=>{let e=r;return e.startsWith("./")&&(e=e.slice(2),t.prefix="./"),e};B.wrapOutput=(r,t={},e={})=>{let o=e.contains?"":"^",n=e.contains?"":"$",c=`${o}(?:${r})${n}`;return t.negated===!0&&(c=`(?:^(?!${c}).*$)`),c};B.basename=(r,{windows:t}={})=>{let e=r.split(t?/[\\/]/:"/"),o=e[e.length-1];return o===""?e[e.length-2]:o}});var At=ae((Vr,dt)=>{"use strict";var ct=he(),{CHAR_ASTERISK:Pe,CHAR_AT:dr,CHAR_BACKWARD_SLASH:de,CHAR_COMMA:Ar,CHAR_DOT:De,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:ht,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:je,CHAR_LEFT_SQUARE_BRACKET:Rr,CHAR_PLUS:br,CHAR_QUESTION_MARK:lt,CHAR_RIGHT_CURLY_BRACE:Cr,CHAR_RIGHT_PARENTHESES:ft,CHAR_RIGHT_SQUARE_BRACKET:yr}=ge(),pt=r=>r===ht||r===de,gt=r=>{r.isPrefix!==!0&&(r.depth=r.isGlobstar?1/0:1)},_r=(r,t)=>{let e=t||{},o=r.length-1,n=e.parts===!0||e.scanToEnd===!0,c=[],u=[],g=[],p=r,b=-1,C=0,N=0,L=!1,j=!1,y=!1,k=!1,re=!1,Y=!1,E=!1,Q=!1,oe=!1,M=!1,w=0,F,h,A={value:"",depth:0,isGlob:!1},a=()=>b>=o,D=()=>p.charCodeAt(b+1),I=()=>(F=h,p.charCodeAt(++b));for(;b<o;){h=I();let _;if(h===de){E=A.backslashes=!0,h=I(),h===Ge&&(Y=!0);continue}if(Y===!0||h===Ge){for(w++;a()!==!0&&(h=I());){if(h===de){E=A.backslashes=!0,I();continue}if(h===Ge){w++;continue}if(Y!==!0&&h===De&&(h=I())===De){if(L=A.isBrace=!0,y=A.isGlob=!0,M=!0,n===!0)continue;break}if(Y!==!0&&h===Ar){if(L=A.isBrace=!0,y=A.isGlob=!0,M=!0,n===!0)continue;break}if(h===Cr&&(w--,w===0)){Y=!1,L=A.isBrace=!0,M=!0;break}}if(n===!0)continue;break}if(h===ht){if(c.push(b),u.push(A),A={value:"",depth:0,isGlob:!1},M===!0)continue;if(F===De&&b===C+1){C+=2;continue}N=b+1;continue}if(e.noext!==!0&&(h===br||h===dr||h===Pe||h===lt||h===Be)===!0&&D()===je){if(y=A.isGlob=!0,k=A.isExtglob=!0,M=!0,h===Be&&b===C&&(oe=!0),n===!0){for(;a()!==!0&&(h=I());){if(h===de){E=A.backslashes=!0,h=I();continue}if(h===ft){y=A.isGlob=!0,M=!0;break}}continue}break}if(h===Pe){if(F===Pe&&(re=A.isGlobstar=!0),y=A.isGlob=!0,M=!0,n===!0)continue;break}if(h===lt){if(y=A.isGlob=!0,M=!0,n===!0)continue;break}if(h===Rr){for(;a()!==!0&&(_=I());){if(_===de){E=A.backslashes=!0,I();continue}if(_===yr){j=A.isBracket=!0,y=A.isGlob=!0,M=!0;break}}if(n===!0)continue;break}if(e.nonegate!==!0&&h===Be&&b===C){Q=A.negated=!0,C++;continue}if(e.noparen!==!0&&h===je){if(y=A.isGlob=!0,n===!0){for(;a()!==!0&&(h=I());){if(h===je){E=A.backslashes=!0,h=I();continue}if(h===ft){M=!0;break}}continue}break}if(y===!0){if(M=!0,n===!0)continue;break}}e.noext===!0&&(k=!1,y=!1);let v=p,s="",i="";C>0&&(s=p.slice(0,C),p=p.slice(C),N-=C),v&&y===!0&&N>0?(v=p.slice(0,N),i=p.slice(N)):y===!0?(v="",i=p):v=p,v&&v!==""&&v!=="/"&&v!==p&&pt(v.charCodeAt(v.length-1))&&(v=v.slice(0,-1)),e.unescape===!0&&(i&&(i=ct.removeBackslashes(i)),v&&E===!0&&(v=ct.removeBackslashes(v)));let W={prefix:s,input:r,start:C,base:v,glob:i,isBrace:L,isBracket:j,isGlob:y,isExtglob:k,isGlobstar:re,negated:Q,negatedExtglob:oe};if(e.tokens===!0&&(W.maxDepth=0,pt(h)||u.push(A),W.tokens=u),e.parts===!0||e.tokens===!0){let _;for(let O=0;O<c.length;O++){let J=_?_+1:C,U=c[O],te=r.slice(J,U);e.tokens&&(O===0&&C!==0?(u[O].isPrefix=!0,u[O].value=s):u[O].value=te,gt(u[O]),W.maxDepth+=u[O].depth),(O!==0||te!=="")&&g.push(te),_=U}if(_&&_+1<r.length){let O=r.slice(_+1);g.push(O),e.tokens&&(u[u.length-1].value=O,gt(u[u.length-1]),W.maxDepth+=u[u.length-1].depth)}W.slashes=c,W.parts=g}return W};dt.exports=_r});var Ct=ae((Xr,bt)=>{"use strict";var Se=ge(),z=he(),{MAX_LENGTH:Te,POSIX_REGEX_SOURCE:Er,REGEX_NON_SPECIAL_CHARS:mr,REGEX_SPECIAL_CHARS_BACKREF:xr,REPLACEMENTS:Rt}=Se,Or=(r,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...r,t);r.sort();let e=`[${r.join("-")}]`;try{new RegExp(e)}catch{return r.map(n=>z.escapeRegex(n)).join("..")}return e},le=(r,t)=>`Missing ${r}: "${t}" - use "\\\\${t}" to match literal characters`,Fe=(r,t)=>{if(typeof r!="string")throw new TypeError("Expected a string");r=Rt[r]||r;let e={...t},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let c={type:"bos",value:"",output:e.prepend||""},u=[c],g=e.capture?"":"?:",p=Se.globChars(e.windows),b=Se.extglobChars(p),{DOT_LITERAL:C,PLUS_LITERAL:N,SLASH_LITERAL:L,ONE_CHAR:j,DOTS_SLASH:y,NO_DOT:k,NO_DOT_SLASH:re,NO_DOTS_SLASH:Y,QMARK:E,QMARK_NO_DOT:Q,STAR:oe,START_ANCHOR:M}=p,w=f=>`(${g}(?:(?!${M}${f.dot?y:C}).)*?)`,F=e.dot?"":k,h=e.dot?E:Q,A=e.bash===!0?w(e):oe;e.capture&&(A=`(${A})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let a={input:r,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};r=z.removePrefix(r,a),n=r.length;let D=[],I=[],v=[],s=c,i,W=()=>a.index===n-1,_=a.peek=(f=1)=>r[a.index+f],O=a.advance=()=>r[++a.index]||"",J=()=>r.slice(a.index+1),U=(f="",m=0)=>{a.consumed+=f,a.index+=m},te=f=>{a.output+=f.output!=null?f.output:f.value,U(f.value)},Lt=()=>{let f=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)O(),a.start++,f++;return f%2===0?!1:(a.negated=!0,a.start++,!0)},Ae=f=>{a[f]++,v.push(f)},ne=f=>{a[f]--,v.pop()},R=f=>{if(s.type==="globstar"){let m=a.braces>0&&(f.type==="comma"||f.type==="brace"),l=f.extglob===!0||D.length&&(f.type==="pipe"||f.type==="paren");f.type!=="slash"&&f.type!=="paren"&&!m&&!l&&(a.output=a.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=A,a.output+=s.output)}if(D.length&&f.type!=="paren"&&(D[D.length-1].inner+=f.value),(f.value||f.output)&&te(f),s&&s.type==="text"&&f.type==="text"){s.output=(s.output||s.value)+f.value,s.value+=f.value;return}f.prev=s,u.push(f),s=f},Re=(f,m)=>{let l={...b[m],conditions:1,inner:""};l.prev=s,l.parens=a.parens,l.output=a.output;let d=(e.capture?"(":"")+l.open;Ae("parens"),R({type:f,value:m,output:a.output?"":j}),R({type:"paren",extglob:!0,value:O(),output:d}),D.push(l)},It=f=>{let m=f.close+(e.capture?")":""),l;if(f.type==="negate"){let d=A;if(f.inner&&f.inner.length>1&&f.inner.includes("/")&&(d=w(e)),(d!==A||W()||/^\)+$/.test(J()))&&(m=f.close=`)$))${d}`),f.inner.includes("*")&&(l=J())&&/^\.[^\\/.]+$/.test(l)){let S=Fe(l,{...t,fastpaths:!1}).output;m=f.close=`)${S})${d})`}f.prev.type==="bos"&&(a.negatedExtglob=!0)}R({type:"paren",extglob:!0,value:i,output:m}),ne("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(r)){let f=!1,m=r.replace(xr,(l,d,S,P,H,Le)=>P==="\\"?(f=!0,l):P==="?"?d?d+P+(H?E.repeat(H.length):""):Le===0?h+(H?E.repeat(H.length):""):E.repeat(S.length):P==="."?C.repeat(S.length):P==="*"?d?d+P+(H?A:""):A:d?l:`\\${l}`);return f===!0&&(e.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===r&&e.contains===!0?(a.output=r,a):(a.output=z.wrapOutput(m,a,t),a)}for(;!W();){if(i=O(),i==="\0")continue;if(i==="\\"){let l=_();if(l==="/"&&e.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",R({type:"text",value:i});continue}let d=/^\\+/.exec(J()),S=0;if(d&&d[0].length>2&&(S=d[0].length,a.index+=S,S%2!==0&&(i+="\\")),e.unescape===!0?i=O():i+=O(),a.brackets===0){R({type:"text",value:i});continue}}if(a.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(e.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let d=s.value.lastIndexOf("["),S=s.value.slice(0,d),P=s.value.slice(d+2),H=Er[P];if(H){s.value=S+H,a.backtrack=!0,O(),!c.output&&u.indexOf(s)===1&&(c.output=j);continue}}}(i==="["&&_()!==":"||i==="-"&&_()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),e.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,te({value:i});continue}if(a.quotes===1&&i!=='"'){i=z.escapeRegex(i),s.value+=i,te({value:i});continue}if(i==='"'){a.quotes=a.quotes===1?0:1,e.keepQuotes===!0&&R({type:"text",value:i});continue}if(i==="("){Ae("parens"),R({type:"paren",value:i});continue}if(i===")"){if(a.parens===0&&e.strictBrackets===!0)throw new SyntaxError(le("opening","("));let l=D[D.length-1];if(l&&a.parens===l.parens+1){It(D.pop());continue}R({type:"paren",value:i,output:a.parens?")":"\\)"}),ne("parens");continue}if(i==="["){if(e.nobracket===!0||!J().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(le("closing","]"));i=`\\${i}`}else Ae("brackets");R({type:"bracket",value:i});continue}if(i==="]"){if(e.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){R({type:"text",value:i,output:`\\${i}`});continue}if(a.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(le("opening","["));R({type:"text",value:i,output:`\\${i}`});continue}ne("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,te({value:i}),e.literalBrackets===!1||z.hasRegexChars(l))continue;let d=z.escapeRegex(s.value);if(a.output=a.output.slice(0,-s.value.length),e.literalBrackets===!0){a.output+=d,s.value=d;continue}s.value=`(${g}${d}|${s.value})`,a.output+=s.value;continue}if(i==="{"&&e.nobrace!==!0){Ae("braces");let l={type:"brace",value:i,output:"(",outputIndex:a.output.length,tokensIndex:a.tokens.length};I.push(l),R(l);continue}if(i==="}"){let l=I[I.length-1];if(e.nobrace===!0||!l){R({type:"text",value:i,output:i});continue}let d=")";if(l.dots===!0){let S=u.slice(),P=[];for(let H=S.length-1;H>=0&&(u.pop(),S[H].type!=="brace");H--)S[H].type!=="dots"&&P.unshift(S[H].value);d=Or(P,e),a.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=a.output.slice(0,l.outputIndex),P=a.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=d="\\}",a.output=S;for(let H of P)a.output+=H.output||H.value}R({type:"brace",value:i,output:d}),ne("braces"),I.pop();continue}if(i==="|"){D.length>0&&D[D.length-1].conditions++,R({type:"text",value:i});continue}if(i===","){let l=i,d=I[I.length-1];d&&v[v.length-1]==="braces"&&(d.comma=!0,l="|"),R({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&a.index===a.start+1){a.start=a.index+1,a.consumed="",a.output="",u.pop(),s=c;continue}R({type:"slash",value:i,output:L});continue}if(i==="."){if(a.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=I[I.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(a.braces+a.parens===0&&s.type!=="bos"&&s.type!=="slash"){R({type:"text",value:i,output:C});continue}R({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&e.noextglob!==!0&&_()==="("&&_(2)!=="?"){Re("qmark",i);continue}if(s&&s.type==="paren"){let d=_(),S=i;(s.value==="("&&!/[!=<:]/.test(d)||d==="<"&&!/<([!=]|\w+>)/.test(J()))&&(S=`\\${i}`),R({type:"text",value:i,output:S});continue}if(e.dot!==!0&&(s.type==="slash"||s.type==="bos")){R({type:"qmark",value:i,output:Q});continue}R({type:"qmark",value:i,output:E});continue}if(i==="!"){if(e.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){Re("negate",i);continue}if(e.nonegate!==!0&&a.index===0){Lt();continue}}if(i==="+"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){Re("plus",i);continue}if(s&&s.value==="("||e.regex===!1){R({type:"plus",value:i,output:N});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||a.parens>0){R({type:"plus",value:i});continue}R({type:"plus",value:N});continue}if(i==="@"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){R({type:"at",extglob:!0,value:i,output:""});continue}R({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=mr.exec(J());l&&(i+=l[0],a.index+=l[0].length),R({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=A,a.backtrack=!0,a.globstar=!0,U(i);continue}let f=J();if(e.noextglob!==!0&&/^\([^?]/.test(f)){Re("star",i);continue}if(s.type==="star"){if(e.noglobstar===!0){U(i);continue}let l=s.prev,d=l.prev,S=l.type==="slash"||l.type==="bos",P=d&&(d.type==="star"||d.type==="globstar");if(e.bash===!0&&(!S||f[0]&&f[0]!=="/")){R({type:"star",value:i,output:""});continue}let H=a.braces>0&&(l.type==="comma"||l.type==="brace"),Le=D.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!H&&!Le){R({type:"star",value:i,output:""});continue}for(;f.slice(0,3)==="/**";){let be=r[a.index+4];if(be&&be!=="/")break;f=f.slice(3),U("/**",3)}if(l.type==="bos"&&W()){s.type="globstar",s.value+=i,s.output=w(e),a.output=s.output,a.globstar=!0,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!P&&W()){a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=w(e)+(e.strictSlashes?")":"|$)"),s.value+=i,a.globstar=!0,a.output+=l.output+s.output,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&f[0]==="/"){let be=f[1]!==void 0?"|$":"";a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${w(e)}${L}|${L}${be})`,s.value+=i,a.output+=l.output+s.output,a.globstar=!0,U(i+O()),R({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&f[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${L}|${w(e)}${L})`,a.output=s.output,a.globstar=!0,U(i+O()),R({type:"slash",value:"/",output:""});continue}a.output=a.output.slice(0,-s.output.length),s.type="globstar",s.output=w(e),s.value+=i,a.output+=s.output,a.globstar=!0,U(i);continue}let m={type:"star",value:i,output:A};if(e.bash===!0){m.output=".*?",(s.type==="bos"||s.type==="slash")&&(m.output=F+m.output),R(m);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&e.regex===!0){m.output=i,R(m);continue}(a.index===a.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(a.output+=re,s.output+=re):e.dot===!0?(a.output+=Y,s.output+=Y):(a.output+=F,s.output+=F),_()!=="*"&&(a.output+=j,s.output+=j)),R(m)}for(;a.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing","]"));a.output=z.escapeLast(a.output,"["),ne("brackets")}for(;a.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing",")"));a.output=z.escapeLast(a.output,"("),ne("parens")}for(;a.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(le("closing","}"));a.output=z.escapeLast(a.output,"{"),ne("braces")}if(e.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&R({type:"maybe_slash",value:"",output:`${L}?`}),a.backtrack===!0){a.output="";for(let f of a.tokens)a.output+=f.output!=null?f.output:f.value,f.suffix&&(a.output+=f.suffix)}return a};Fe.fastpaths=(r,t)=>{let e={...t},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);r=Rt[r]||r;let{DOT_LITERAL:c,SLASH_LITERAL:u,ONE_CHAR:g,DOTS_SLASH:p,NO_DOT:b,NO_DOTS:C,NO_DOTS_SLASH:N,STAR:L,START_ANCHOR:j}=Se.globChars(e.windows),y=e.dot?C:b,k=e.dot?N:b,re=e.capture?"":"?:",Y={negated:!1,prefix:""},E=e.bash===!0?".*?":L;e.capture&&(E=`(${E})`);let Q=F=>F.noglobstar===!0?E:`(${re}(?:(?!${j}${F.dot?p:c}).)*?)`,oe=F=>{switch(F){case"*":return`${y}${g}${E}`;case".*":return`${c}${g}${E}`;case"*.*":return`${y}${E}${c}${g}${E}`;case"*/*":return`${y}${E}${u}${g}${k}${E}`;case"**":return y+Q(e);case"**/*":return`(?:${y}${Q(e)}${u})?${k}${g}${E}`;case"**/*.*":return`(?:${y}${Q(e)}${u})?${k}${E}${c}${g}${E}`;case"**/.*":return`(?:${y}${Q(e)}${u})?${c}${g}${E}`;default:{let h=/^(.*?)\.(\w+)$/.exec(F);if(!h)return;let A=oe(h[1]);return A?A+c+h[2]:void 0}}},M=z.removePrefix(r,Y),w=oe(M);return w&&e.strictSlashes!==!0&&(w+=`${u}?`),w};bt.exports=Fe});var Et=ae((qr,_t)=>{"use strict";var Sr=At(),We=Ct(),yt=he(),Tr=ge(),vr=r=>r&&typeof r=="object"&&!Array.isArray(r),$=(r,t,e=!1)=>{if(Array.isArray(r)){let C=r.map(L=>$(L,t,e));return L=>{for(let j of C){let y=j(L);if(y)return y}return!1}}let o=vr(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=t||{},c=n.windows,u=o?$.compileRe(r,t):$.makeRe(r,t,!1,!0),g=u.state;delete u.state;let p=()=>!1;if(n.ignore){let C={...t,ignore:null,onMatch:null,onResult:null};p=$(n.ignore,C,e)}let b=(C,N=!1)=>{let{isMatch:L,match:j,output:y}=$.test(C,u,t,{glob:r,posix:c}),k={glob:r,state:g,regex:u,posix:c,input:C,output:y,match:j,isMatch:L};return typeof n.onResult=="function"&&n.onResult(k),L===!1?(k.isMatch=!1,N?k:!1):p(C)?(typeof n.onIgnore=="function"&&n.onIgnore(k),k.isMatch=!1,N?k:!1):(typeof n.onMatch=="function"&&n.onMatch(k),N?k:!0)};return e&&(b.state=g),b};$.test=(r,t,e,{glob:o,posix:n}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};let c=e||{},u=c.format||(n?yt.toPosixSlashes:null),g=r===o,p=g&&u?u(r):r;return g===!1&&(p=u?u(r):r,g=p===o),(g===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?g=$.matchBase(r,t,e,n):g=t.exec(p)),{isMatch:!!g,match:g,output:p}};$.matchBase=(r,t,e)=>(t instanceof RegExp?t:$.makeRe(t,e)).test(yt.basename(r));$.isMatch=(r,t,e)=>$(t,e)(r);$.parse=(r,t)=>Array.isArray(r)?r.map(e=>$.parse(e,t)):We(r,{...t,fastpaths:!1});$.scan=(r,t)=>Sr(r,t);$.compileRe=(r,t,e=!1,o=!1)=>{if(e===!0)return r.output;let n=t||{},c=n.contains?"":"^",u=n.contains?"":"$",g=`${c}(?:${r.output})${u}`;r&&r.negated===!0&&(g=`^(?!${g}).*$`);let p=$.toRegex(g,t);return o===!0&&(p.state=r),p};$.makeRe=(r,t={},e=!1,o=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(n.output=We.fastpaths(r,t)),n.output||(n=We(r,t)),$.compileRe(n,t,e,o)};$.toRegex=(r,t)=>{try{let e=t||{};return new RegExp(r,e.flags||(e.nocase?"i":""))}catch(e){if(t&&t.debug===!0)throw e;return/$^/}};$.constants=Tr;_t.exports=$});var St=ae((Yr,Ot)=>{"use strict";var mt=Et(),$r=he();function xt(r,t,e=!1){return t&&(t.windows===null||t.windows===void 0)&&(t={...t,windows:$r.isWindows()}),mt(r,t,e)}Object.assign(xt,mt);Ot.exports=xt});var Hr={};Pt(Hr,{default:()=>Ir});var $t=ie("@yarnpkg/core");var Xe=(r=0)=>t=>`\x1B[${t+r}m`,qe=(r=0)=>t=>`\x1B[${38+r};5;${t}m`,Ye=(r=0)=>(t,e,o)=>`\x1B[${38+r};2;${t};${e};${o}m`,x={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},wr=Object.keys(x.modifier),Bt=Object.keys(x.color),Gt=Object.keys(x.bgColor),Nr=[...Bt,...Gt];function jt(){let r=new Map;for(let[t,e]of Object.entries(x)){for(let[o,n]of Object.entries(e))x[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[o]=x[o],r.set(n[0],n[1]);Object.defineProperty(x,t,{value:e,enumerable:!1})}return Object.defineProperty(x,"codes",{value:r,enumerable:!1}),x.color.close="\x1B[39m",x.bgColor.close="\x1B[49m",x.color.ansi=Xe(),x.color.ansi256=qe(),x.color.ansi16m=Ye(),x.bgColor.ansi=Xe(10),x.bgColor.ansi256=qe(10),x.bgColor.ansi16m=Ye(10),Object.defineProperties(x,{rgbToAnsi256:{value(t,e,o){return t===e&&e===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[o]=e;o.length===3&&(o=[...o].map(c=>c+c).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>x.rgbToAnsi256(...x.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,o,n;if(t>=232)e=((t-232)*10+8)/255,o=e,n=e;else{t-=16;let g=t%36;e=Math.floor(t/36)/5,o=Math.floor(g/6)/5,n=g%6/5}let c=Math.max(e,o,n)*2;if(c===0)return 30;let u=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(e));return c===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(t,e,o)=>x.ansi256ToAnsi(x.rgbToAnsi256(t,e,o)),enumerable:!1},hexToAnsi:{value:t=>x.ansi256ToAnsi(x.hexToAnsi256(t)),enumerable:!1}}),x}var Ft=jt(),q=Ft;var Ee=ye(ie("process"),1),Ze=ye(ie("os"),1),Ie=ye(ie("tty"),1);function K(r,t=globalThis.Deno?globalThis.Deno.args:Ee.default.argv){let e=r.startsWith("-")?"":r.length===1?"-":"--",o=t.indexOf(e+r),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:T}=Ee.default,_e;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?_e=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(_e=1);function Wt(){if("FORCE_COLOR"in T)return T.FORCE_COLOR==="true"?1:T.FORCE_COLOR==="false"?0:T.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}function Ut(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Kt(r,{streamIsTTY:t,sniffFlags:e=!0}={}){let o=Wt();o!==void 0&&(_e=o);let n=e?_e:o;if(n===0)return 0;if(e){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(r&&!t&&n===void 0)return 0;let c=n||0;if(T.TERM==="dumb")return c;if(Ee.default.platform==="win32"){let u=Ze.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in T)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(u=>u in T)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(u=>u in T)||T.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor"||T.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in T){let u=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:c}function Qe(r,t={}){let e=Kt(r,{streamIsTTY:r&&r.isTTY,...t});return Ut(e)}var Vt={stdout:Qe({isTTY:Ie.default.isatty(1)}),stderr:Qe({isTTY:Ie.default.isatty(2)})},ze=Vt;function Je(r,t,e){let o=r.indexOf(t);if(o===-1)return r;let n=t.length,c=0,u="";do u+=r.slice(c,o)+t+e,c=o+n,o=r.indexOf(t,c);while(o!==-1);return u+=r.slice(c),u}function et(r,t,e,o){let n=0,c="";do{let u=r[o-1]==="\r";c+=r.slice(n,u?o-1:o)+t+(u?`\r
`:`
`)+e,n=o+1,o=r.indexOf(`
`,n)}while(o!==-1);return c+=r.slice(n),c}var{stdout:tt,stderr:rt}=ze,He=Symbol("GENERATOR"),ue=Symbol("STYLER"),fe=Symbol("IS_EMPTY"),ot=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null),Xt=(r,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=tt?tt.level:0;r.level=t.level===void 0?e:t.level};var qt=r=>{let t=(...e)=>e.join(" ");return Xt(t,r),Object.setPrototypeOf(t,pe.prototype),t};function pe(r){return qt(r)}Object.setPrototypeOf(pe.prototype,Function.prototype);for(let[r,t]of Object.entries(q))ce[r]={get(){let e=me(this,we(t.open,t.close,this[ue]),this[fe]);return Object.defineProperty(this,r,{value:e}),e}};ce.visible={get(){let r=me(this,this[ue],!0);return Object.defineProperty(this,"visible",{value:r}),r}};var ke=(r,t,e,...o)=>r==="rgb"?t==="ansi16m"?q[e].ansi16m(...o):t==="ansi256"?q[e].ansi256(q.rgbToAnsi256(...o)):q[e].ansi(q.rgbToAnsi(...o)):r==="hex"?ke("rgb",t,e,...q.hexToRgb(...o)):q[e][r](...o),Yt=["rgb","hex","ansi256"];for(let r of Yt){ce[r]={get(){let{level:e}=this;return function(...o){let n=we(ke(r,ot[e],"color",...o),q.color.close,this[ue]);return me(this,n,this[fe])}}};let t="bg"+r[0].toUpperCase()+r.slice(1);ce[t]={get(){let{level:e}=this;return function(...o){let n=we(ke(r,ot[e],"bgColor",...o),q.bgColor.close,this[ue]);return me(this,n,this[fe])}}}}var Qt=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this[He].level},set(r){this[He].level=r}}}),we=(r,t,e)=>{let o,n;return e===void 0?(o=r,n=t):(o=e.openAll+r,n=t+e.closeAll),{open:r,close:t,openAll:o,closeAll:n,parent:e}},me=(r,t,e)=>{let o=(...n)=>Zt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Qt),o[He]=r,o[ue]=t,o[fe]=e,o},Zt=(r,t)=>{if(r.level<=0||!t)return r[fe]?"":t;let e=r[ue];if(e===void 0)return t;let{openAll:o,closeAll:n}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=Je(t,e.close,e.open),e=e.parent;let c=t.indexOf(`
`);return c!==-1&&(t=et(t,n,o,c)),o+t+n};Object.defineProperties(pe.prototype,ce);var zt=pe(),Fr=pe({level:rt?rt.level:0});var xe=zt;var Ue=ie("@yarnpkg/core"),Tt=ye(St()),se="root",G="catalog:",V=class extends Error{constructor(e,o){super(e);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},Ke=class{constructor(){this.configCache=new Map}getInheritanceChain(t){let e=t.split("/"),o=[];for(let n=0;n<e.length;n++)o.push(e.slice(0,n+1).join("/"));return o}resolveInheritedRange(t,e,o){let n=this.getInheritanceChain(e);for(let u=n.length-1;u>=0;u--){let g=n[u],p=t.list?.[g];if(p&&typeof p=="object"){let b=p[o];if(b)return b}}if(t.list&&typeof t.list=="object"){let u=t.list[o];if(typeof u=="string")return u}let c=t.list?.[se];if(c&&typeof c=="object"){let u=c[o];if(u)return u}return null}validateInheritanceStructure(t){if(!t.list)return!0;let e=Object.keys(t.list);for(let o of e)if(typeof t.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let c=0;c<n.length-1;c++){let u=n[c];if(!e.includes(u)&&u!==se)return!1}}return!0}async readConfiguration(t){let o=t.cwd,n=this.configCache.get(o);if(n)return n;let c=t.configuration.get("catalogs")||{},u=c;if(c.list?u.list=Object.entries(c.list).reduce((g,[p,b])=>(typeof b=="string"?g[se]={...g[se]||{},[p]:b}:g[p]=b,g),{}):u.list={},!this.isValidConfiguration(u))throw new V("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'warn' | 'strict' }, list: { [alias: string]: { [packageName: string]: string } } }",V.INVALID_FORMAT);if(!this.validateInheritanceStructure(u))throw new V("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",V.INVALID_ALIAS);return this.configCache.set(o,u),u}async getRange(t,e,o){let n=await this.readConfiguration(t),c=e.length===0?se:e,u=this.resolveInheritedRange(n,c,o);if(u)return/^[^:]+:/.test(u)?u:`${t.configuration.get("defaultProtocol")}${u}`;let g=n.list?.[c];if(!g||typeof g=="string")throw new V(`Alias "${c}" not found in .yarnrc.yml catalogs.`,V.INVALID_ALIAS);let p=g[o];if(!p)throw new V(`Package "${o}" not found in alias "${c}"`,V.INVALID_ALIAS);return/^[^:]+:/.test(p)?p:`${t.configuration.get("defaultProtocol")}${p}`}async getDefaultAliasGroups(t){let e=await this.readConfiguration(t.project);if(e.options){if(await this.shouldIgnoreWorkspace(t))return[];if(e.options.default){if(Array.isArray(e.options.default))return e.options.default;if(e.options.default==="max"){let o=Object.keys(e.list||{}),n=[...t.manifest.dependencies,...t.manifest.devDependencies],c=Object.fromEntries(o.map(g=>[g,0]));for(let[g,p]of n)if(p.range.startsWith(G)){let b=p.range.substring(G.length);c[b]=(c[b]||0)+1}let u=Math.max(...Object.values(c));return Object.keys(c).filter(g=>c[g]===u)}}}return[]}async findDependency(t,e){let o=Ue.structUtils.stringifyIdent(e),n=await this.readConfiguration(t),c=[],u=Object.entries(n.list||{}).filter(([g,p])=>typeof p=="string"?o===p:Object.keys(p).includes(o));c.push(...u.map(([g,p])=>{let b=typeof p=="string"?p:p[o];return[g,b]}));for(let[g]of Object.entries(n.list||{})){if(c.some(([b])=>b===g))continue;let p=this.resolveInheritedRange(n,g,o);p&&c.push([g,p])}return c}clearCache(t){this.configCache.delete(t)}async shouldIgnoreWorkspace(t){if(!t.manifest.name)return!1;let e=await this.readConfiguration(t.project);return e.options?.ignoredWorkspaces?(0,Tt.isMatch)(Ue.structUtils.stringifyIdent(t.manifest.name),e.options.ignoredWorkspaces):!1}async getValidationLevel(t){let e=await this.readConfiguration(t.project);return e.options?.validation?e.options.validation:"warn"}isValidConfiguration(t){if(!t||typeof t!="object"||!("list"in t)||!t.list||typeof t.list!="object")return!1;for(let[e,o]of Object.entries(t.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in t&&t.options&&typeof t.options=="object"){if("ignoredWorkspaces"in t.options&&t.options.ignoredWorkspaces&&(!Array.isArray(t.options.ignoredWorkspaces)||t.options.ignoredWorkspaces.length===0))return!1;if("default"in t.options&&t.options.default){if(Array.isArray(t.options.default)){if(t.options.default.length===0)return!1;let e=Object.keys(t.list||{});for(let o of t.options.default)if(o!=="root"&&!e.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),c=!0;for(let u of n)if(u!=="root"&&!e.includes(u)){c=!1;break}if(!c)return!1}else return!1}else if(typeof t.options.default!="string"||t.options.default!=="max")return!1}if("validation"in t.options&&(typeof t.options.validation!="string"||!["warn","strict"].includes(t.options.validation)))return!1}return!0}},X=new Ke;var ve=ie("@yarnpkg/core");var $e=class{supportsDescriptor(t,e){return t.range.startsWith(G)}supportsLocator(t,e){return t.reference.startsWith(G)}shouldPersistResolution(t,e){return!1}bindDescriptor(t,e,o){return t}getResolutionDependencies(t,e){return{}}async getCandidates(t,e,o){let n=t.range.slice(G.length),c=await X.getRange(o.project,n,ve.structUtils.stringifyIdent(t));return o.resolver.getCandidates({...t,range:c},e,o)}async getSatisfying(t,e,o,n){let c=t.range.slice(G.length),u=await X.getRange(n.project,c,ve.structUtils.stringifyIdent(t));return n.resolver.getSatisfying({...t,range:u},e,o,n)}async resolve(t,e){let o=t.reference.slice(G.length),n=await X.getRange(e.project,o,ve.structUtils.stringifyIdent(t));return e.resolver.resolve({...t,reference:n},e)}};var Lr={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:$t.SettingsType.ANY,default:{}}},resolvers:[$e],hooks:{afterWorkspaceDependencyAddition:async(r,t,e)=>{vt(r,e)},afterWorkspaceDependencyReplacement:async(r,t,e,o)=>{vt(r,o)},beforeWorkspacePacking:async(r,t)=>{if(await X.shouldIgnoreWorkspace(r))return;let e=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of e){let n=t[o];if(!(!n||typeof n!="object"))for(let[c,u]of Object.entries(n)){let g=u;if(g.startsWith(G))try{let p=g.slice(G.length),b=await X.getRange(r.project,p,c);n[c]=b}catch(p){throw p instanceof V?new Error(`Failed to resolve catalog dependency ${c}@${g} during packaging: ${p.message}`):p}}}}}};async function vt(r,t){if(t.range.startsWith(G)){if(await X.shouldIgnoreWorkspace(r))throw new Error(xe.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await X.shouldIgnoreWorkspace(r))return;let e=await X.findDependency(r.project,t);if(e.length===0)return;let o=await X.getDefaultAliasGroups(r);if(o.length>0){for(let p of o)if(e.some(([b])=>b===p)){t.range=`${G}${p}`;return}}let n=e.map(([p])=>p===se?"":p),c=n.filter(p=>p!=="").length>0?` (${n.join(", ")})`:"",u=await X.getValidationLevel(r),g=`\u27A4 ${t.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${t.name}@${G}${n[0]}' instead.`;if(u==="strict")throw new Error(xe.red(g));u==="warn"&&console.warn(xe.yellow(g))}var Ir=Lr;return Dt(Hr);})();
return plugin;
}
};
