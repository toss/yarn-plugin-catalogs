/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var kt=Object.create;var ye=Object.defineProperty;var Ht=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Dt=Object.getPrototypeOf,Gt=Object.prototype.hasOwnProperty;var ae=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,e)=>(typeof require<"u"?require:r)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ue=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Pt=(t,r)=>{for(var e in r)ye(t,e,{get:r[e],enumerable:!0})},qe=(t,r,e,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Nt(r))!Gt.call(t,n)&&n!==e&&ye(t,n,{get:()=>r[n],enumerable:!(o=Ht(r,n))||o.enumerable});return t};var _e=(t,r,e)=>(e=t!=null?kt(Dt(t)):{},qe(r||!t||!t.__esModule?ye(e,"default",{value:t,enumerable:!0}):e,t)),Mt=t=>qe(ye({},"__esModule",{value:!0}),t);var de=ue((Kr,ct)=>{"use strict";var z="\\\\/",it=`[^${z}]`,re="\\.",er="\\+",tr="\\?",ve="\\/",rr="(?=.)",at="[^/]",De=`(?:${ve}|$)`,ut=`(?:^|${ve})`,Ge=`${re}{1,2}${De}`,or=`(?!${re})`,nr=`(?!${ut}${Ge})`,sr=`(?!${re}{0,1}${De})`,ir=`(?!${Ge})`,ar=`[^.${ve}]`,ur=`${at}*?`,lr="/",lt={DOT_LITERAL:re,PLUS_LITERAL:er,QMARK_LITERAL:tr,SLASH_LITERAL:ve,ONE_CHAR:rr,QMARK:at,END_ANCHOR:De,DOTS_SLASH:Ge,NO_DOT:or,NO_DOTS:nr,NO_DOT_SLASH:sr,NO_DOTS_SLASH:ir,QMARK_NO_DOT:ar,STAR:ur,START_ANCHOR:ut,SEP:lr},cr={...lt,SLASH_LITERAL:`[${z}]`,QMARK:it,STAR:`${it}*?`,DOTS_SLASH:`${re}{1,2}(?:[${z}]|$)`,NO_DOT:`(?!${re})`,NO_DOTS:`(?!(?:^|[${z}])${re}{1,2}(?:[${z}]|$))`,NO_DOT_SLASH:`(?!${re}{0,1}(?:[${z}]|$))`,NO_DOTS_SLASH:`(?!${re}{1,2}(?:[${z}]|$))`,QMARK_NO_DOT:`[^.${z}]`,START_ANCHOR:`(?:^|[${z}])`,END_ANCHOR:`(?:[${z}]|$)`,SEP:"\\"},fr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ct.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:fr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?cr:lt}}});var Ae=ue(j=>{"use strict";var{REGEX_BACKSLASH:pr,REGEX_REMOVE_BACKSLASH:gr,REGEX_SPECIAL_CHARS:hr,REGEX_SPECIAL_CHARS_GLOBAL:dr}=de();j.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);j.hasRegexChars=t=>hr.test(t);j.isRegexChar=t=>t.length===1&&j.hasRegexChars(t);j.escapeRegex=t=>t.replace(dr,"\\$1");j.toPosixSlashes=t=>t.replace(pr,"/");j.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let t=navigator.platform.toLowerCase();return t==="win32"||t==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};j.removeBackslashes=t=>t.replace(gr,r=>r==="\\"?"":r);j.escapeLast=(t,r,e)=>{let o=t.lastIndexOf(r,e);return o===-1?t:t[o-1]==="\\"?j.escapeLast(t,r,o-1):`${t.slice(0,o)}\\${t.slice(o)}`};j.removePrefix=(t,r={})=>{let e=t;return e.startsWith("./")&&(e=e.slice(2),r.prefix="./"),e};j.wrapOutput=(t,r={},e={})=>{let o=e.contains?"":"^",n=e.contains?"":"$",a=`${o}(?:${t})${n}`;return r.negated===!0&&(a=`(?:^(?!${a}).*$)`),a};j.basename=(t,{windows:r}={})=>{let e=t.split(r?/[\\/]/:"/"),o=e[e.length-1];return o===""?e[e.length-2]:o}});var bt=ue((qr,Rt)=>{"use strict";var ft=Ae(),{CHAR_ASTERISK:Pe,CHAR_AT:Ar,CHAR_BACKWARD_SLASH:Re,CHAR_COMMA:Rr,CHAR_DOT:Me,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:At,CHAR_LEFT_CURLY_BRACE:je,CHAR_LEFT_PARENTHESES:Fe,CHAR_LEFT_SQUARE_BRACKET:br,CHAR_PLUS:Cr,CHAR_QUESTION_MARK:pt,CHAR_RIGHT_CURLY_BRACE:mr,CHAR_RIGHT_PARENTHESES:gt,CHAR_RIGHT_SQUARE_BRACKET:yr}=de(),ht=t=>t===At||t===Re,dt=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},_r=(t,r)=>{let e=r||{},o=t.length-1,n=e.parts===!0||e.scanToEnd===!0,a=[],u=[],f=[],g=t,h=-1,C=0,$=0,I=!1,W=!1,m=!1,H=!1,ne=!1,Q=!1,_=!1,Z=!1,se=!1,D=!1,N=0,U,d,R={value:"",depth:0,isGlob:!1},l=()=>h>=o,M=()=>g.charCodeAt(h+1),w=()=>(U=d,g.charCodeAt(++h));for(;h<o;){d=w();let y;if(d===Re){_=R.backslashes=!0,d=w(),d===je&&(Q=!0);continue}if(Q===!0||d===je){for(N++;l()!==!0&&(d=w());){if(d===Re){_=R.backslashes=!0,w();continue}if(d===je){N++;continue}if(Q!==!0&&d===Me&&(d=w())===Me){if(I=R.isBrace=!0,m=R.isGlob=!0,D=!0,n===!0)continue;break}if(Q!==!0&&d===Rr){if(I=R.isBrace=!0,m=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===mr&&(N--,N===0)){Q=!1,I=R.isBrace=!0,D=!0;break}}if(n===!0)continue;break}if(d===At){if(a.push(h),u.push(R),R={value:"",depth:0,isGlob:!1},D===!0)continue;if(U===Me&&h===C+1){C+=2;continue}$=h+1;continue}if(e.noext!==!0&&(d===Cr||d===Ar||d===Pe||d===pt||d===Be)===!0&&M()===Fe){if(m=R.isGlob=!0,H=R.isExtglob=!0,D=!0,d===Be&&h===C&&(se=!0),n===!0){for(;l()!==!0&&(d=w());){if(d===Re){_=R.backslashes=!0,d=w();continue}if(d===gt){m=R.isGlob=!0,D=!0;break}}continue}break}if(d===Pe){if(U===Pe&&(ne=R.isGlobstar=!0),m=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===pt){if(m=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===br){for(;l()!==!0&&(y=w());){if(y===Re){_=R.backslashes=!0,w();continue}if(y===yr){W=R.isBracket=!0,m=R.isGlob=!0,D=!0;break}}if(n===!0)continue;break}if(e.nonegate!==!0&&d===Be&&h===C){Z=R.negated=!0,C++;continue}if(e.noparen!==!0&&d===Fe){if(m=R.isGlob=!0,n===!0){for(;l()!==!0&&(d=w());){if(d===Fe){_=R.backslashes=!0,d=w();continue}if(d===gt){D=!0;break}}continue}break}if(m===!0){if(D=!0,n===!0)continue;break}}e.noext===!0&&(H=!1,m=!1);let T=g,s="",i="";C>0&&(s=g.slice(0,C),g=g.slice(C),$-=C),T&&m===!0&&$>0?(T=g.slice(0,$),i=g.slice($)):m===!0?(T="",i=g):T=g,T&&T!==""&&T!=="/"&&T!==g&&ht(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),e.unescape===!0&&(i&&(i=ft.removeBackslashes(i)),T&&_===!0&&(T=ft.removeBackslashes(T)));let V={prefix:s,input:t,start:C,base:T,glob:i,isBrace:I,isBracket:W,isGlob:m,isExtglob:H,isGlobstar:ne,negated:Z,negatedExtglob:se};if(e.tokens===!0&&(V.maxDepth=0,ht(d)||u.push(R),V.tokens=u),e.parts===!0||e.tokens===!0){let y;for(let x=0;x<a.length;x++){let te=y?y+1:C,K=a[x],oe=t.slice(te,K);e.tokens&&(x===0&&C!==0?(u[x].isPrefix=!0,u[x].value=s):u[x].value=oe,dt(u[x]),V.maxDepth+=u[x].depth),(x!==0||oe!=="")&&f.push(oe),y=K}if(y&&y+1<t.length){let x=t.slice(y+1);f.push(x),e.tokens&&(u[u.length-1].value=x,dt(u[u.length-1]),V.maxDepth+=u[u.length-1].depth)}V.slashes=a,V.parts=f}return V};Rt.exports=_r});var yt=ue((Yr,mt)=>{"use strict";var Se=de(),J=Ae(),{MAX_LENGTH:Te,POSIX_REGEX_SOURCE:Er,REGEX_NON_SPECIAL_CHARS:Or,REGEX_SPECIAL_CHARS_BACKREF:xr,REPLACEMENTS:Ct}=Se,vr=(t,r)=>{if(typeof r.expandRange=="function")return r.expandRange(...t,r);t.sort();let e=`[${t.join("-")}]`;try{new RegExp(e)}catch{return t.map(n=>J.escapeRegex(n)).join("..")}return e},pe=(t,r)=>`Missing ${t}: "${r}" - use "\\\\${r}" to match literal characters`,We=(t,r)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Ct[t]||t;let e={...r},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let a={type:"bos",value:"",output:e.prepend||""},u=[a],f=e.capture?"":"?:",g=Se.globChars(e.windows),h=Se.extglobChars(g),{DOT_LITERAL:C,PLUS_LITERAL:$,SLASH_LITERAL:I,ONE_CHAR:W,DOTS_SLASH:m,NO_DOT:H,NO_DOT_SLASH:ne,NO_DOTS_SLASH:Q,QMARK:_,QMARK_NO_DOT:Z,STAR:se,START_ANCHOR:D}=g,N=p=>`(${f}(?:(?!${D}${p.dot?m:C}).)*?)`,U=e.dot?"":H,d=e.dot?_:Z,R=e.bash===!0?N(e):se;e.capture&&(R=`(${R})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let l={input:t,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};t=J.removePrefix(t,l),n=t.length;let M=[],w=[],T=[],s=a,i,V=()=>l.index===n-1,y=l.peek=(p=1)=>t[l.index+p],x=l.advance=()=>t[++l.index]||"",te=()=>t.slice(l.index+1),K=(p="",E=0)=>{l.consumed+=p,l.index+=E},oe=p=>{l.output+=p.output!=null?p.output:p.value,K(p.value)},It=()=>{let p=1;for(;y()==="!"&&(y(2)!=="("||y(3)==="?");)x(),l.start++,p++;return p%2===0?!1:(l.negated=!0,l.start++,!0)},be=p=>{l[p]++,T.push(p)},ie=p=>{l[p]--,T.pop()},b=p=>{if(s.type==="globstar"){let E=l.braces>0&&(p.type==="comma"||p.type==="brace"),c=p.extglob===!0||M.length&&(p.type==="pipe"||p.type==="paren");p.type!=="slash"&&p.type!=="paren"&&!E&&!c&&(l.output=l.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,l.output+=s.output)}if(M.length&&p.type!=="paren"&&(M[M.length-1].inner+=p.value),(p.value||p.output)&&oe(p),s&&s.type==="text"&&p.type==="text"){s.output=(s.output||s.value)+p.value,s.value+=p.value;return}p.prev=s,u.push(p),s=p},Ce=(p,E)=>{let c={...h[E],conditions:1,inner:""};c.prev=s,c.parens=l.parens,c.output=l.output;let A=(e.capture?"(":"")+c.open;be("parens"),b({type:p,value:E,output:l.output?"":W}),b({type:"paren",extglob:!0,value:x(),output:A}),M.push(c)},wt=p=>{let E=p.close+(e.capture?")":""),c;if(p.type==="negate"){let A=R;if(p.inner&&p.inner.length>1&&p.inner.includes("/")&&(A=N(e)),(A!==R||V()||/^\)+$/.test(te()))&&(E=p.close=`)$))${A}`),p.inner.includes("*")&&(c=te())&&/^\.[^\\/.]+$/.test(c)){let v=We(c,{...r,fastpaths:!1}).output;E=p.close=`)${v})${A})`}p.prev.type==="bos"&&(l.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:i,output:E}),ie("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let p=!1,E=t.replace(xr,(c,A,v,G,k,Ie)=>G==="\\"?(p=!0,c):G==="?"?A?A+G+(k?_.repeat(k.length):""):Ie===0?d+(k?_.repeat(k.length):""):_.repeat(v.length):G==="."?C.repeat(v.length):G==="*"?A?A+G+(k?R:""):R:A?c:`\\${c}`);return p===!0&&(e.unescape===!0?E=E.replace(/\\/g,""):E=E.replace(/\\+/g,c=>c.length%2===0?"\\\\":c?"\\":"")),E===t&&e.contains===!0?(l.output=t,l):(l.output=J.wrapOutput(E,l,r),l)}for(;!V();){if(i=x(),i==="\0")continue;if(i==="\\"){let c=y();if(c==="/"&&e.bash!==!0||c==="."||c===";")continue;if(!c){i+="\\",b({type:"text",value:i});continue}let A=/^\\+/.exec(te()),v=0;if(A&&A[0].length>2&&(v=A[0].length,l.index+=v,v%2!==0&&(i+="\\")),e.unescape===!0?i=x():i+=x(),l.brackets===0){b({type:"text",value:i});continue}}if(l.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(e.posix!==!1&&i===":"){let c=s.value.slice(1);if(c.includes("[")&&(s.posix=!0,c.includes(":"))){let A=s.value.lastIndexOf("["),v=s.value.slice(0,A),G=s.value.slice(A+2),k=Er[G];if(k){s.value=v+k,l.backtrack=!0,x(),!a.output&&u.indexOf(s)===1&&(a.output=W);continue}}}(i==="["&&y()!==":"||i==="-"&&y()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),e.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,oe({value:i});continue}if(l.quotes===1&&i!=='"'){i=J.escapeRegex(i),s.value+=i,oe({value:i});continue}if(i==='"'){l.quotes=l.quotes===1?0:1,e.keepQuotes===!0&&b({type:"text",value:i});continue}if(i==="("){be("parens"),b({type:"paren",value:i});continue}if(i===")"){if(l.parens===0&&e.strictBrackets===!0)throw new SyntaxError(pe("opening","("));let c=M[M.length-1];if(c&&l.parens===c.parens+1){wt(M.pop());continue}b({type:"paren",value:i,output:l.parens?")":"\\)"}),ie("parens");continue}if(i==="["){if(e.nobracket===!0||!te().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(pe("closing","]"));i=`\\${i}`}else be("brackets");b({type:"bracket",value:i});continue}if(i==="]"){if(e.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:i,output:`\\${i}`});continue}if(l.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(pe("opening","["));b({type:"text",value:i,output:`\\${i}`});continue}ie("brackets");let c=s.value.slice(1);if(s.posix!==!0&&c[0]==="^"&&!c.includes("/")&&(i=`/${i}`),s.value+=i,oe({value:i}),e.literalBrackets===!1||J.hasRegexChars(c))continue;let A=J.escapeRegex(s.value);if(l.output=l.output.slice(0,-s.value.length),e.literalBrackets===!0){l.output+=A,s.value=A;continue}s.value=`(${f}${A}|${s.value})`,l.output+=s.value;continue}if(i==="{"&&e.nobrace!==!0){be("braces");let c={type:"brace",value:i,output:"(",outputIndex:l.output.length,tokensIndex:l.tokens.length};w.push(c),b(c);continue}if(i==="}"){let c=w[w.length-1];if(e.nobrace===!0||!c){b({type:"text",value:i,output:i});continue}let A=")";if(c.dots===!0){let v=u.slice(),G=[];for(let k=v.length-1;k>=0&&(u.pop(),v[k].type!=="brace");k--)v[k].type!=="dots"&&G.unshift(v[k].value);A=vr(G,e),l.backtrack=!0}if(c.comma!==!0&&c.dots!==!0){let v=l.output.slice(0,c.outputIndex),G=l.tokens.slice(c.tokensIndex);c.value=c.output="\\{",i=A="\\}",l.output=v;for(let k of G)l.output+=k.output||k.value}b({type:"brace",value:i,output:A}),ie("braces"),w.pop();continue}if(i==="|"){M.length>0&&M[M.length-1].conditions++,b({type:"text",value:i});continue}if(i===","){let c=i,A=w[w.length-1];A&&T[T.length-1]==="braces"&&(A.comma=!0,c="|"),b({type:"comma",value:i,output:c});continue}if(i==="/"){if(s.type==="dot"&&l.index===l.start+1){l.start=l.index+1,l.consumed="",l.output="",u.pop(),s=a;continue}b({type:"slash",value:i,output:I});continue}if(i==="."){if(l.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let c=w[w.length-1];s.type="dots",s.output+=i,s.value+=i,c.dots=!0;continue}if(l.braces+l.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:i,output:C});continue}b({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&e.noextglob!==!0&&y()==="("&&y(2)!=="?"){Ce("qmark",i);continue}if(s&&s.type==="paren"){let A=y(),v=i;(s.value==="("&&!/[!=<:]/.test(A)||A==="<"&&!/<([!=]|\w+>)/.test(te()))&&(v=`\\${i}`),b({type:"text",value:i,output:v});continue}if(e.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:i,output:Z});continue}b({type:"qmark",value:i,output:_});continue}if(i==="!"){if(e.noextglob!==!0&&y()==="("&&(y(2)!=="?"||!/[!=<:]/.test(y(3)))){Ce("negate",i);continue}if(e.nonegate!==!0&&l.index===0){It();continue}}if(i==="+"){if(e.noextglob!==!0&&y()==="("&&y(2)!=="?"){Ce("plus",i);continue}if(s&&s.value==="("||e.regex===!1){b({type:"plus",value:i,output:$});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||l.parens>0){b({type:"plus",value:i});continue}b({type:"plus",value:$});continue}if(i==="@"){if(e.noextglob!==!0&&y()==="("&&y(2)!=="?"){b({type:"at",extglob:!0,value:i,output:""});continue}b({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let c=Or.exec(te());c&&(i+=c[0],l.index+=c[0].length),b({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=R,l.backtrack=!0,l.globstar=!0,K(i);continue}let p=te();if(e.noextglob!==!0&&/^\([^?]/.test(p)){Ce("star",i);continue}if(s.type==="star"){if(e.noglobstar===!0){K(i);continue}let c=s.prev,A=c.prev,v=c.type==="slash"||c.type==="bos",G=A&&(A.type==="star"||A.type==="globstar");if(e.bash===!0&&(!v||p[0]&&p[0]!=="/")){b({type:"star",value:i,output:""});continue}let k=l.braces>0&&(c.type==="comma"||c.type==="brace"),Ie=M.length&&(c.type==="pipe"||c.type==="paren");if(!v&&c.type!=="paren"&&!k&&!Ie){b({type:"star",value:i,output:""});continue}for(;p.slice(0,3)==="/**";){let me=t[l.index+4];if(me&&me!=="/")break;p=p.slice(3),K("/**",3)}if(c.type==="bos"&&V()){s.type="globstar",s.value+=i,s.output=N(e),l.output=s.output,l.globstar=!0,K(i);continue}if(c.type==="slash"&&c.prev.type!=="bos"&&!G&&V()){l.output=l.output.slice(0,-(c.output+s.output).length),c.output=`(?:${c.output}`,s.type="globstar",s.output=N(e)+(e.strictSlashes?")":"|$)"),s.value+=i,l.globstar=!0,l.output+=c.output+s.output,K(i);continue}if(c.type==="slash"&&c.prev.type!=="bos"&&p[0]==="/"){let me=p[1]!==void 0?"|$":"";l.output=l.output.slice(0,-(c.output+s.output).length),c.output=`(?:${c.output}`,s.type="globstar",s.output=`${N(e)}${I}|${I}${me})`,s.value+=i,l.output+=c.output+s.output,l.globstar=!0,K(i+x()),b({type:"slash",value:"/",output:""});continue}if(c.type==="bos"&&p[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${I}|${N(e)}${I})`,l.output=s.output,l.globstar=!0,K(i+x()),b({type:"slash",value:"/",output:""});continue}l.output=l.output.slice(0,-s.output.length),s.type="globstar",s.output=N(e),s.value+=i,l.output+=s.output,l.globstar=!0,K(i);continue}let E={type:"star",value:i,output:R};if(e.bash===!0){E.output=".*?",(s.type==="bos"||s.type==="slash")&&(E.output=U+E.output),b(E);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&e.regex===!0){E.output=i,b(E);continue}(l.index===l.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(l.output+=ne,s.output+=ne):e.dot===!0?(l.output+=Q,s.output+=Q):(l.output+=U,s.output+=U),y()!=="*"&&(l.output+=W,s.output+=W)),b(E)}for(;l.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(pe("closing","]"));l.output=J.escapeLast(l.output,"["),ie("brackets")}for(;l.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(pe("closing",")"));l.output=J.escapeLast(l.output,"("),ie("parens")}for(;l.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(pe("closing","}"));l.output=J.escapeLast(l.output,"{"),ie("braces")}if(e.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${I}?`}),l.backtrack===!0){l.output="";for(let p of l.tokens)l.output+=p.output!=null?p.output:p.value,p.suffix&&(l.output+=p.suffix)}return l};We.fastpaths=(t,r)=>{let e={...r},o=typeof e.maxLength=="number"?Math.min(Te,e.maxLength):Te,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);t=Ct[t]||t;let{DOT_LITERAL:a,SLASH_LITERAL:u,ONE_CHAR:f,DOTS_SLASH:g,NO_DOT:h,NO_DOTS:C,NO_DOTS_SLASH:$,STAR:I,START_ANCHOR:W}=Se.globChars(e.windows),m=e.dot?C:h,H=e.dot?$:h,ne=e.capture?"":"?:",Q={negated:!1,prefix:""},_=e.bash===!0?".*?":I;e.capture&&(_=`(${_})`);let Z=U=>U.noglobstar===!0?_:`(${ne}(?:(?!${W}${U.dot?g:a}).)*?)`,se=U=>{switch(U){case"*":return`${m}${f}${_}`;case".*":return`${a}${f}${_}`;case"*.*":return`${m}${_}${a}${f}${_}`;case"*/*":return`${m}${_}${u}${f}${H}${_}`;case"**":return m+Z(e);case"**/*":return`(?:${m}${Z(e)}${u})?${H}${f}${_}`;case"**/*.*":return`(?:${m}${Z(e)}${u})?${H}${_}${a}${f}${_}`;case"**/.*":return`(?:${m}${Z(e)}${u})?${a}${f}${_}`;default:{let d=/^(.*?)\.(\w+)$/.exec(U);if(!d)return;let R=se(d[1]);return R?R+a+d[2]:void 0}}},D=J.removePrefix(t,Q),N=se(D);return N&&e.strictSlashes!==!0&&(N+=`${u}?`),N};mt.exports=We});var Ot=ue((Qr,Et)=>{"use strict";var Sr=bt(),Ue=yt(),_t=Ae(),Tr=de(),Lr=t=>t&&typeof t=="object"&&!Array.isArray(t),L=(t,r,e=!1)=>{if(Array.isArray(t)){let C=t.map(I=>L(I,r,e));return I=>{for(let W of C){let m=W(I);if(m)return m}return!1}}let o=Lr(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=r||{},a=n.windows,u=o?L.compileRe(t,r):L.makeRe(t,r,!1,!0),f=u.state;delete u.state;let g=()=>!1;if(n.ignore){let C={...r,ignore:null,onMatch:null,onResult:null};g=L(n.ignore,C,e)}let h=(C,$=!1)=>{let{isMatch:I,match:W,output:m}=L.test(C,u,r,{glob:t,posix:a}),H={glob:t,state:f,regex:u,posix:a,input:C,output:m,match:W,isMatch:I};return typeof n.onResult=="function"&&n.onResult(H),I===!1?(H.isMatch=!1,$?H:!1):g(C)?(typeof n.onIgnore=="function"&&n.onIgnore(H),H.isMatch=!1,$?H:!1):(typeof n.onMatch=="function"&&n.onMatch(H),$?H:!0)};return e&&(h.state=f),h};L.test=(t,r,e,{glob:o,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let a=e||{},u=a.format||(n?_t.toPosixSlashes:null),f=t===o,g=f&&u?u(t):t;return f===!1&&(g=u?u(t):t,f=g===o),(f===!1||a.capture===!0)&&(a.matchBase===!0||a.basename===!0?f=L.matchBase(t,r,e,n):f=r.exec(g)),{isMatch:!!f,match:f,output:g}};L.matchBase=(t,r,e)=>(r instanceof RegExp?r:L.makeRe(r,e)).test(_t.basename(t));L.isMatch=(t,r,e)=>L(r,e)(t);L.parse=(t,r)=>Array.isArray(t)?t.map(e=>L.parse(e,r)):Ue(t,{...r,fastpaths:!1});L.scan=(t,r)=>Sr(t,r);L.compileRe=(t,r,e=!1,o=!1)=>{if(e===!0)return t.output;let n=r||{},a=n.contains?"":"^",u=n.contains?"":"$",f=`${a}(?:${t.output})${u}`;t&&t.negated===!0&&(f=`^(?!${f}).*$`);let g=L.toRegex(f,r);return o===!0&&(g.state=t),g};L.makeRe=(t,r={},e=!1,o=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=Ue.fastpaths(t,r)),n.output||(n=Ue(t,r)),L.compileRe(n,r,e,o)};L.toRegex=(t,r)=>{try{let e=r||{};return new RegExp(t,e.flags||(e.nocase?"i":""))}catch(e){if(r&&r.debug===!0)throw e;return/$^/}};L.constants=Tr;Et.exports=L});var Tt=ue((Zr,St)=>{"use strict";var xt=Ot(),$r=Ae();function vt(t,r,e=!1){return r&&(r.windows===null||r.windows===void 0)&&(r={...r,windows:$r.isWindows()}),xt(t,r,e)}Object.assign(vt,xt);St.exports=vt});var kr={};Pt(kr,{default:()=>wr});var F=ae("@yarnpkg/core");var Ye=(t=0)=>r=>`\x1B[${r+t}m`,Qe=(t=0)=>r=>`\x1B[${38+t};5;${r}m`,Ze=(t=0)=>(r,e,o)=>`\x1B[${38+t};2;${r};${e};${o}m`,O={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Nr=Object.keys(O.modifier),Bt=Object.keys(O.color),jt=Object.keys(O.bgColor),Dr=[...Bt,...jt];function Ft(){let t=new Map;for(let[r,e]of Object.entries(O)){for(let[o,n]of Object.entries(e))O[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[o]=O[o],t.set(n[0],n[1]);Object.defineProperty(O,r,{value:e,enumerable:!1})}return Object.defineProperty(O,"codes",{value:t,enumerable:!1}),O.color.close="\x1B[39m",O.bgColor.close="\x1B[49m",O.color.ansi=Ye(),O.color.ansi256=Qe(),O.color.ansi16m=Ze(),O.bgColor.ansi=Ye(10),O.bgColor.ansi256=Qe(10),O.bgColor.ansi16m=Ze(10),Object.defineProperties(O,{rgbToAnsi256:{value(r,e,o){return r===e&&e===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(e/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(r){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!e)return[0,0,0];let[o]=e;o.length===3&&(o=[...o].map(a=>a+a).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:r=>O.rgbToAnsi256(...O.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let e,o,n;if(r>=232)e=((r-232)*10+8)/255,o=e,n=e;else{r-=16;let f=r%36;e=Math.floor(r/36)/5,o=Math.floor(f/6)/5,n=f%6/5}let a=Math.max(e,o,n)*2;if(a===0)return 30;let u=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(e));return a===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(r,e,o)=>O.ansi256ToAnsi(O.rgbToAnsi256(r,e,o)),enumerable:!1},hexToAnsi:{value:r=>O.ansi256ToAnsi(O.hexToAnsi256(r)),enumerable:!1}}),O}var Wt=Ft(),Y=Wt;var Oe=_e(ae("process"),1),Je=_e(ae("os"),1),we=_e(ae("tty"),1);function X(t,r=globalThis.Deno?globalThis.Deno.args:Oe.default.argv){let e=t.startsWith("-")?"":t.length===1?"-":"--",o=r.indexOf(e+t),n=r.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:S}=Oe.default,Ee;X("no-color")||X("no-colors")||X("color=false")||X("color=never")?Ee=0:(X("color")||X("colors")||X("color=true")||X("color=always"))&&(Ee=1);function Ut(){if("FORCE_COLOR"in S)return S.FORCE_COLOR==="true"?1:S.FORCE_COLOR==="false"?0:S.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(S.FORCE_COLOR,10),3)}function Vt(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Kt(t,{streamIsTTY:r,sniffFlags:e=!0}={}){let o=Ut();o!==void 0&&(Ee=o);let n=e?Ee:o;if(n===0)return 0;if(e){if(X("color=16m")||X("color=full")||X("color=truecolor"))return 3;if(X("color=256"))return 2}if("TF_BUILD"in S&&"AGENT_NAME"in S)return 1;if(t&&!r&&n===void 0)return 0;let a=n||0;if(S.TERM==="dumb")return a;if(Oe.default.platform==="win32"){let u=Je.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in S)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(u=>u in S)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(u=>u in S)||S.CI_NAME==="codeship"?1:a;if("TEAMCITY_VERSION"in S)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(S.TEAMCITY_VERSION)?1:0;if(S.COLORTERM==="truecolor"||S.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in S){let u=Number.parseInt((S.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(S.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(S.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(S.TERM)||"COLORTERM"in S?1:a}function ze(t,r={}){let e=Kt(t,{streamIsTTY:t&&t.isTTY,...r});return Vt(e)}var Xt={stdout:ze({isTTY:we.default.isatty(1)}),stderr:ze({isTTY:we.default.isatty(2)})},et=Xt;function tt(t,r,e){let o=t.indexOf(r);if(o===-1)return t;let n=r.length,a=0,u="";do u+=t.slice(a,o)+r+e,a=o+n,o=t.indexOf(r,a);while(o!==-1);return u+=t.slice(a),u}function rt(t,r,e,o){let n=0,a="";do{let u=t[o-1]==="\r";a+=t.slice(n,u?o-1:o)+r+(u?`\r
`:`
`)+e,n=o+1,o=t.indexOf(`
`,n)}while(o!==-1);return a+=t.slice(n),a}var{stdout:ot,stderr:nt}=et,ke=Symbol("GENERATOR"),le=Symbol("STYLER"),ge=Symbol("IS_EMPTY"),st=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null),qt=(t,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=ot?ot.level:0;t.level=r.level===void 0?e:r.level};var Yt=t=>{let r=(...e)=>e.join(" ");return qt(r,t),Object.setPrototypeOf(r,he.prototype),r};function he(t){return Yt(t)}Object.setPrototypeOf(he.prototype,Function.prototype);for(let[t,r]of Object.entries(Y))ce[t]={get(){let e=xe(this,Ne(r.open,r.close,this[le]),this[ge]);return Object.defineProperty(this,t,{value:e}),e}};ce.visible={get(){let t=xe(this,this[le],!0);return Object.defineProperty(this,"visible",{value:t}),t}};var He=(t,r,e,...o)=>t==="rgb"?r==="ansi16m"?Y[e].ansi16m(...o):r==="ansi256"?Y[e].ansi256(Y.rgbToAnsi256(...o)):Y[e].ansi(Y.rgbToAnsi(...o)):t==="hex"?He("rgb",r,e,...Y.hexToRgb(...o)):Y[e][t](...o),Qt=["rgb","hex","ansi256"];for(let t of Qt){ce[t]={get(){let{level:e}=this;return function(...o){let n=Ne(He(t,st[e],"color",...o),Y.color.close,this[le]);return xe(this,n,this[ge])}}};let r="bg"+t[0].toUpperCase()+t.slice(1);ce[r]={get(){let{level:e}=this;return function(...o){let n=Ne(He(t,st[e],"bgColor",...o),Y.bgColor.close,this[le]);return xe(this,n,this[ge])}}}}var Zt=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this[ke].level},set(t){this[ke].level=t}}}),Ne=(t,r,e)=>{let o,n;return e===void 0?(o=t,n=r):(o=e.openAll+t,n=r+e.closeAll),{open:t,close:r,openAll:o,closeAll:n,parent:e}},xe=(t,r,e)=>{let o=(...n)=>zt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Zt),o[ke]=t,o[le]=r,o[ge]=e,o},zt=(t,r)=>{if(t.level<=0||!r)return t[ge]?"":r;let e=t[le];if(e===void 0)return r;let{openAll:o,closeAll:n}=e;if(r.includes("\x1B"))for(;e!==void 0;)r=tt(r,e.close,e.open),e=e.parent;let a=r.indexOf(`
`);return a!==-1&&(r=rt(r,n,o,a)),o+r+n};Object.defineProperties(he.prototype,ce);var Jt=he(),Wr=he({level:nt?nt.level:0});var fe=Jt;var B=class extends Error{constructor(e,o){super(e);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}};var Ve=ae("@yarnpkg/core"),Lt=_e(Tt());var ee="root",P="catalog:";var Le=class{constructor(){this.configCache=new Map}getInheritanceChain(r){let e=r.split("/"),o=[];for(let n=0;n<e.length;n++)o.push(e.slice(0,n+1).join("/"));return o}resolveInheritedRange(r,e,o){let n=this.getInheritanceChain(e);for(let u=n.length-1;u>=0;u--){let f=n[u],g=r.list?.[f];if(g&&typeof g=="object"){let h=g[o];if(h)return h}}if(r.list&&typeof r.list=="object"){let u=r.list[o];if(typeof u=="string")return u}let a=r.list?.[ee];if(a&&typeof a=="object"){let u=a[o];if(u)return u}return null}validateInheritanceStructure(r){if(!r.list)return!0;let e=Object.keys(r.list);for(let o of e)if(typeof r.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let a=0;a<n.length-1;a++){let u=n[a];if(!e.includes(u)&&u!==ee)return!1}}return!0}async readConfiguration(r){let o=r.cwd,n=this.configCache.get(o);if(n)return n;let a=r.configuration.get("catalogs")||{},u=a;if(a.list?u.list=Object.entries(a.list).reduce((f,[g,h])=>(typeof h=="string"?f[ee]={...f[ee]||{},[g]:h}:f[g]=h,f),{}):u.list={},!this.isValidConfiguration(u))throw new B("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'off' | 'warn' | 'strict' | { [package: string]: 'off' | 'warn' | 'strict' } }, list: { [alias: string]: { [packageName: string]: string } } }",B.INVALID_FORMAT);if(!this.validateInheritanceStructure(u))throw new B("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",B.INVALID_ALIAS);return this.configCache.set(o,u),u}async getRange(r,e,o){let n=await this.readConfiguration(r),a=e.length===0?ee:e,u=this.resolveInheritedRange(n,a,o);if(u)return/^[^:]+:/.test(u)?u:`${r.configuration.get("defaultProtocol")}${u}`;let f=n.list?.[a];if(!f||typeof f=="string")throw new B(`Alias "${a}" not found in .yarnrc.yml catalogs.`,B.INVALID_ALIAS);let g=f[o];if(!g)throw new B(`Package "${o}" not found in alias "${a}"`,B.INVALID_ALIAS);return/^[^:]+:/.test(g)?g:`${r.configuration.get("defaultProtocol")}${g}`}async getDefaultAliasGroups(r){let e=await this.readConfiguration(r.project);if(e.options){if(await this.shouldIgnoreWorkspace(r))return[];if(e.options.default){if(Array.isArray(e.options.default))return e.options.default;if(e.options.default==="max"){let o=Object.keys(e.list||{}),n=[...r.manifest.dependencies,...r.manifest.devDependencies],a=Object.fromEntries(o.map(f=>[f,0]));for(let[f,g]of n)if(g.range.startsWith(P)){let h=g.range.substring(P.length);a[h]=(a[h]||0)+1}let u=Math.max(...Object.values(a));return Object.keys(a).filter(f=>a[f]===u)}}}return[]}async getGroupValidationLevel(r,e){let n=(await this.readConfiguration(r.project)).options?.validation||"warn";if(typeof n=="string")return n;let a=this.getInheritanceChain(e);for(let u=a.length-1;u>=0;u--){let f=a[u];if(n[f]!==void 0)return n[f]}return"warn"}async getValidationLevelForPackage(r,e){let o=(await this.findDependency(r.project,e)).map(({groupName:a})=>a);if(o.length===0)return"off";let n=[];for(let a of o){let u=await this.getGroupValidationLevel(r,a);n.push(u)}return n.includes("strict")?"strict":n.includes("warn")?"warn":"off"}async findDependency(r,e){let o=Ve.structUtils.stringifyIdent(e),n=await this.readConfiguration(r),a=[];for(let u of Object.keys(n.list||{})){let f=this.resolveInheritedRange(n,u,o);f&&a.push({groupName:u,version:f})}return a}clearCache(r){this.configCache.delete(r)}async shouldIgnoreWorkspace(r){if(!r.manifest.name)return!1;let e=await this.readConfiguration(r.project);return e.options?.ignoredWorkspaces?(0,Lt.isMatch)(Ve.structUtils.stringifyIdent(r.manifest.name),e.options.ignoredWorkspaces):!1}async getValidationLevel(r){let e=await this.readConfiguration(r.project);return e.options?.validation&&typeof e.options.validation=="string"?e.options.validation:"warn"}isValidConfiguration(r){if(!r||typeof r!="object"||!("list"in r)||!r.list||typeof r.list!="object")return!1;for(let[e,o]of Object.entries(r.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in r&&r.options&&typeof r.options=="object"){if("ignoredWorkspaces"in r.options&&r.options.ignoredWorkspaces&&(!Array.isArray(r.options.ignoredWorkspaces)||r.options.ignoredWorkspaces.length===0))return!1;if("default"in r.options&&r.options.default){if(Array.isArray(r.options.default)){if(r.options.default.length===0)return!1;let e=Object.keys(r.list||{});for(let o of r.options.default)if(o!=="root"&&!e.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),a=!0;for(let u of n)if(u!=="root"&&!e.includes(u)){a=!1;break}if(!a)return!1}else return!1}else if(typeof r.options.default!="string"||r.options.default!=="max")return!1}if("validation"in r.options){let e=r.options.validation;if(typeof e=="string"){if(!["warn","strict","off"].includes(e))return!1}else if(typeof e=="object"&&e!==null)for(let[o,n]of Object.entries(e)){if(typeof n!="string"||!["warn","strict","off"].includes(n))return!1;let a=Object.keys(r.list||{});if(!a.includes(o)&&o!==ee)if(o.includes("/")){let u=this.getInheritanceChain(o),f=!0;for(let g of u)if(g!==ee&&!a.includes(g)){f=!1;break}if(!f)return!1}else return!1}else return!1}}return!0}};var q=new Le;var Ke=ae("@yarnpkg/core");async function $e(t,r){if(r.range.startsWith(P)||await q.shouldIgnoreWorkspace(t))return null;let e=(await q.findDependency(t.project,r)).map(({groupName:n})=>n);return e.length===0?null:{validationLevel:await q.getValidationLevelForPackage(t,r),applicableGroups:e}}async function $t(t){let r=[...Object.entries(t.manifest.raw.dependencies??{}),...Object.entries(t.manifest.raw.devDependencies??{})].map(([o,n])=>{let a=Ke.structUtils.parseIdent(o);return Ke.structUtils.makeDescriptor(a,n)}),e=[];for(let o of r){let n=await $e(t,o);n&&n.validationLevel!=="off"&&e.push({descriptor:o,validationLevel:n.validationLevel,applicableGroups:n.applicableGroups})}return e}async function Xe(t,r){if(r.range.startsWith(P)){if(await q.shouldIgnoreWorkspace(t))throw new Error(fe.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}let e=await $e(t,r);if(!e)return;let{validationLevel:o,applicableGroups:n}=e,a=await q.getDefaultAliasGroups(t);if(a.length>0){for(let h of a)if(n.includes(h)){r.range=`${P}${h}`;return}}let u=n.map(h=>h===ee?"":h),f=u.filter(h=>h!=="").length>0?` (${u.join(", ")})`:"",g=`\u27A4 ${r.name} is listed in the catalogs config${f}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${r.name}@${P}${u[0]}' instead.`;if(o==="strict")throw new Error(fe.red(g));o==="warn"&&console.warn(fe.yellow(g))}var Ir={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:F.SettingsType.ANY,default:{}}},hooks:{validateWorkspace:async(t,r)=>{let e=await q.shouldIgnoreWorkspace(t);if(!e){let n=await $t(t);if(n.length>0){let a=n.filter(g=>g.validationLevel==="strict"),u=n.filter(g=>g.validationLevel==="warn"),f=g=>`The following dependencies are listed in the catalogs but not using the catalog protocol: ${g.map(C=>fe.yellow(F.structUtils.stringifyDescriptor(C.descriptor))).join(", ")}. Consider using the catalog protocol instead.`;a.length>0&&r.reportError(F.MessageName.INVALID_MANIFEST,f(a)),u.length>0&&r.reportWarning(F.MessageName.INVALID_MANIFEST,f(u))}}let o=[...Object.values(t.manifest.raw.dependencies||{}),...Object.values(t.manifest.raw.devDependencies||{})].some(n=>n.startsWith(P));e&&o&&r.reportError(F.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},reduceDependency:async(t,r,...e)=>{let o=t.range.startsWith(P),n=t.range.includes("catalog%3A")&&t.range.startsWith("patch:");if(!o&&!n)return t;try{let a="",u=t.range;if(o)a=t.range.slice(P.length);else if(n){let $=t.range.match(/catalog%3A([^#&]*)/);$&&(a=$[1]||"")}let f=F.structUtils.stringifyIdent(t),g=await q.getRange(r,a,f),h;if(o?h=F.structUtils.makeDescriptor(F.structUtils.makeIdent(t.scope,t.name),g):h=F.structUtils.makeDescriptor(F.structUtils.makeIdent(t.scope,t.name),u.replace(/catalog%3A[^#&]*/,g)),n)return h;let C=await r.configuration.reduceHook($=>$.reduceDependency,h,r,...e);return C!==h?C:h}catch(a){throw a instanceof B?new Error(`Failed to resolve ${F.structUtils.stringifyDescriptor(t)}: ${a.message}`):a}},afterWorkspaceDependencyAddition:async(t,r,e)=>{Xe(t,e)},afterWorkspaceDependencyReplacement:async(t,r,e,o)=>{Xe(t,o)},beforeWorkspacePacking:async(t,r)=>{if(await q.shouldIgnoreWorkspace(t))return;let e=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of e){let n=r[o];if(!(!n||typeof n!="object"))for(let[a,u]of Object.entries(n)){let f=u;if(f.startsWith(P))try{let g=f.slice(P.length),h=await q.getRange(t.project,g,a);n[a]=h}catch(g){throw g instanceof B?new Error(`Failed to resolve catalog dependency ${a}@${f} during packaging: ${g.message}`):g}}}}}},wr=Ir;return Mt(kr);})();
return plugin;
}
};
