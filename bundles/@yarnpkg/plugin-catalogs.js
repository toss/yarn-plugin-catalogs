/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Ge=Object.create;var _t=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var De=Object.getOwnPropertyNames;var je=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty;var U=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(o,t)=>(typeof require<"u"?require:o)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var it=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),We=(e,o)=>{for(var t in o)_t(e,t,{get:o[t],enumerable:!0})},Qt=(e,o,t,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of De(o))!Fe.call(e,n)&&n!==t&&_t(e,n,{get:()=>o[n],enumerable:!(r=Be(o,n))||r.enumerable});return e};var xt=(e,o,t)=>(t=e!=null?Ge(je(e)):{},Qt(o||!e||!e.__esModule?_t(t,"default",{value:e,enumerable:!0}):t,e)),Ue=e=>Qt(_t({},"__esModule",{value:!0}),e);var dt=it((tr,fe)=>{"use strict";var Q="\\\\/",ce=`[^${Q}]`,J="\\.",so="\\+",ao="\\?",Tt="\\/",io="(?=.)",ue="[^/]",Dt=`(?:${Tt}|$)`,le=`(?:^|${Tt})`,jt=`${J}{1,2}${Dt}`,co=`(?!${J})`,uo=`(?!${le}${jt})`,lo=`(?!${J}{0,1}${Dt})`,po=`(?!${jt})`,fo=`[^.${Tt}]`,go=`${ue}*?`,ho="/",pe={DOT_LITERAL:J,PLUS_LITERAL:so,QMARK_LITERAL:ao,SLASH_LITERAL:Tt,ONE_CHAR:io,QMARK:ue,END_ANCHOR:Dt,DOTS_SLASH:jt,NO_DOT:co,NO_DOTS:uo,NO_DOT_SLASH:lo,NO_DOTS_SLASH:po,QMARK_NO_DOT:fo,STAR:go,START_ANCHOR:le,SEP:ho},Ao={...pe,SLASH_LITERAL:`[${Q}]`,QMARK:ce,STAR:`${ce}*?`,DOTS_SLASH:`${J}{1,2}(?:[${Q}]|$)`,NO_DOT:`(?!${J})`,NO_DOTS:`(?!(?:^|[${Q}])${J}{1,2}(?:[${Q}]|$))`,NO_DOT_SLASH:`(?!${J}{0,1}(?:[${Q}]|$))`,NO_DOTS_SLASH:`(?!${J}{1,2}(?:[${Q}]|$))`,QMARK_NO_DOT:`[^.${Q}]`,START_ANCHOR:`(?:^|[${Q}])`,END_ANCHOR:`(?:[${Q}]|$)`,SEP:"\\"},mo={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};fe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:mo,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{__proto__:null,"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?Ao:pe}}});var At=it(D=>{"use strict";var{REGEX_BACKSLASH:Ro,REGEX_REMOVE_BACKSLASH:bo,REGEX_SPECIAL_CHARS:yo,REGEX_SPECIAL_CHARS_GLOBAL:Co}=dt();D.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);D.hasRegexChars=e=>yo.test(e);D.isRegexChar=e=>e.length===1&&D.hasRegexChars(e);D.escapeRegex=e=>e.replace(Co,"\\$1");D.toPosixSlashes=e=>e.replace(Ro,"/");D.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let e=navigator.platform.toLowerCase();return e==="win32"||e==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};D.removeBackslashes=e=>e.replace(bo,o=>o==="\\"?"":o);D.escapeLast=(e,o,t)=>{let r=e.lastIndexOf(o,t);return r===-1?e:e[r-1]==="\\"?D.escapeLast(e,o,r-1):`${e.slice(0,r)}\\${e.slice(r)}`};D.removePrefix=(e,o={})=>{let t=e;return t.startsWith("./")&&(t=t.slice(2),o.prefix="./"),t};D.wrapOutput=(e,o={},t={})=>{let r=t.contains?"":"^",n=t.contains?"":"$",u=`${r}(?:${e})${n}`;return o.negated===!0&&(u=`(?:^(?!${u}).*$)`),u};D.basename=(e,{windows:o}={})=>{let t=e.split(o?/[\\/]/:"/"),r=t[t.length-1];return r===""?t[t.length-2]:r}});var ye=it((or,be)=>{"use strict";var ge=At(),{CHAR_ASTERISK:Ft,CHAR_AT:Eo,CHAR_BACKWARD_SLASH:mt,CHAR_COMMA:_o,CHAR_DOT:Wt,CHAR_EXCLAMATION_MARK:Ut,CHAR_FORWARD_SLASH:Re,CHAR_LEFT_CURLY_BRACE:Kt,CHAR_LEFT_PARENTHESES:Vt,CHAR_LEFT_SQUARE_BRACKET:xo,CHAR_PLUS:Oo,CHAR_QUESTION_MARK:he,CHAR_RIGHT_CURLY_BRACE:So,CHAR_RIGHT_PARENTHESES:de,CHAR_RIGHT_SQUARE_BRACKET:vo}=dt(),Ae=e=>e===Re||e===mt,me=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},To=(e,o)=>{let t=o||{},r=e.length-1,n=t.parts===!0||t.scanToEnd===!0,u=[],c=[],f=[],g=e,d=-1,h=0,x=0,y=!1,I=!1,C=!1,S=!1,Y=!1,X=!1,_=!1,q=!1,nt=!1,M=!1,P=0,j,A,R={value:"",depth:0,isGlob:!1},i=()=>d>=r,B=()=>g.charCodeAt(d+1),N=()=>(j=A,g.charCodeAt(++d));for(;d<r;){A=N();let E;if(A===mt){_=R.backslashes=!0,A=N(),A===Kt&&(X=!0);continue}if(X===!0||A===Kt){for(P++;i()!==!0&&(A=N());){if(A===mt){_=R.backslashes=!0,N();continue}if(A===Kt){P++;continue}if(X!==!0&&A===Wt&&(A=N())===Wt){if(y=R.isBrace=!0,C=R.isGlob=!0,M=!0,n===!0)continue;break}if(X!==!0&&A===_o){if(y=R.isBrace=!0,C=R.isGlob=!0,M=!0,n===!0)continue;break}if(A===So&&(P--,P===0)){X=!1,y=R.isBrace=!0,M=!0;break}}if(n===!0)continue;break}if(A===Re){if(u.push(d),c.push(R),R={value:"",depth:0,isGlob:!1},M===!0)continue;if(j===Wt&&d===h+1){h+=2;continue}x=d+1;continue}if(t.noext!==!0&&(A===Oo||A===Eo||A===Ft||A===he||A===Ut)===!0&&B()===Vt){if(C=R.isGlob=!0,S=R.isExtglob=!0,M=!0,A===Ut&&d===h&&(nt=!0),n===!0){for(;i()!==!0&&(A=N());){if(A===mt){_=R.backslashes=!0,A=N();continue}if(A===de){C=R.isGlob=!0,M=!0;break}}continue}break}if(A===Ft){if(j===Ft&&(Y=R.isGlobstar=!0),C=R.isGlob=!0,M=!0,n===!0)continue;break}if(A===he){if(C=R.isGlob=!0,M=!0,n===!0)continue;break}if(A===xo){for(;i()!==!0&&(E=N());){if(E===mt){_=R.backslashes=!0,N();continue}if(E===vo){I=R.isBracket=!0,C=R.isGlob=!0,M=!0;break}}if(n===!0)continue;break}if(t.nonegate!==!0&&A===Ut&&d===h){q=R.negated=!0,h++;continue}if(t.noparen!==!0&&A===Vt){if(C=R.isGlob=!0,n===!0){for(;i()!==!0&&(A=N());){if(A===Vt){_=R.backslashes=!0,A=N();continue}if(A===de){M=!0;break}}continue}break}if(C===!0){if(M=!0,n===!0)continue;break}}t.noext===!0&&(S=!1,C=!1);let L=g,s="",a="";h>0&&(s=g.slice(0,h),g=g.slice(h),x-=h),L&&C===!0&&x>0?(L=g.slice(0,x),a=g.slice(x)):C===!0?(L="",a=g):L=g,L&&L!==""&&L!=="/"&&L!==g&&Ae(L.charCodeAt(L.length-1))&&(L=L.slice(0,-1)),t.unescape===!0&&(a&&(a=ge.removeBackslashes(a)),L&&_===!0&&(L=ge.removeBackslashes(L)));let F={prefix:s,input:e,start:h,base:L,glob:a,isBrace:y,isBracket:I,isGlob:C,isExtglob:S,isGlobstar:Y,negated:q,negatedExtglob:nt};if(t.tokens===!0&&(F.maxDepth=0,Ae(A)||c.push(R),F.tokens=c),t.parts===!0||t.tokens===!0){let E;for(let $=0;$<u.length;$++){let Z=E?E+1:h,W=u[$],et=e.slice(Z,W);t.tokens&&($===0&&h!==0?(c[$].isPrefix=!0,c[$].value=s):c[$].value=et,me(c[$]),F.maxDepth+=c[$].depth),($!==0||et!=="")&&f.push(et),E=W}if(E&&E+1<e.length){let $=e.slice(E+1);f.push($),t.tokens&&(c[c.length-1].value=$,me(c[c.length-1]),F.maxDepth+=c[c.length-1].depth)}F.slashes=u,F.parts=f}return F};be.exports=To});var _e=it((rr,Ee)=>{"use strict";var $t=dt(),z=At(),{MAX_LENGTH:wt,POSIX_REGEX_SOURCE:$o,REGEX_NON_SPECIAL_CHARS:wo,REGEX_SPECIAL_CHARS_BACKREF:Lo,REPLACEMENTS:Ce}=$t,Ho=(e,o)=>{if(typeof o.expandRange=="function")return o.expandRange(...e,o);e.sort();let t=`[${e.join("-")}]`;try{new RegExp(t)}catch{return e.map(n=>z.escapeRegex(n)).join("..")}return t},lt=(e,o)=>`Missing ${e}: "${o}" - use "\\\\${o}" to match literal characters`,Yt=(e,o)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Ce[e]||e;let t={...o},r=typeof t.maxLength=="number"?Math.min(wt,t.maxLength):wt,n=e.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);let u={type:"bos",value:"",output:t.prepend||""},c=[u],f=t.capture?"":"?:",g=$t.globChars(t.windows),d=$t.extglobChars(g),{DOT_LITERAL:h,PLUS_LITERAL:x,SLASH_LITERAL:y,ONE_CHAR:I,DOTS_SLASH:C,NO_DOT:S,NO_DOT_SLASH:Y,NO_DOTS_SLASH:X,QMARK:_,QMARK_NO_DOT:q,STAR:nt,START_ANCHOR:M}=g,P=p=>`(${f}(?:(?!${M}${p.dot?C:h}).)*?)`,j=t.dot?"":S,A=t.dot?_:q,R=t.bash===!0?P(t):nt;t.capture&&(R=`(${R})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let i={input:e,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:c};e=z.removePrefix(e,i),n=e.length;let B=[],N=[],L=[],s=u,a,F=()=>i.index===n-1,E=i.peek=(p=1)=>e[i.index+p],$=i.advance=()=>e[++i.index]||"",Z=()=>e.slice(i.index+1),W=(p="",O=0)=>{i.consumed+=p,i.index+=O},et=p=>{i.output+=p.output!=null?p.output:p.value,W(p.value)},Pe=()=>{let p=1;for(;E()==="!"&&(E(2)!=="("||E(3)==="?");)$(),i.start++,p++;return p%2===0?!1:(i.negated=!0,i.start++,!0)},yt=p=>{i[p]++,L.push(p)},st=p=>{i[p]--,L.pop()},b=p=>{if(s.type==="globstar"){let O=i.braces>0&&(p.type==="comma"||p.type==="brace"),l=p.extglob===!0||B.length&&(p.type==="pipe"||p.type==="paren");p.type!=="slash"&&p.type!=="paren"&&!O&&!l&&(i.output=i.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,i.output+=s.output)}if(B.length&&p.type!=="paren"&&(B[B.length-1].inner+=p.value),(p.value||p.output)&&et(p),s&&s.type==="text"&&p.type==="text"){s.output=(s.output||s.value)+p.value,s.value+=p.value;return}p.prev=s,c.push(p),s=p},Ct=(p,O)=>{let l={...d[O],conditions:1,inner:""};l.prev=s,l.parens=i.parens,l.output=i.output;let m=(t.capture?"(":"")+l.open;yt("parens"),b({type:p,value:O,output:i.output?"":I}),b({type:"paren",extglob:!0,value:$(),output:m}),B.push(l)},Me=p=>{let O=p.close+(t.capture?")":""),l;if(p.type==="negate"){let m=R;if(p.inner&&p.inner.length>1&&p.inner.includes("/")&&(m=P(t)),(m!==R||F()||/^\)+$/.test(Z()))&&(O=p.close=`)$))${m}`),p.inner.includes("*")&&(l=Z())&&/^\.[^\\/.]+$/.test(l)){let w=Yt(l,{...o,fastpaths:!1}).output;O=p.close=`)${w})${m})`}p.prev.type==="bos"&&(i.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:a,output:O}),st("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let p=!1,O=e.replace(Lo,(l,m,w,G,k,It)=>G==="\\"?(p=!0,l):G==="?"?m?m+G+(k?_.repeat(k.length):""):It===0?A+(k?_.repeat(k.length):""):_.repeat(w.length):G==="."?h.repeat(w.length):G==="*"?m?m+G+(k?R:""):R:m?l:`\\${l}`);return p===!0&&(t.unescape===!0?O=O.replace(/\\/g,""):O=O.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),O===e&&t.contains===!0?(i.output=e,i):(i.output=z.wrapOutput(O,i,o),i)}for(;!F();){if(a=$(),a==="\0")continue;if(a==="\\"){let l=E();if(l==="/"&&t.bash!==!0||l==="."||l===";")continue;if(!l){a+="\\",b({type:"text",value:a});continue}let m=/^\\+/.exec(Z()),w=0;if(m&&m[0].length>2&&(w=m[0].length,i.index+=w,w%2!==0&&(a+="\\")),t.unescape===!0?a=$():a+=$(),i.brackets===0){b({type:"text",value:a});continue}}if(i.brackets>0&&(a!=="]"||s.value==="["||s.value==="[^")){if(t.posix!==!1&&a===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let m=s.value.lastIndexOf("["),w=s.value.slice(0,m),G=s.value.slice(m+2),k=$o[G];if(k){s.value=w+k,i.backtrack=!0,$(),!u.output&&c.indexOf(s)===1&&(u.output=I);continue}}}(a==="["&&E()!==":"||a==="-"&&E()==="]")&&(a=`\\${a}`),a==="]"&&(s.value==="["||s.value==="[^")&&(a=`\\${a}`),t.posix===!0&&a==="!"&&s.value==="["&&(a="^"),s.value+=a,et({value:a});continue}if(i.quotes===1&&a!=='"'){a=z.escapeRegex(a),s.value+=a,et({value:a});continue}if(a==='"'){i.quotes=i.quotes===1?0:1,t.keepQuotes===!0&&b({type:"text",value:a});continue}if(a==="("){yt("parens"),b({type:"paren",value:a});continue}if(a===")"){if(i.parens===0&&t.strictBrackets===!0)throw new SyntaxError(lt("opening","("));let l=B[B.length-1];if(l&&i.parens===l.parens+1){Me(B.pop());continue}b({type:"paren",value:a,output:i.parens?")":"\\)"}),st("parens");continue}if(a==="["){if(t.nobracket===!0||!Z().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(lt("closing","]"));a=`\\${a}`}else yt("brackets");b({type:"bracket",value:a});continue}if(a==="]"){if(t.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:a,output:`\\${a}`});continue}if(i.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(lt("opening","["));b({type:"text",value:a,output:`\\${a}`});continue}st("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(a=`/${a}`),s.value+=a,et({value:a}),t.literalBrackets===!1||z.hasRegexChars(l))continue;let m=z.escapeRegex(s.value);if(i.output=i.output.slice(0,-s.value.length),t.literalBrackets===!0){i.output+=m,s.value=m;continue}s.value=`(${f}${m}|${s.value})`,i.output+=s.value;continue}if(a==="{"&&t.nobrace!==!0){yt("braces");let l={type:"brace",value:a,output:"(",outputIndex:i.output.length,tokensIndex:i.tokens.length};N.push(l),b(l);continue}if(a==="}"){let l=N[N.length-1];if(t.nobrace===!0||!l){b({type:"text",value:a,output:a});continue}let m=")";if(l.dots===!0){let w=c.slice(),G=[];for(let k=w.length-1;k>=0&&(c.pop(),w[k].type!=="brace");k--)w[k].type!=="dots"&&G.unshift(w[k].value);m=Ho(G,t),i.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let w=i.output.slice(0,l.outputIndex),G=i.tokens.slice(l.tokensIndex);l.value=l.output="\\{",a=m="\\}",i.output=w;for(let k of G)i.output+=k.output||k.value}b({type:"brace",value:a,output:m}),st("braces"),N.pop();continue}if(a==="|"){B.length>0&&B[B.length-1].conditions++,b({type:"text",value:a});continue}if(a===","){let l=a,m=N[N.length-1];m&&L[L.length-1]==="braces"&&(m.comma=!0,l="|"),b({type:"comma",value:a,output:l});continue}if(a==="/"){if(s.type==="dot"&&i.index===i.start+1){i.start=i.index+1,i.consumed="",i.output="",c.pop(),s=u;continue}b({type:"slash",value:a,output:y});continue}if(a==="."){if(i.braces>0&&s.type==="dot"){s.value==="."&&(s.output=h);let l=N[N.length-1];s.type="dots",s.output+=a,s.value+=a,l.dots=!0;continue}if(i.braces+i.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:a,output:h});continue}b({type:"dot",value:a,output:h});continue}if(a==="?"){if(!(s&&s.value==="(")&&t.noextglob!==!0&&E()==="("&&E(2)!=="?"){Ct("qmark",a);continue}if(s&&s.type==="paren"){let m=E(),w=a;(s.value==="("&&!/[!=<:]/.test(m)||m==="<"&&!/<([!=]|\w+>)/.test(Z()))&&(w=`\\${a}`),b({type:"text",value:a,output:w});continue}if(t.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:a,output:q});continue}b({type:"qmark",value:a,output:_});continue}if(a==="!"){if(t.noextglob!==!0&&E()==="("&&(E(2)!=="?"||!/[!=<:]/.test(E(3)))){Ct("negate",a);continue}if(t.nonegate!==!0&&i.index===0){Pe();continue}}if(a==="+"){if(t.noextglob!==!0&&E()==="("&&E(2)!=="?"){Ct("plus",a);continue}if(s&&s.value==="("||t.regex===!1){b({type:"plus",value:a,output:x});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||i.parens>0){b({type:"plus",value:a});continue}b({type:"plus",value:x});continue}if(a==="@"){if(t.noextglob!==!0&&E()==="("&&E(2)!=="?"){b({type:"at",extglob:!0,value:a,output:""});continue}b({type:"text",value:a});continue}if(a!=="*"){(a==="$"||a==="^")&&(a=`\\${a}`);let l=wo.exec(Z());l&&(a+=l[0],i.index+=l[0].length),b({type:"text",value:a});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=a,s.output=R,i.backtrack=!0,i.globstar=!0,W(a);continue}let p=Z();if(t.noextglob!==!0&&/^\([^?]/.test(p)){Ct("star",a);continue}if(s.type==="star"){if(t.noglobstar===!0){W(a);continue}let l=s.prev,m=l.prev,w=l.type==="slash"||l.type==="bos",G=m&&(m.type==="star"||m.type==="globstar");if(t.bash===!0&&(!w||p[0]&&p[0]!=="/")){b({type:"star",value:a,output:""});continue}let k=i.braces>0&&(l.type==="comma"||l.type==="brace"),It=B.length&&(l.type==="pipe"||l.type==="paren");if(!w&&l.type!=="paren"&&!k&&!It){b({type:"star",value:a,output:""});continue}for(;p.slice(0,3)==="/**";){let Et=e[i.index+4];if(Et&&Et!=="/")break;p=p.slice(3),W("/**",3)}if(l.type==="bos"&&F()){s.type="globstar",s.value+=a,s.output=P(t),i.output=s.output,i.globstar=!0,W(a);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!G&&F()){i.output=i.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=P(t)+(t.strictSlashes?")":"|$)"),s.value+=a,i.globstar=!0,i.output+=l.output+s.output,W(a);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&p[0]==="/"){let Et=p[1]!==void 0?"|$":"";i.output=i.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${P(t)}${y}|${y}${Et})`,s.value+=a,i.output+=l.output+s.output,i.globstar=!0,W(a+$()),b({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&p[0]==="/"){s.type="globstar",s.value+=a,s.output=`(?:^|${y}|${P(t)}${y})`,i.output=s.output,i.globstar=!0,W(a+$()),b({type:"slash",value:"/",output:""});continue}i.output=i.output.slice(0,-s.output.length),s.type="globstar",s.output=P(t),s.value+=a,i.output+=s.output,i.globstar=!0,W(a);continue}let O={type:"star",value:a,output:R};if(t.bash===!0){O.output=".*?",(s.type==="bos"||s.type==="slash")&&(O.output=j+O.output),b(O);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&t.regex===!0){O.output=a,b(O);continue}(i.index===i.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(i.output+=Y,s.output+=Y):t.dot===!0?(i.output+=X,s.output+=X):(i.output+=j,s.output+=j),E()!=="*"&&(i.output+=I,s.output+=I)),b(O)}for(;i.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(lt("closing","]"));i.output=z.escapeLast(i.output,"["),st("brackets")}for(;i.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(lt("closing",")"));i.output=z.escapeLast(i.output,"("),st("parens")}for(;i.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(lt("closing","}"));i.output=z.escapeLast(i.output,"{"),st("braces")}if(t.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${y}?`}),i.backtrack===!0){i.output="";for(let p of i.tokens)i.output+=p.output!=null?p.output:p.value,p.suffix&&(i.output+=p.suffix)}return i};Yt.fastpaths=(e,o)=>{let t={...o},r=typeof t.maxLength=="number"?Math.min(wt,t.maxLength):wt,n=e.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);e=Ce[e]||e;let{DOT_LITERAL:u,SLASH_LITERAL:c,ONE_CHAR:f,DOTS_SLASH:g,NO_DOT:d,NO_DOTS:h,NO_DOTS_SLASH:x,STAR:y,START_ANCHOR:I}=$t.globChars(t.windows),C=t.dot?h:d,S=t.dot?x:d,Y=t.capture?"":"?:",X={negated:!1,prefix:""},_=t.bash===!0?".*?":y;t.capture&&(_=`(${_})`);let q=j=>j.noglobstar===!0?_:`(${Y}(?:(?!${I}${j.dot?g:u}).)*?)`,nt=j=>{switch(j){case"*":return`${C}${f}${_}`;case".*":return`${u}${f}${_}`;case"*.*":return`${C}${_}${u}${f}${_}`;case"*/*":return`${C}${_}${c}${f}${S}${_}`;case"**":return C+q(t);case"**/*":return`(?:${C}${q(t)}${c})?${S}${f}${_}`;case"**/*.*":return`(?:${C}${q(t)}${c})?${S}${_}${u}${f}${_}`;case"**/.*":return`(?:${C}${q(t)}${c})?${u}${f}${_}`;default:{let A=/^(.*?)\.(\w+)$/.exec(j);if(!A)return;let R=nt(A[1]);return R?R+u+A[2]:void 0}}},M=z.removePrefix(e,X),P=nt(M);return P&&t.strictSlashes!==!0&&(P+=`${c}?`),P};Ee.exports=Yt});var Se=it((nr,Oe)=>{"use strict";var No=ye(),Xt=_e(),xe=At(),ko=dt(),Io=e=>e&&typeof e=="object"&&!Array.isArray(e),H=(e,o,t=!1)=>{if(Array.isArray(e)){let h=e.map(y=>H(y,o,t));return y=>{for(let I of h){let C=I(y);if(C)return C}return!1}}let r=Io(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");let n=o||{},u=n.windows,c=r?H.compileRe(e,o):H.makeRe(e,o,!1,!0),f=c.state;delete c.state;let g=()=>!1;if(n.ignore){let h={...o,ignore:null,onMatch:null,onResult:null};g=H(n.ignore,h,t)}let d=(h,x=!1)=>{let{isMatch:y,match:I,output:C}=H.test(h,c,o,{glob:e,posix:u}),S={glob:e,state:f,regex:c,posix:u,input:h,output:C,match:I,isMatch:y};return typeof n.onResult=="function"&&n.onResult(S),y===!1?(S.isMatch=!1,x?S:!1):g(h)?(typeof n.onIgnore=="function"&&n.onIgnore(S),S.isMatch=!1,x?S:!1):(typeof n.onMatch=="function"&&n.onMatch(S),x?S:!0)};return t&&(d.state=f),d};H.test=(e,o,t,{glob:r,posix:n}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let u=t||{},c=u.format||(n?xe.toPosixSlashes:null),f=e===r,g=f&&c?c(e):e;return f===!1&&(g=c?c(e):e,f=g===r),(f===!1||u.capture===!0)&&(u.matchBase===!0||u.basename===!0?f=H.matchBase(e,o,t,n):f=o.exec(g)),{isMatch:!!f,match:f,output:g}};H.matchBase=(e,o,t)=>(o instanceof RegExp?o:H.makeRe(o,t)).test(xe.basename(e));H.isMatch=(e,o,t)=>H(o,t)(e);H.parse=(e,o)=>Array.isArray(e)?e.map(t=>H.parse(t,o)):Xt(e,{...o,fastpaths:!1});H.scan=(e,o)=>No(e,o);H.compileRe=(e,o,t=!1,r=!1)=>{if(t===!0)return e.output;let n=o||{},u=n.contains?"":"^",c=n.contains?"":"$",f=`${u}(?:${e.output})${c}`;e&&e.negated===!0&&(f=`^(?!${f}).*$`);let g=H.toRegex(f,o);return r===!0&&(g.state=e),g};H.makeRe=(e,o={},t=!1,r=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return o.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(n.output=Xt.fastpaths(e,o)),n.output||(n=Xt(e,o)),H.compileRe(n,o,t,r)};H.toRegex=(e,o)=>{try{let t=o||{};return new RegExp(e,t.flags||(t.nocase?"i":""))}catch(t){if(o&&o.debug===!0)throw t;return/$^/}};H.constants=ko;Oe.exports=H});var we=it((sr,$e)=>{"use strict";var ve=Se(),Po=At();function Te(e,o,t=!1){return o&&(o.windows===null||o.windows===void 0)&&(o={...o,windows:Po.isWindows()}),ve(e,o,t)}Object.assign(Te,ve);$e.exports=Te});var Fo={};We(Fo,{default:()=>jo});var at=U("@yarnpkg/core");var zt=(e=0)=>o=>`\x1B[${o+e}m`,Zt=(e=0)=>o=>`\x1B[${38+e};5;${o}m`,Jt=(e=0)=>(o,t,r)=>`\x1B[${38+e};2;${o};${t};${r}m`,v={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Uo=Object.keys(v.modifier),Ke=Object.keys(v.color),Ve=Object.keys(v.bgColor),Ko=[...Ke,...Ve];function Ye(){let e=new Map;for(let[o,t]of Object.entries(v)){for(let[r,n]of Object.entries(t))v[r]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},t[r]=v[r],e.set(n[0],n[1]);Object.defineProperty(v,o,{value:t,enumerable:!1})}return Object.defineProperty(v,"codes",{value:e,enumerable:!1}),v.color.close="\x1B[39m",v.bgColor.close="\x1B[49m",v.color.ansi=zt(),v.color.ansi256=Zt(),v.color.ansi16m=Jt(),v.bgColor.ansi=zt(10),v.bgColor.ansi256=Zt(10),v.bgColor.ansi16m=Jt(10),Object.defineProperties(v,{rgbToAnsi256:{value(o,t,r){return o===t&&t===r?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(o){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(o.toString(16));if(!t)return[0,0,0];let[r]=t;r.length===3&&(r=[...r].map(u=>u+u).join(""));let n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:o=>v.rgbToAnsi256(...v.hexToRgb(o)),enumerable:!1},ansi256ToAnsi:{value(o){if(o<8)return 30+o;if(o<16)return 90+(o-8);let t,r,n;if(o>=232)t=((o-232)*10+8)/255,r=t,n=t;else{o-=16;let f=o%36;t=Math.floor(o/36)/5,r=Math.floor(f/6)/5,n=f%6/5}let u=Math.max(t,r,n)*2;if(u===0)return 30;let c=30+(Math.round(n)<<2|Math.round(r)<<1|Math.round(t));return u===2&&(c+=60),c},enumerable:!1},rgbToAnsi:{value:(o,t,r)=>v.ansi256ToAnsi(v.rgbToAnsi256(o,t,r)),enumerable:!1},hexToAnsi:{value:o=>v.ansi256ToAnsi(v.hexToAnsi256(o)),enumerable:!1}}),v}var Xe=Ye(),V=Xe;var St=xt(U("process"),1),ee=xt(U("os"),1),Pt=xt(U("tty"),1);function K(e,o=globalThis.Deno?globalThis.Deno.args:St.default.argv){let t=e.startsWith("-")?"":e.length===1?"-":"--",r=o.indexOf(t+e),n=o.indexOf("--");return r!==-1&&(n===-1||r<n)}var{env:T}=St.default,Ot;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?Ot=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(Ot=1);function qe(){if("FORCE_COLOR"in T)return T.FORCE_COLOR==="true"?1:T.FORCE_COLOR==="false"?0:T.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}function Qe(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function ze(e,{streamIsTTY:o,sniffFlags:t=!0}={}){let r=qe();r!==void 0&&(Ot=r);let n=t?Ot:r;if(n===0)return 0;if(t){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(e&&!o&&n===void 0)return 0;let u=n||0;if(T.TERM==="dumb")return u;if(St.default.platform==="win32"){let c=ee.default.release().split(".");return Number(c[0])>=10&&Number(c[2])>=10586?Number(c[2])>=14931?3:2:1}if("CI"in T)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(c=>c in T)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(c=>c in T)||T.CI_NAME==="codeship"?1:u;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor"||T.TERM==="xterm-kitty"||T.TERM==="xterm-ghostty"||T.TERM==="wezterm")return 3;if("TERM_PROGRAM"in T){let c=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return c>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:u}function te(e,o={}){let t=ze(e,{streamIsTTY:e&&e.isTTY,...o});return Qe(t)}var Ze={stdout:te({isTTY:Pt.default.isatty(1)}),stderr:te({isTTY:Pt.default.isatty(2)})},oe=Ze;function re(e,o,t){let r=e.indexOf(o);if(r===-1)return e;let n=o.length,u=0,c="";do c+=e.slice(u,r)+o+t,u=r+n,r=e.indexOf(o,u);while(r!==-1);return c+=e.slice(u),c}function ne(e,o,t,r){let n=0,u="";do{let c=e[r-1]==="\r";u+=e.slice(n,c?r-1:r)+o+(c?`\r
`:`
`)+t,n=r+1,r=e.indexOf(`
`,n)}while(r!==-1);return u+=e.slice(n),u}var{stdout:se,stderr:ae}=oe,Mt=Symbol("GENERATOR"),ct=Symbol("STYLER"),ft=Symbol("IS_EMPTY"),ie=["ansi","ansi","ansi256","ansi16m"],ut=Object.create(null),Je=(e,o={})=>{if(o.level&&!(Number.isInteger(o.level)&&o.level>=0&&o.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=se?se.level:0;e.level=o.level===void 0?t:o.level};var to=e=>{let o=(...t)=>t.join(" ");return Je(o,e),Object.setPrototypeOf(o,gt.prototype),o};function gt(e){return to(e)}Object.setPrototypeOf(gt.prototype,Function.prototype);for(let[e,o]of Object.entries(V))ut[e]={get(){let t=vt(this,Bt(o.open,o.close,this[ct]),this[ft]);return Object.defineProperty(this,e,{value:t}),t}};ut.visible={get(){let e=vt(this,this[ct],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var Gt=(e,o,t,...r)=>e==="rgb"?o==="ansi16m"?V[t].ansi16m(...r):o==="ansi256"?V[t].ansi256(V.rgbToAnsi256(...r)):V[t].ansi(V.rgbToAnsi(...r)):e==="hex"?Gt("rgb",o,t,...V.hexToRgb(...r)):V[t][e](...r),eo=["rgb","hex","ansi256"];for(let e of eo){ut[e]={get(){let{level:t}=this;return function(...r){let n=Bt(Gt(e,ie[t],"color",...r),V.color.close,this[ct]);return vt(this,n,this[ft])}}};let o="bg"+e[0].toUpperCase()+e.slice(1);ut[o]={get(){let{level:t}=this;return function(...r){let n=Bt(Gt(e,ie[t],"bgColor",...r),V.bgColor.close,this[ct]);return vt(this,n,this[ft])}}}}var oo=Object.defineProperties(()=>{},{...ut,level:{enumerable:!0,get(){return this[Mt].level},set(e){this[Mt].level=e}}}),Bt=(e,o,t)=>{let r,n;return t===void 0?(r=e,n=o):(r=t.openAll+e,n=o+t.closeAll),{open:e,close:o,openAll:r,closeAll:n,parent:t}},vt=(e,o,t)=>{let r=(...n)=>ro(r,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(r,oo),r[Mt]=e,r[ct]=o,r[ft]=t,r},ro=(e,o)=>{if(e.level<=0||!o)return e[ft]?"":o;let t=e[ct];if(t===void 0)return o;let{openAll:r,closeAll:n}=t;if(o.includes("\x1B"))for(;t!==void 0;)o=re(o,t.close,t.open),t=t.parent;let u=o.indexOf(`
`);return u!==-1&&(o=ne(o,n,r,u)),r+o+n};Object.defineProperties(gt.prototype,ut);var no=gt(),Zo=gt({level:ae?ae.level:0});var ht=no;var qt=U("@yarnpkg/core"),Rt=U("@yarnpkg/fslib"),Le=U("@yarnpkg/parsers"),He=xt(we()),bt="root",ot="catalog:",Lt=class{constructor(){this.configCache=new Map}async readConfiguration(o){let r=o.cwd,n=this.configCache.get(r);if(n)return n;let u=o.configuration.get("catalog"),c=o.configuration.get("catalogs"),f=Rt.ppath.join(o.cwd,"catalogs.yml"),g={};try{if(await Rt.xfs.existsPromise(f)){let h=await Rt.xfs.readFilePromise(f,"utf8");g=(0,Le.parseSyml)(h)?.options||{}}}catch{}let d={options:g,catalogs:{}};if(u instanceof Map&&u.size>0&&d.catalogs&&(d.catalogs[bt]=Object.fromEntries(u)),c instanceof Map&&c.size>0)for(let[h,x]of c.entries())x instanceof Map&&d.catalogs&&(d.catalogs[h]=Object.fromEntries(x));return this.configCache.set(r,d),d}async getRange(o,t,r){let n=await this.readConfiguration(o),u=t.length===0?bt:t,c=n.catalogs?.[u];if(c&&typeof c=="object"){let f=c[r];if(f)return f}return null}async getDefaultAliasGroups(o){let t=await this.readConfiguration(o.project);if(t.options){if(await this.shouldIgnoreWorkspace(o))return[];if(t.options.default){if(Array.isArray(t.options.default))return t.options.default;if(t.options.default==="max"){let r=Object.keys(t.catalogs||{}),n=[...o.manifest.dependencies,...o.manifest.devDependencies],u=Object.fromEntries(r.map(f=>[f,0]));for(let[f,g]of n)if(g.range.startsWith(ot)){let d=g.range.substring(ot.length);u[d]=(u[d]||0)+1}let c=Math.max(...Object.values(u));return Object.keys(u).filter(f=>u[f]===c)}}}return[]}async findAllAccessibleGroups(o,t){let r=await this.readConfiguration(o),n=[];for(let[u,c]of Object.entries(r.catalogs||{}))typeof c=="object"&&c[t]&&n.push(u);return n}async getGroupValidationLevel(o,t){let n=(await this.readConfiguration(o.project)).options?.validation||"warn";return typeof n=="string"?n:n[t]!==void 0?n[t]:"warn"}async getValidationLevelForPackage(o,t){let r=await this.findAllAccessibleGroups(o.project,t);if(r.length===0)return"off";let n=[];for(let u of r){let c=await this.getGroupValidationLevel(o,u);n.push(c)}return n.includes("strict")?"strict":n.includes("warn")?"warn":"off"}async findDependency(o,t){let r=qt.structUtils.stringifyIdent(t),n=await this.readConfiguration(o),u=[];for(let[c,f]of Object.entries(n.catalogs||{}))if(typeof f=="object"){let g=f[r];g&&u.push([c,g])}return u}clearCache(o){this.configCache.delete(o)}async shouldIgnoreWorkspace(o){if(!o.manifest.name)return!1;let t=await this.readConfiguration(o.project);return t.options?.ignoredWorkspaces?(0,He.isMatch)(qt.structUtils.stringifyIdent(o.manifest.name),t.options.ignoredWorkspaces):!1}async getValidationLevel(o){let t=await this.readConfiguration(o.project);return t.options?.validation&&typeof t.options.validation=="string"?t.options.validation:"warn"}};var ke=U("@yarnpkg/cli"),Nt=U("@yarnpkg/core"),tt=U("@yarnpkg/fslib"),pt=U("@yarnpkg/parsers"),kt=U("clipanion");function Mo(e){let o=e.split("/"),t=[];for(let r=0;r<o.length;r++)t.push(o.slice(0,r+1).join("/"));return t}function Go(e,o){let t=Mo(e);for(let n of t)if(!o[n])throw new Error(`Catalog group "${n}" not found in inheritance chain for "${e}"`);let r={};for(let n of t)Object.assign(r,o[n]);return r}function Ne(e){let o={};for(let t of Object.keys(e))o[t]=Go(t,e);return o}var Ht=class extends ke.BaseCommand{constructor(){super(...arguments);this.dryRun=kt.Option.Boolean("--dry-run",!1,{description:"Show what would be applied without writing"})}static{this.paths=[["catalogs","apply"]]}static{this.usage=kt.Command.Usage({description:"Apply catalog definitions from catalogs.yml to .yarnrc.yml",details:`
      This command reads catalog definitions from catalogs.yml (with inheritance support)
      and writes them to .yarnrc.yml, completely replacing existing catalog configurations.

      Inheritance is supported using the / delimiter (e.g., stable/canary inherits from stable).
      Child groups override parent package versions.
    `,examples:[["Apply catalogs from catalogs.yml","yarn catalogs apply"],["Preview changes without applying","yarn catalogs apply --dry-run"]]})}async execute(){let t=await Nt.Configuration.find(this.context.cwd,this.context.plugins),{project:r}=await Nt.Project.find(t,this.context.cwd),n=tt.ppath.join(r.cwd,"catalogs.yml");if(!await tt.xfs.existsPromise(n))return this.context.stdout.write(`Error: catalogs.yml not found in project root
`),1;let u=await tt.xfs.readFilePromise(n,"utf8"),c=(0,pt.parseSyml)(u);if(!c.list)return this.context.stdout.write(`Error: catalogs.yml must have a "list" field
`),1;let{root:f,...g}=c.list,d={};for(let[S,Y]of Object.entries(g))Y&&(d[S]=Y);let h={};try{h=Ne(d)}catch(S){return this.context.stdout.write(`Error: Failed to resolve inheritance: ${S.message}
`),1}let x=tt.ppath.join(r.cwd,".yarnrc.yml"),y={};if(await tt.xfs.existsPromise(x)){let S=await tt.xfs.readFilePromise(x,"utf8");y=(0,pt.parseSyml)(S)||{}}if(f&&Object.keys(f).length>0?y.catalog=f:delete y.catalog,Object.keys(h).length>0?y.catalogs=h:delete y.catalogs,this.dryRun)return this.context.stdout.write((0,pt.stringifySyml)(y)),0;await tt.xfs.writeFilePromise(x,(0,pt.stringifySyml)(y));let I=[];f&&Object.keys(f).length>0&&I.push("1 root catalog");let C=Object.keys(h).length;return C>0&&I.push(`${C} named catalog group${C>1?"s":""}`),I.length===0?this.context.stdout.write(`No catalogs to apply
`):this.context.stdout.write(`\u2713 Applied ${I.join(" and ")} to .yarnrc.yml
`),0}};var rt=new Lt,Bo={commands:[Ht],hooks:{validateWorkspace:async(e,o)=>{let t=await rt.shouldIgnoreWorkspace(e);if(!t){let n=await Do(e);if(n.length>0){let u=n.filter(g=>g.validationLevel==="strict"),c=n.filter(g=>g.validationLevel==="warn"),f=g=>`The following dependencies are listed in the catalogs but not using the catalog protocol: ${g.map(h=>ht.yellow(h.packageName)).join(", ")}. Consider using the catalog protocol instead.`;u.length>0&&o.reportError(at.MessageName.INVALID_MANIFEST,f(u)),c.length>0&&o.reportWarning(at.MessageName.INVALID_MANIFEST,f(c))}}let r=[...Object.values(e.manifest.raw.dependencies||{}),...Object.values(e.manifest.raw.devDependencies||{})].some(n=>n.startsWith(ot));t&&r&&o.reportError(at.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},afterWorkspaceDependencyAddition:async(e,o,t)=>{await Ie(e,o,t)},afterWorkspaceDependencyReplacement:async(e,o,t,r)=>{await Ie(e,o,r)}}};async function Do(e){let o=[...Object.entries(e.manifest.raw.dependencies||{}),...Object.entries(e.manifest.raw.devDependencies||{})],t=[];for(let[r,n]of o){if(n.startsWith(ot))continue;let c=await rt.findAllAccessibleGroups(e.project,r);if(c.length>0){let f=await rt.getValidationLevelForPackage(e,r);f!=="off"&&t.push({packageName:r,validationLevel:f,applicableGroups:c})}}return t}async function Ie(e,o,t){if(t.range.startsWith(ot)){if(await rt.shouldIgnoreWorkspace(e))throw new Error(ht.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await rt.shouldIgnoreWorkspace(e))return;let r=await rt.findDependency(e.project,t);if(r.length===0)return;let n=await rt.getDefaultAliasGroups(e);if(n.length>0){for(let d of n)if(r.some(([h])=>h===d)){let x=`${ot}${d===bt?"":d}`,y=e.manifest[o];y&&typeof y=="object"&&"set"in y&&y.set(t.identHash,at.structUtils.makeDescriptor(t,x));return}}let u=r.map(([d])=>d===bt?"":d),c=u.filter(d=>d!=="").length>0?` (${u.join(", ")})`:"",f=await rt.getValidationLevelForPackage(e,at.structUtils.stringifyIdent(t)),g=`\u27A4 ${t.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${t.name}@${ot}${u[0]}' instead.`;if(f==="strict")throw new Error(ht.red(g));f==="warn"&&console.warn(ht.yellow(g))}var jo=Bo;return Ue(Fo);})();
return plugin;
}
};
