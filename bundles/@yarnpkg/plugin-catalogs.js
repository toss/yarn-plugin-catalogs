/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Lt=Object.create;var ye=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var Ht=Object.getOwnPropertyNames;var kt=Object.getPrototypeOf,wt=Object.prototype.hasOwnProperty;var fe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ae=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Nt=(e,r)=>{for(var t in r)ye(e,t,{get:r[t],enumerable:!0})},Ve=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Ht(r))!wt.call(e,n)&&n!==t&&ye(e,n,{get:()=>r[n],enumerable:!(o=It(r,n))||o.enumerable});return e};var Ee=(e,r,t)=>(t=e!=null?Lt(kt(e)):{},Ve(r||!e||!e.__esModule?ye(t,"default",{value:e,enumerable:!0}):t,e)),Dt=e=>Ve(ye({},"__esModule",{value:!0}),e);var de=ae((Wr,at)=>{"use strict";var z="\\\\/",ot=`[^${z}]`,te="\\.",Zt="\\+",zt="\\?",Se="\\/",Jt="(?=.)",nt="[^/]",Ne=`(?:${Se}|$)`,st=`(?:^|${Se})`,De=`${te}{1,2}${Ne}`,er=`(?!${te})`,tr=`(?!${st}${De})`,rr=`(?!${te}{0,1}${Ne})`,or=`(?!${De})`,nr=`[^.${Se}]`,sr=`${nt}*?`,ir="/",it={DOT_LITERAL:te,PLUS_LITERAL:Zt,QMARK_LITERAL:zt,SLASH_LITERAL:Se,ONE_CHAR:Jt,QMARK:nt,END_ANCHOR:Ne,DOTS_SLASH:De,NO_DOT:er,NO_DOTS:tr,NO_DOT_SLASH:rr,NO_DOTS_SLASH:or,QMARK_NO_DOT:nr,STAR:sr,START_ANCHOR:st,SEP:ir},ar={...it,SLASH_LITERAL:`[${z}]`,QMARK:ot,STAR:`${ot}*?`,DOTS_SLASH:`${te}{1,2}(?:[${z}]|$)`,NO_DOT:`(?!${te})`,NO_DOTS:`(?!(?:^|[${z}])${te}{1,2}(?:[${z}]|$))`,NO_DOT_SLASH:`(?!${te}{0,1}(?:[${z}]|$))`,NO_DOTS_SLASH:`(?!${te}{1,2}(?:[${z}]|$))`,QMARK_NO_DOT:`[^.${z}]`,START_ANCHOR:`(?:^|[${z}])`,END_ANCHOR:`(?:[${z}]|$)`,SEP:"\\"},ur={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};at.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ur,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ar:it}}});var Ae=ae(B=>{"use strict";var{REGEX_BACKSLASH:cr,REGEX_REMOVE_BACKSLASH:lr,REGEX_SPECIAL_CHARS:fr,REGEX_SPECIAL_CHARS_GLOBAL:pr}=de();B.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);B.hasRegexChars=e=>fr.test(e);B.isRegexChar=e=>e.length===1&&B.hasRegexChars(e);B.escapeRegex=e=>e.replace(pr,"\\$1");B.toPosixSlashes=e=>e.replace(cr,"/");B.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let e=navigator.platform.toLowerCase();return e==="win32"||e==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};B.removeBackslashes=e=>e.replace(lr,r=>r==="\\"?"":r);B.escapeLast=(e,r,t)=>{let o=e.lastIndexOf(r,t);return o===-1?e:e[o-1]==="\\"?B.escapeLast(e,r,o-1):`${e.slice(0,o)}\\${e.slice(o)}`};B.removePrefix=(e,r={})=>{let t=e;return t.startsWith("./")&&(t=t.slice(2),r.prefix="./"),t};B.wrapOutput=(e,r={},t={})=>{let o=t.contains?"":"^",n=t.contains?"":"$",c=`${o}(?:${e})${n}`;return r.negated===!0&&(c=`(?:^(?!${c}).*$)`),c};B.basename=(e,{windows:r}={})=>{let t=e.split(r?/[\\/]/:"/"),o=t[t.length-1];return o===""?t[t.length-2]:o}});var dt=ae((Vr,ht)=>{"use strict";var ut=Ae(),{CHAR_ASTERISK:Me,CHAR_AT:gr,CHAR_BACKWARD_SLASH:Re,CHAR_COMMA:hr,CHAR_DOT:Pe,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:gt,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:je,CHAR_LEFT_SQUARE_BRACKET:dr,CHAR_PLUS:Ar,CHAR_QUESTION_MARK:ct,CHAR_RIGHT_CURLY_BRACE:Rr,CHAR_RIGHT_PARENTHESES:lt,CHAR_RIGHT_SQUARE_BRACKET:br}=de(),ft=e=>e===gt||e===Re,pt=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},Cr=(e,r)=>{let t=r||{},o=e.length-1,n=t.parts===!0||t.scanToEnd===!0,c=[],u=[],f=[],p=e,h=-1,C=0,L=0,I=!1,G=!1,_=!1,w=!1,oe=!1,Q=!1,E=!1,Z=!1,ne=!1,D=!1,N=0,j,d,R={value:"",depth:0,isGlob:!1},a=()=>h>=o,P=()=>p.charCodeAt(h+1),H=()=>(j=d,p.charCodeAt(++h));for(;h<o;){d=H();let y;if(d===Re){E=R.backslashes=!0,d=H(),d===Ge&&(Q=!0);continue}if(Q===!0||d===Ge){for(N++;a()!==!0&&(d=H());){if(d===Re){E=R.backslashes=!0,H();continue}if(d===Ge){N++;continue}if(Q!==!0&&d===Pe&&(d=H())===Pe){if(I=R.isBrace=!0,_=R.isGlob=!0,D=!0,n===!0)continue;break}if(Q!==!0&&d===hr){if(I=R.isBrace=!0,_=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===Rr&&(N--,N===0)){Q=!1,I=R.isBrace=!0,D=!0;break}}if(n===!0)continue;break}if(d===gt){if(c.push(h),u.push(R),R={value:"",depth:0,isGlob:!1},D===!0)continue;if(j===Pe&&h===C+1){C+=2;continue}L=h+1;continue}if(t.noext!==!0&&(d===Ar||d===gr||d===Me||d===ct||d===Be)===!0&&P()===je){if(_=R.isGlob=!0,w=R.isExtglob=!0,D=!0,d===Be&&h===C&&(ne=!0),n===!0){for(;a()!==!0&&(d=H());){if(d===Re){E=R.backslashes=!0,d=H();continue}if(d===lt){_=R.isGlob=!0,D=!0;break}}continue}break}if(d===Me){if(j===Me&&(oe=R.isGlobstar=!0),_=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===ct){if(_=R.isGlob=!0,D=!0,n===!0)continue;break}if(d===dr){for(;a()!==!0&&(y=H());){if(y===Re){E=R.backslashes=!0,H();continue}if(y===br){G=R.isBracket=!0,_=R.isGlob=!0,D=!0;break}}if(n===!0)continue;break}if(t.nonegate!==!0&&d===Be&&h===C){Z=R.negated=!0,C++;continue}if(t.noparen!==!0&&d===je){if(_=R.isGlob=!0,n===!0){for(;a()!==!0&&(d=H());){if(d===je){E=R.backslashes=!0,d=H();continue}if(d===lt){D=!0;break}}continue}break}if(_===!0){if(D=!0,n===!0)continue;break}}t.noext===!0&&(w=!1,_=!1);let $=p,s="",i="";C>0&&(s=p.slice(0,C),p=p.slice(C),L-=C),$&&_===!0&&L>0?($=p.slice(0,L),i=p.slice(L)):_===!0?($="",i=p):$=p,$&&$!==""&&$!=="/"&&$!==p&&ft($.charCodeAt($.length-1))&&($=$.slice(0,-1)),t.unescape===!0&&(i&&(i=ut.removeBackslashes(i)),$&&E===!0&&($=ut.removeBackslashes($)));let U={prefix:s,input:e,start:C,base:$,glob:i,isBrace:I,isBracket:G,isGlob:_,isExtglob:w,isGlobstar:oe,negated:Z,negatedExtglob:ne};if(t.tokens===!0&&(U.maxDepth=0,ft(d)||u.push(R),U.tokens=u),t.parts===!0||t.tokens===!0){let y;for(let O=0;O<c.length;O++){let ee=y?y+1:C,V=c[O],re=e.slice(ee,V);t.tokens&&(O===0&&C!==0?(u[O].isPrefix=!0,u[O].value=s):u[O].value=re,pt(u[O]),U.maxDepth+=u[O].depth),(O!==0||re!=="")&&f.push(re),y=V}if(y&&y+1<e.length){let O=e.slice(y+1);f.push(O),t.tokens&&(u[u.length-1].value=O,pt(u[u.length-1]),U.maxDepth+=u[u.length-1].depth)}U.slashes=c,U.parts=f}return U};ht.exports=Cr});var bt=ae((Kr,Rt)=>{"use strict";var Te=de(),J=Ae(),{MAX_LENGTH:$e,POSIX_REGEX_SOURCE:_r,REGEX_NON_SPECIAL_CHARS:yr,REGEX_SPECIAL_CHARS_BACKREF:Er,REPLACEMENTS:At}=Te,mr=(e,r)=>{if(typeof r.expandRange=="function")return r.expandRange(...e,r);e.sort();let t=`[${e.join("-")}]`;try{new RegExp(t)}catch{return e.map(n=>J.escapeRegex(n)).join("..")}return t},le=(e,r)=>`Missing ${e}: "${r}" - use "\\\\${r}" to match literal characters`,Fe=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=At[e]||e;let t={...r},o=typeof t.maxLength=="number"?Math.min($e,t.maxLength):$e,n=e.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let c={type:"bos",value:"",output:t.prepend||""},u=[c],f=t.capture?"":"?:",p=Te.globChars(t.windows),h=Te.extglobChars(p),{DOT_LITERAL:C,PLUS_LITERAL:L,SLASH_LITERAL:I,ONE_CHAR:G,DOTS_SLASH:_,NO_DOT:w,NO_DOT_SLASH:oe,NO_DOTS_SLASH:Q,QMARK:E,QMARK_NO_DOT:Z,STAR:ne,START_ANCHOR:D}=p,N=g=>`(${f}(?:(?!${D}${g.dot?_:C}).)*?)`,j=t.dot?"":w,d=t.dot?E:Z,R=t.bash===!0?N(t):ne;t.capture&&(R=`(${R})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let a={input:e,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};e=J.removePrefix(e,a),n=e.length;let P=[],H=[],$=[],s=c,i,U=()=>a.index===n-1,y=a.peek=(g=1)=>e[a.index+g],O=a.advance=()=>e[++a.index]||"",ee=()=>e.slice(a.index+1),V=(g="",m=0)=>{a.consumed+=g,a.index+=m},re=g=>{a.output+=g.output!=null?g.output:g.value,V(g.value)},$t=()=>{let g=1;for(;y()==="!"&&(y(2)!=="("||y(3)==="?");)O(),a.start++,g++;return g%2===0?!1:(a.negated=!0,a.start++,!0)},be=g=>{a[g]++,$.push(g)},se=g=>{a[g]--,$.pop()},b=g=>{if(s.type==="globstar"){let m=a.braces>0&&(g.type==="comma"||g.type==="brace"),l=g.extglob===!0||P.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!m&&!l&&(a.output=a.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,a.output+=s.output)}if(P.length&&g.type!=="paren"&&(P[P.length-1].inner+=g.value),(g.value||g.output)&&re(g),s&&s.type==="text"&&g.type==="text"){s.output=(s.output||s.value)+g.value,s.value+=g.value;return}g.prev=s,u.push(g),s=g},Ce=(g,m)=>{let l={...h[m],conditions:1,inner:""};l.prev=s,l.parens=a.parens,l.output=a.output;let A=(t.capture?"(":"")+l.open;be("parens"),b({type:g,value:m,output:a.output?"":G}),b({type:"paren",extglob:!0,value:O(),output:A}),P.push(l)},vt=g=>{let m=g.close+(t.capture?")":""),l;if(g.type==="negate"){let A=R;if(g.inner&&g.inner.length>1&&g.inner.includes("/")&&(A=N(t)),(A!==R||U()||/^\)+$/.test(ee()))&&(m=g.close=`)$))${A}`),g.inner.includes("*")&&(l=ee())&&/^\.[^\\/.]+$/.test(l)){let S=Fe(l,{...r,fastpaths:!1}).output;m=g.close=`)${S})${A})`}g.prev.type==="bos"&&(a.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:i,output:m}),se("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let g=!1,m=e.replace(Er,(l,A,S,M,k,Le)=>M==="\\"?(g=!0,l):M==="?"?A?A+M+(k?E.repeat(k.length):""):Le===0?d+(k?E.repeat(k.length):""):E.repeat(S.length):M==="."?C.repeat(S.length):M==="*"?A?A+M+(k?R:""):R:A?l:`\\${l}`);return g===!0&&(t.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===e&&t.contains===!0?(a.output=e,a):(a.output=J.wrapOutput(m,a,r),a)}for(;!U();){if(i=O(),i==="\0")continue;if(i==="\\"){let l=y();if(l==="/"&&t.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",b({type:"text",value:i});continue}let A=/^\\+/.exec(ee()),S=0;if(A&&A[0].length>2&&(S=A[0].length,a.index+=S,S%2!==0&&(i+="\\")),t.unescape===!0?i=O():i+=O(),a.brackets===0){b({type:"text",value:i});continue}}if(a.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(t.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let A=s.value.lastIndexOf("["),S=s.value.slice(0,A),M=s.value.slice(A+2),k=_r[M];if(k){s.value=S+k,a.backtrack=!0,O(),!c.output&&u.indexOf(s)===1&&(c.output=G);continue}}}(i==="["&&y()!==":"||i==="-"&&y()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),t.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,re({value:i});continue}if(a.quotes===1&&i!=='"'){i=J.escapeRegex(i),s.value+=i,re({value:i});continue}if(i==='"'){a.quotes=a.quotes===1?0:1,t.keepQuotes===!0&&b({type:"text",value:i});continue}if(i==="("){be("parens"),b({type:"paren",value:i});continue}if(i===")"){if(a.parens===0&&t.strictBrackets===!0)throw new SyntaxError(le("opening","("));let l=P[P.length-1];if(l&&a.parens===l.parens+1){vt(P.pop());continue}b({type:"paren",value:i,output:a.parens?")":"\\)"}),se("parens");continue}if(i==="["){if(t.nobracket===!0||!ee().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(le("closing","]"));i=`\\${i}`}else be("brackets");b({type:"bracket",value:i});continue}if(i==="]"){if(t.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:i,output:`\\${i}`});continue}if(a.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(le("opening","["));b({type:"text",value:i,output:`\\${i}`});continue}se("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,re({value:i}),t.literalBrackets===!1||J.hasRegexChars(l))continue;let A=J.escapeRegex(s.value);if(a.output=a.output.slice(0,-s.value.length),t.literalBrackets===!0){a.output+=A,s.value=A;continue}s.value=`(${f}${A}|${s.value})`,a.output+=s.value;continue}if(i==="{"&&t.nobrace!==!0){be("braces");let l={type:"brace",value:i,output:"(",outputIndex:a.output.length,tokensIndex:a.tokens.length};H.push(l),b(l);continue}if(i==="}"){let l=H[H.length-1];if(t.nobrace===!0||!l){b({type:"text",value:i,output:i});continue}let A=")";if(l.dots===!0){let S=u.slice(),M=[];for(let k=S.length-1;k>=0&&(u.pop(),S[k].type!=="brace");k--)S[k].type!=="dots"&&M.unshift(S[k].value);A=mr(M,t),a.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=a.output.slice(0,l.outputIndex),M=a.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=A="\\}",a.output=S;for(let k of M)a.output+=k.output||k.value}b({type:"brace",value:i,output:A}),se("braces"),H.pop();continue}if(i==="|"){P.length>0&&P[P.length-1].conditions++,b({type:"text",value:i});continue}if(i===","){let l=i,A=H[H.length-1];A&&$[$.length-1]==="braces"&&(A.comma=!0,l="|"),b({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&a.index===a.start+1){a.start=a.index+1,a.consumed="",a.output="",u.pop(),s=c;continue}b({type:"slash",value:i,output:I});continue}if(i==="."){if(a.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=H[H.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(a.braces+a.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:i,output:C});continue}b({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&t.noextglob!==!0&&y()==="("&&y(2)!=="?"){Ce("qmark",i);continue}if(s&&s.type==="paren"){let A=y(),S=i;(s.value==="("&&!/[!=<:]/.test(A)||A==="<"&&!/<([!=]|\w+>)/.test(ee()))&&(S=`\\${i}`),b({type:"text",value:i,output:S});continue}if(t.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:i,output:Z});continue}b({type:"qmark",value:i,output:E});continue}if(i==="!"){if(t.noextglob!==!0&&y()==="("&&(y(2)!=="?"||!/[!=<:]/.test(y(3)))){Ce("negate",i);continue}if(t.nonegate!==!0&&a.index===0){$t();continue}}if(i==="+"){if(t.noextglob!==!0&&y()==="("&&y(2)!=="?"){Ce("plus",i);continue}if(s&&s.value==="("||t.regex===!1){b({type:"plus",value:i,output:L});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||a.parens>0){b({type:"plus",value:i});continue}b({type:"plus",value:L});continue}if(i==="@"){if(t.noextglob!==!0&&y()==="("&&y(2)!=="?"){b({type:"at",extglob:!0,value:i,output:""});continue}b({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=yr.exec(ee());l&&(i+=l[0],a.index+=l[0].length),b({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=R,a.backtrack=!0,a.globstar=!0,V(i);continue}let g=ee();if(t.noextglob!==!0&&/^\([^?]/.test(g)){Ce("star",i);continue}if(s.type==="star"){if(t.noglobstar===!0){V(i);continue}let l=s.prev,A=l.prev,S=l.type==="slash"||l.type==="bos",M=A&&(A.type==="star"||A.type==="globstar");if(t.bash===!0&&(!S||g[0]&&g[0]!=="/")){b({type:"star",value:i,output:""});continue}let k=a.braces>0&&(l.type==="comma"||l.type==="brace"),Le=P.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!k&&!Le){b({type:"star",value:i,output:""});continue}for(;g.slice(0,3)==="/**";){let _e=e[a.index+4];if(_e&&_e!=="/")break;g=g.slice(3),V("/**",3)}if(l.type==="bos"&&U()){s.type="globstar",s.value+=i,s.output=N(t),a.output=s.output,a.globstar=!0,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!M&&U()){a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=N(t)+(t.strictSlashes?")":"|$)"),s.value+=i,a.globstar=!0,a.output+=l.output+s.output,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&g[0]==="/"){let _e=g[1]!==void 0?"|$":"";a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${N(t)}${I}|${I}${_e})`,s.value+=i,a.output+=l.output+s.output,a.globstar=!0,V(i+O()),b({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&g[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${I}|${N(t)}${I})`,a.output=s.output,a.globstar=!0,V(i+O()),b({type:"slash",value:"/",output:""});continue}a.output=a.output.slice(0,-s.output.length),s.type="globstar",s.output=N(t),s.value+=i,a.output+=s.output,a.globstar=!0,V(i);continue}let m={type:"star",value:i,output:R};if(t.bash===!0){m.output=".*?",(s.type==="bos"||s.type==="slash")&&(m.output=j+m.output),b(m);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&t.regex===!0){m.output=i,b(m);continue}(a.index===a.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(a.output+=oe,s.output+=oe):t.dot===!0?(a.output+=Q,s.output+=Q):(a.output+=j,s.output+=j),y()!=="*"&&(a.output+=G,s.output+=G)),b(m)}for(;a.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing","]"));a.output=J.escapeLast(a.output,"["),se("brackets")}for(;a.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing",")"));a.output=J.escapeLast(a.output,"("),se("parens")}for(;a.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing","}"));a.output=J.escapeLast(a.output,"{"),se("braces")}if(t.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${I}?`}),a.backtrack===!0){a.output="";for(let g of a.tokens)a.output+=g.output!=null?g.output:g.value,g.suffix&&(a.output+=g.suffix)}return a};Fe.fastpaths=(e,r)=>{let t={...r},o=typeof t.maxLength=="number"?Math.min($e,t.maxLength):$e,n=e.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);e=At[e]||e;let{DOT_LITERAL:c,SLASH_LITERAL:u,ONE_CHAR:f,DOTS_SLASH:p,NO_DOT:h,NO_DOTS:C,NO_DOTS_SLASH:L,STAR:I,START_ANCHOR:G}=Te.globChars(t.windows),_=t.dot?C:h,w=t.dot?L:h,oe=t.capture?"":"?:",Q={negated:!1,prefix:""},E=t.bash===!0?".*?":I;t.capture&&(E=`(${E})`);let Z=j=>j.noglobstar===!0?E:`(${oe}(?:(?!${G}${j.dot?p:c}).)*?)`,ne=j=>{switch(j){case"*":return`${_}${f}${E}`;case".*":return`${c}${f}${E}`;case"*.*":return`${_}${E}${c}${f}${E}`;case"*/*":return`${_}${E}${u}${f}${w}${E}`;case"**":return _+Z(t);case"**/*":return`(?:${_}${Z(t)}${u})?${w}${f}${E}`;case"**/*.*":return`(?:${_}${Z(t)}${u})?${w}${E}${c}${f}${E}`;case"**/.*":return`(?:${_}${Z(t)}${u})?${c}${f}${E}`;default:{let d=/^(.*?)\.(\w+)$/.exec(j);if(!d)return;let R=ne(d[1]);return R?R+c+d[2]:void 0}}},D=J.removePrefix(e,Q),N=ne(D);return N&&t.strictSlashes!==!0&&(N+=`${u}?`),N};Rt.exports=Fe});var yt=ae((Xr,_t)=>{"use strict";var xr=dt(),We=bt(),Ct=Ae(),Or=de(),Sr=e=>e&&typeof e=="object"&&!Array.isArray(e),v=(e,r,t=!1)=>{if(Array.isArray(e)){let C=e.map(I=>v(I,r,t));return I=>{for(let G of C){let _=G(I);if(_)return _}return!1}}let o=Sr(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=r||{},c=n.windows,u=o?v.compileRe(e,r):v.makeRe(e,r,!1,!0),f=u.state;delete u.state;let p=()=>!1;if(n.ignore){let C={...r,ignore:null,onMatch:null,onResult:null};p=v(n.ignore,C,t)}let h=(C,L=!1)=>{let{isMatch:I,match:G,output:_}=v.test(C,u,r,{glob:e,posix:c}),w={glob:e,state:f,regex:u,posix:c,input:C,output:_,match:G,isMatch:I};return typeof n.onResult=="function"&&n.onResult(w),I===!1?(w.isMatch=!1,L?w:!1):p(C)?(typeof n.onIgnore=="function"&&n.onIgnore(w),w.isMatch=!1,L?w:!1):(typeof n.onMatch=="function"&&n.onMatch(w),L?w:!0)};return t&&(h.state=f),h};v.test=(e,r,t,{glob:o,posix:n}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let c=t||{},u=c.format||(n?Ct.toPosixSlashes:null),f=e===o,p=f&&u?u(e):e;return f===!1&&(p=u?u(e):e,f=p===o),(f===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?f=v.matchBase(e,r,t,n):f=r.exec(p)),{isMatch:!!f,match:f,output:p}};v.matchBase=(e,r,t)=>(r instanceof RegExp?r:v.makeRe(r,t)).test(Ct.basename(e));v.isMatch=(e,r,t)=>v(r,t)(e);v.parse=(e,r)=>Array.isArray(e)?e.map(t=>v.parse(t,r)):We(e,{...r,fastpaths:!1});v.scan=(e,r)=>xr(e,r);v.compileRe=(e,r,t=!1,o=!1)=>{if(t===!0)return e.output;let n=r||{},c=n.contains?"":"^",u=n.contains?"":"$",f=`${c}(?:${e.output})${u}`;e&&e.negated===!0&&(f=`^(?!${f}).*$`);let p=v.toRegex(f,r);return o===!0&&(p.state=e),p};v.makeRe=(e,r={},t=!1,o=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(n.output=We.fastpaths(e,r)),n.output||(n=We(e,r)),v.compileRe(n,r,t,o)};v.toRegex=(e,r)=>{try{let t=r||{};return new RegExp(e,t.flags||(t.nocase?"i":""))}catch(t){if(r&&r.debug===!0)throw t;return/$^/}};v.constants=Or;_t.exports=v});var Ot=ae((qr,xt)=>{"use strict";var Et=yt(),Tr=Ae();function mt(e,r,t=!1){return r&&(r.windows===null||r.windows===void 0)&&(r={...r,windows:Tr.isWindows()}),Et(e,r,t)}Object.assign(mt,Et);xt.exports=mt});var Ir={};Nt(Ir,{default:()=>Lr});var W=fe("@yarnpkg/core");var Ke=(e=0)=>r=>`\x1B[${r+e}m`,Xe=(e=0)=>r=>`\x1B[${38+e};5;${r}m`,qe=(e=0)=>(r,t,o)=>`\x1B[${38+e};2;${r};${t};${o}m`,x={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},kr=Object.keys(x.modifier),Mt=Object.keys(x.color),Pt=Object.keys(x.bgColor),wr=[...Mt,...Pt];function Bt(){let e=new Map;for(let[r,t]of Object.entries(x)){for(let[o,n]of Object.entries(t))x[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},t[o]=x[o],e.set(n[0],n[1]);Object.defineProperty(x,r,{value:t,enumerable:!1})}return Object.defineProperty(x,"codes",{value:e,enumerable:!1}),x.color.close="\x1B[39m",x.bgColor.close="\x1B[49m",x.color.ansi=Ke(),x.color.ansi256=Xe(),x.color.ansi16m=qe(),x.bgColor.ansi=Ke(10),x.bgColor.ansi256=Xe(10),x.bgColor.ansi16m=qe(10),Object.defineProperties(x,{rgbToAnsi256:{value(r,t,o){return r===t&&t===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(r){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!t)return[0,0,0];let[o]=t;o.length===3&&(o=[...o].map(c=>c+c).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:r=>x.rgbToAnsi256(...x.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let t,o,n;if(r>=232)t=((r-232)*10+8)/255,o=t,n=t;else{r-=16;let f=r%36;t=Math.floor(r/36)/5,o=Math.floor(f/6)/5,n=f%6/5}let c=Math.max(t,o,n)*2;if(c===0)return 30;let u=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(t));return c===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(r,t,o)=>x.ansi256ToAnsi(x.rgbToAnsi256(r,t,o)),enumerable:!1},hexToAnsi:{value:r=>x.ansi256ToAnsi(x.hexToAnsi256(r)),enumerable:!1}}),x}var Gt=Bt(),q=Gt;var xe=Ee(fe("process"),1),Qe=Ee(fe("os"),1),Ie=Ee(fe("tty"),1);function K(e,r=globalThis.Deno?globalThis.Deno.args:xe.default.argv){let t=e.startsWith("-")?"":e.length===1?"-":"--",o=r.indexOf(t+e),n=r.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:T}=xe.default,me;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?me=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(me=1);function jt(){if("FORCE_COLOR"in T)return T.FORCE_COLOR==="true"?1:T.FORCE_COLOR==="false"?0:T.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}function Ft(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Wt(e,{streamIsTTY:r,sniffFlags:t=!0}={}){let o=jt();o!==void 0&&(me=o);let n=t?me:o;if(n===0)return 0;if(t){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(e&&!r&&n===void 0)return 0;let c=n||0;if(T.TERM==="dumb")return c;if(xe.default.platform==="win32"){let u=Qe.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in T)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(u=>u in T)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(u=>u in T)||T.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor"||T.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in T){let u=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:c}function Ye(e,r={}){let t=Wt(e,{streamIsTTY:e&&e.isTTY,...r});return Ft(t)}var Ut={stdout:Ye({isTTY:Ie.default.isatty(1)}),stderr:Ye({isTTY:Ie.default.isatty(2)})},Ze=Ut;function ze(e,r,t){let o=e.indexOf(r);if(o===-1)return e;let n=r.length,c=0,u="";do u+=e.slice(c,o)+r+t,c=o+n,o=e.indexOf(r,c);while(o!==-1);return u+=e.slice(c),u}function Je(e,r,t,o){let n=0,c="";do{let u=e[o-1]==="\r";c+=e.slice(n,u?o-1:o)+r+(u?`\r
`:`
`)+t,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return c+=e.slice(n),c}var{stdout:et,stderr:tt}=Ze,He=Symbol("GENERATOR"),ue=Symbol("STYLER"),pe=Symbol("IS_EMPTY"),rt=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null),Vt=(e,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=et?et.level:0;e.level=r.level===void 0?t:r.level};var Kt=e=>{let r=(...t)=>t.join(" ");return Vt(r,e),Object.setPrototypeOf(r,ge.prototype),r};function ge(e){return Kt(e)}Object.setPrototypeOf(ge.prototype,Function.prototype);for(let[e,r]of Object.entries(q))ce[e]={get(){let t=Oe(this,we(r.open,r.close,this[ue]),this[pe]);return Object.defineProperty(this,e,{value:t}),t}};ce.visible={get(){let e=Oe(this,this[ue],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var ke=(e,r,t,...o)=>e==="rgb"?r==="ansi16m"?q[t].ansi16m(...o):r==="ansi256"?q[t].ansi256(q.rgbToAnsi256(...o)):q[t].ansi(q.rgbToAnsi(...o)):e==="hex"?ke("rgb",r,t,...q.hexToRgb(...o)):q[t][e](...o),Xt=["rgb","hex","ansi256"];for(let e of Xt){ce[e]={get(){let{level:t}=this;return function(...o){let n=we(ke(e,rt[t],"color",...o),q.color.close,this[ue]);return Oe(this,n,this[pe])}}};let r="bg"+e[0].toUpperCase()+e.slice(1);ce[r]={get(){let{level:t}=this;return function(...o){let n=we(ke(e,rt[t],"bgColor",...o),q.bgColor.close,this[ue]);return Oe(this,n,this[pe])}}}}var qt=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this[He].level},set(e){this[He].level=e}}}),we=(e,r,t)=>{let o,n;return t===void 0?(o=e,n=r):(o=t.openAll+e,n=r+t.closeAll),{open:e,close:r,openAll:o,closeAll:n,parent:t}},Oe=(e,r,t)=>{let o=(...n)=>Yt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,qt),o[He]=e,o[ue]=r,o[pe]=t,o},Yt=(e,r)=>{if(e.level<=0||!r)return e[pe]?"":r;let t=e[ue];if(t===void 0)return r;let{openAll:o,closeAll:n}=t;if(r.includes("\x1B"))for(;t!==void 0;)r=ze(r,t.close,t.open),t=t.parent;let c=r.indexOf(`
`);return c!==-1&&(r=Je(r,n,o,c)),o+r+n};Object.defineProperties(ge.prototype,ce);var Qt=ge(),jr=ge({level:tt?tt.level:0});var he=Qt;var Ue=fe("@yarnpkg/core"),St=Ee(Ot()),ie="root",X="catalog:",F=class extends Error{constructor(t,o){super(t);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},ve=class{constructor(){this.configCache=new Map}getInheritanceChain(r){let t=r.split("/"),o=[];for(let n=0;n<t.length;n++)o.push(t.slice(0,n+1).join("/"));return o}resolveInheritedRange(r,t,o){let n=this.getInheritanceChain(t);for(let u=n.length-1;u>=0;u--){let f=n[u],p=r.list?.[f];if(p&&typeof p=="object"){let h=p[o];if(h)return h}}if(r.list&&typeof r.list=="object"){let u=r.list[o];if(typeof u=="string")return u}let c=r.list?.[ie];if(c&&typeof c=="object"){let u=c[o];if(u)return u}return null}validateInheritanceStructure(r){if(!r.list)return!0;let t=Object.keys(r.list);for(let o of t)if(typeof r.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let c=0;c<n.length-1;c++){let u=n[c];if(!t.includes(u)&&u!==ie)return!1}}return!0}async readConfiguration(r){let o=r.cwd,n=this.configCache.get(o);if(n)return n;let c=r.configuration.get("catalogs")||{},u=c;if(c.list?u.list=Object.entries(c.list).reduce((f,[p,h])=>(typeof h=="string"?f[ie]={...f[ie]||{},[p]:h}:f[p]=h,f),{}):u.list={},!this.isValidConfiguration(u))throw new F("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'warn' | 'strict' }, list: { [alias: string]: { [packageName: string]: string } } }",F.INVALID_FORMAT);if(!this.validateInheritanceStructure(u))throw new F("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",F.INVALID_ALIAS);return this.configCache.set(o,u),u}async getRange(r,t,o){let n=await this.readConfiguration(r),c=t.length===0?ie:t,u=this.resolveInheritedRange(n,c,o);if(u)return/^[^:]+:/.test(u)?u:`${r.configuration.get("defaultProtocol")}${u}`;let f=n.list?.[c];if(!f||typeof f=="string")throw new F(`Alias "${c}" not found in .yarnrc.yml catalogs.`,F.INVALID_ALIAS);let p=f[o];if(!p)throw new F(`Package "${o}" not found in alias "${c}"`,F.INVALID_ALIAS);return/^[^:]+:/.test(p)?p:`${r.configuration.get("defaultProtocol")}${p}`}async getDefaultAliasGroups(r){let t=await this.readConfiguration(r.project);if(t.options){if(await this.shouldIgnoreWorkspace(r))return[];if(t.options.default){if(Array.isArray(t.options.default))return t.options.default;if(t.options.default==="max"){let o=Object.keys(t.list||{}),n=[...r.manifest.dependencies,...r.manifest.devDependencies],c=Object.fromEntries(o.map(f=>[f,0]));for(let[f,p]of n)if(p.range.startsWith(X)){let h=p.range.substring(X.length);c[h]=(c[h]||0)+1}let u=Math.max(...Object.values(c));return Object.keys(c).filter(f=>c[f]===u)}}}return[]}async findDependency(r,t){let o=Ue.structUtils.stringifyIdent(t),n=await this.readConfiguration(r),c=[],u=Object.entries(n.list||{}).filter(([f,p])=>typeof p=="string"?o===p:Object.keys(p).includes(o));c.push(...u.map(([f,p])=>{let h=typeof p=="string"?p:p[o];return[f,h]}));for(let[f]of Object.entries(n.list||{})){if(c.some(([h])=>h===f))continue;let p=this.resolveInheritedRange(n,f,o);p&&c.push([f,p])}return c}clearCache(r){this.configCache.delete(r)}async shouldIgnoreWorkspace(r){if(!r.manifest.name)return!1;let t=await this.readConfiguration(r.project);return t.options?.ignoredWorkspaces?(0,St.isMatch)(Ue.structUtils.stringifyIdent(r.manifest.name),t.options.ignoredWorkspaces):!1}async getValidationLevel(r){let t=await this.readConfiguration(r.project);return t.options?.validation?t.options.validation:"warn"}isValidConfiguration(r){if(!r||typeof r!="object"||!("list"in r)||!r.list||typeof r.list!="object")return!1;for(let[t,o]of Object.entries(r.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in r&&r.options&&typeof r.options=="object"){if("ignoredWorkspaces"in r.options&&r.options.ignoredWorkspaces&&(!Array.isArray(r.options.ignoredWorkspaces)||r.options.ignoredWorkspaces.length===0))return!1;if("default"in r.options&&r.options.default){if(Array.isArray(r.options.default)){if(r.options.default.length===0)return!1;let t=Object.keys(r.list||{});for(let o of r.options.default)if(o!=="root"&&!t.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),c=!0;for(let u of n)if(u!=="root"&&!t.includes(u)){c=!1;break}if(!c)return!1}else return!1}else if(typeof r.options.default!="string"||r.options.default!=="max")return!1}if("validation"in r.options&&(typeof r.options.validation!="string"||!["warn","strict"].includes(r.options.validation)))return!1}return!0}};var Y=new ve,$r={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:W.SettingsType.ANY,default:{}}},hooks:{validateWorkspace:async(e,r)=>{let t=await Y.shouldIgnoreWorkspace(e);if(!t){let n=await vr(e);if(n.length>0){let c=he.yellow(n.join(", ")),u=await Y.getValidationLevel(e),f=`The following dependencies are listed in the catalogs but not using the catalog protocol: ${c}. Consider using the catalog protocol instead.`;u==="strict"?r.reportError(W.MessageName.INVALID_MANIFEST,f):u==="warn"&&r.reportWarning(W.MessageName.INVALID_MANIFEST,f)}}let o=[...Object.values(e.manifest.raw.dependencies||{}),...Object.values(e.manifest.raw.devDependencies||{})].some(n=>n.startsWith(X));t&&o&&r.reportError(W.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},reduceDependency:async(e,r,...t)=>{let o=e.range.startsWith(X),n=e.range.includes("catalog%3A")&&e.range.startsWith("patch:");if(!o&&!n)return e;try{let c="",u=e.range;if(o)c=e.range.slice(X.length);else if(n){let L=e.range.match(/catalog%3A([^#&]*)/);L&&(c=L[1]||"")}let f=W.structUtils.stringifyIdent(e),p=await Y.getRange(r,c,f),h;if(o?h=W.structUtils.makeDescriptor(W.structUtils.makeIdent(e.scope,e.name),p):h=W.structUtils.makeDescriptor(W.structUtils.makeIdent(e.scope,e.name),u.replace(/catalog%3A[^#&]*/,p)),n)return h;let C=await r.configuration.reduceHook(L=>L.reduceDependency,h,r,...t);return C!==h?C:h}catch(c){throw c instanceof F?new Error(`Failed to resolve ${W.structUtils.stringifyDescriptor(e)}: ${c.message}`):c}},afterWorkspaceDependencyAddition:async(e,r,t)=>{Tt(e,t)},afterWorkspaceDependencyReplacement:async(e,r,t,o)=>{Tt(e,o)},beforeWorkspacePacking:async(e,r)=>{if(await Y.shouldIgnoreWorkspace(e))return;let t=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of t){let n=r[o];if(!(!n||typeof n!="object"))for(let[c,u]of Object.entries(n)){let f=u;if(f.startsWith(X))try{let p=f.slice(X.length),h=await Y.getRange(e.project,p,c);n[c]=h}catch(p){throw p instanceof F?new Error(`Failed to resolve catalog dependency ${c}@${f} during packaging: ${p.message}`):p}}}}}};async function vr(e){let r=await Y.readConfiguration(e.project),t=new Set;if(r.list){for(let[c,u]of Object.entries(r.list))if(typeof u=="object")for(let f of Object.keys(u))t.add(f)}let o=[...Object.entries(e.manifest.raw.dependencies||{}),...Object.entries(e.manifest.raw.devDependencies||{})],n=[];for(let[c,u]of o)u.startsWith(X)||t.has(c)&&n.push(c);return n}async function Tt(e,r){if(r.range.startsWith(X)){if(await Y.shouldIgnoreWorkspace(e))throw new Error(he.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await Y.shouldIgnoreWorkspace(e))return;let t=await Y.findDependency(e.project,r);if(t.length===0)return;let o=await Y.getDefaultAliasGroups(e);if(o.length>0){for(let p of o)if(t.some(([h])=>h===p)){r.range=`${X}${p}`;return}}let n=t.map(([p])=>p===ie?"":p),c=n.filter(p=>p!=="").length>0?` (${n.join(", ")})`:"",u=await Y.getValidationLevel(e),f=`\u27A4 ${r.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${r.name}@${X}${n[0]}' instead.`;if(u==="strict")throw new Error(he.red(f));u==="warn"&&console.warn(he.yellow(f))}var Lr=$r;return Dt(Ir);})();
return plugin;
}
};
