/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Lt=Object.create;var _e=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,wt=Object.prototype.hasOwnProperty;var le=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ae=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),kt=(e,r)=>{for(var t in r)_e(e,t,{get:r[t],enumerable:!0})},Ke=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Nt(r))!wt.call(e,s)&&s!==t&&_e(e,s,{get:()=>r[s],enumerable:!(o=It(r,s))||o.enumerable});return e};var Ee=(e,r,t)=>(t=e!=null?Lt(Ht(e)):{},Ke(r||!e||!e.__esModule?_e(t,"default",{value:e,enumerable:!0}):t,e)),Mt=e=>Ke(_e({},"__esModule",{value:!0}),e);var ge=ae((Wr,it)=>{"use strict";var Y="\\\\/",ot=`[^${Y}]`,ee="\\.",Zt="\\+",zt="\\?",Se="\\/",Jt="(?=.)",st="[^/]",ke=`(?:${Se}|$)`,nt=`(?:^|${Se})`,Me=`${ee}{1,2}${ke}`,er=`(?!${ee})`,tr=`(?!${nt}${Me})`,rr=`(?!${ee}{0,1}${ke})`,or=`(?!${Me})`,sr=`[^.${Se}]`,nr=`${st}*?`,ar="/",at={DOT_LITERAL:ee,PLUS_LITERAL:Zt,QMARK_LITERAL:zt,SLASH_LITERAL:Se,ONE_CHAR:Jt,QMARK:st,END_ANCHOR:ke,DOTS_SLASH:Me,NO_DOT:er,NO_DOTS:tr,NO_DOT_SLASH:rr,NO_DOTS_SLASH:or,QMARK_NO_DOT:sr,STAR:nr,START_ANCHOR:nt,SEP:ar},ir={...at,SLASH_LITERAL:`[${Y}]`,QMARK:ot,STAR:`${ot}*?`,DOTS_SLASH:`${ee}{1,2}(?:[${Y}]|$)`,NO_DOT:`(?!${ee})`,NO_DOTS:`(?!(?:^|[${Y}])${ee}{1,2}(?:[${Y}]|$))`,NO_DOT_SLASH:`(?!${ee}{0,1}(?:[${Y}]|$))`,NO_DOTS_SLASH:`(?!${ee}{1,2}(?:[${Y}]|$))`,QMARK_NO_DOT:`[^.${Y}]`,START_ANCHOR:`(?:^|[${Y}])`,END_ANCHOR:`(?:[${Y}]|$)`,SEP:"\\"},ur={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};it.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ur,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ir:at}}});var he=ae(P=>{"use strict";var{REGEX_BACKSLASH:cr,REGEX_REMOVE_BACKSLASH:lr,REGEX_SPECIAL_CHARS:fr,REGEX_SPECIAL_CHARS_GLOBAL:pr}=ge();P.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);P.hasRegexChars=e=>fr.test(e);P.isRegexChar=e=>e.length===1&&P.hasRegexChars(e);P.escapeRegex=e=>e.replace(pr,"\\$1");P.toPosixSlashes=e=>e.replace(cr,"/");P.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let e=navigator.platform.toLowerCase();return e==="win32"||e==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};P.removeBackslashes=e=>e.replace(lr,r=>r==="\\"?"":r);P.escapeLast=(e,r,t)=>{let o=e.lastIndexOf(r,t);return o===-1?e:e[o-1]==="\\"?P.escapeLast(e,r,o-1):`${e.slice(0,o)}\\${e.slice(o)}`};P.removePrefix=(e,r={})=>{let t=e;return t.startsWith("./")&&(t=t.slice(2),r.prefix="./"),t};P.wrapOutput=(e,r={},t={})=>{let o=t.contains?"":"^",s=t.contains?"":"$",u=`${o}(?:${e})${s}`;return r.negated===!0&&(u=`(?:^(?!${u}).*$)`),u};P.basename=(e,{windows:r}={})=>{let t=e.split(r?/[\\/]/:"/"),o=t[t.length-1];return o===""?t[t.length-2]:o}});var dt=ae((Kr,ht)=>{"use strict";var ut=he(),{CHAR_ASTERISK:De,CHAR_AT:gr,CHAR_BACKWARD_SLASH:de,CHAR_COMMA:hr,CHAR_DOT:Be,CHAR_EXCLAMATION_MARK:Pe,CHAR_FORWARD_SLASH:gt,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:Fe,CHAR_LEFT_SQUARE_BRACKET:dr,CHAR_PLUS:Ar,CHAR_QUESTION_MARK:ct,CHAR_RIGHT_CURLY_BRACE:Rr,CHAR_RIGHT_PARENTHESES:lt,CHAR_RIGHT_SQUARE_BRACKET:br}=ge(),ft=e=>e===gt||e===de,pt=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},Cr=(e,r)=>{let t=r||{},o=e.length-1,s=t.parts===!0||t.scanToEnd===!0,u=[],c=[],p=[],g=e,b=-1,C=0,L=0,I=!1,G=!1,_=!1,w=!1,oe=!1,X=!1,y=!1,q=!1,se=!1,M=!1,k=0,F,h,A={value:"",depth:0,isGlob:!1},i=()=>b>=o,B=()=>g.charCodeAt(b+1),N=()=>(F=h,g.charCodeAt(++b));for(;b<o;){h=N();let E;if(h===de){y=A.backslashes=!0,h=N(),h===Ge&&(X=!0);continue}if(X===!0||h===Ge){for(k++;i()!==!0&&(h=N());){if(h===de){y=A.backslashes=!0,N();continue}if(h===Ge){k++;continue}if(X!==!0&&h===Be&&(h=N())===Be){if(I=A.isBrace=!0,_=A.isGlob=!0,M=!0,s===!0)continue;break}if(X!==!0&&h===hr){if(I=A.isBrace=!0,_=A.isGlob=!0,M=!0,s===!0)continue;break}if(h===Rr&&(k--,k===0)){X=!1,I=A.isBrace=!0,M=!0;break}}if(s===!0)continue;break}if(h===gt){if(u.push(b),c.push(A),A={value:"",depth:0,isGlob:!1},M===!0)continue;if(F===Be&&b===C+1){C+=2;continue}L=b+1;continue}if(t.noext!==!0&&(h===Ar||h===gr||h===De||h===ct||h===Pe)===!0&&B()===Fe){if(_=A.isGlob=!0,w=A.isExtglob=!0,M=!0,h===Pe&&b===C&&(se=!0),s===!0){for(;i()!==!0&&(h=N());){if(h===de){y=A.backslashes=!0,h=N();continue}if(h===lt){_=A.isGlob=!0,M=!0;break}}continue}break}if(h===De){if(F===De&&(oe=A.isGlobstar=!0),_=A.isGlob=!0,M=!0,s===!0)continue;break}if(h===ct){if(_=A.isGlob=!0,M=!0,s===!0)continue;break}if(h===dr){for(;i()!==!0&&(E=N());){if(E===de){y=A.backslashes=!0,N();continue}if(E===br){G=A.isBracket=!0,_=A.isGlob=!0,M=!0;break}}if(s===!0)continue;break}if(t.nonegate!==!0&&h===Pe&&b===C){q=A.negated=!0,C++;continue}if(t.noparen!==!0&&h===Fe){if(_=A.isGlob=!0,s===!0){for(;i()!==!0&&(h=N());){if(h===Fe){y=A.backslashes=!0,h=N();continue}if(h===lt){M=!0;break}}continue}break}if(_===!0){if(M=!0,s===!0)continue;break}}t.noext===!0&&(w=!1,_=!1);let $=g,n="",a="";C>0&&(n=g.slice(0,C),g=g.slice(C),L-=C),$&&_===!0&&L>0?($=g.slice(0,L),a=g.slice(L)):_===!0?($="",a=g):$=g,$&&$!==""&&$!=="/"&&$!==g&&ft($.charCodeAt($.length-1))&&($=$.slice(0,-1)),t.unescape===!0&&(a&&(a=ut.removeBackslashes(a)),$&&y===!0&&($=ut.removeBackslashes($)));let W={prefix:n,input:e,start:C,base:$,glob:a,isBrace:I,isBracket:G,isGlob:_,isExtglob:w,isGlobstar:oe,negated:q,negatedExtglob:se};if(t.tokens===!0&&(W.maxDepth=0,ft(h)||c.push(A),W.tokens=c),t.parts===!0||t.tokens===!0){let E;for(let O=0;O<u.length;O++){let J=E?E+1:C,U=u[O],re=e.slice(J,U);t.tokens&&(O===0&&C!==0?(c[O].isPrefix=!0,c[O].value=n):c[O].value=re,pt(c[O]),W.maxDepth+=c[O].depth),(O!==0||re!=="")&&p.push(re),E=U}if(E&&E+1<e.length){let O=e.slice(E+1);p.push(O),t.tokens&&(c[c.length-1].value=O,pt(c[c.length-1]),W.maxDepth+=c[c.length-1].depth)}W.slashes=u,W.parts=p}return W};ht.exports=Cr});var bt=ae((Vr,Rt)=>{"use strict";var Te=ge(),Q=he(),{MAX_LENGTH:$e,POSIX_REGEX_SOURCE:_r,REGEX_NON_SPECIAL_CHARS:Er,REGEX_SPECIAL_CHARS_BACKREF:yr,REPLACEMENTS:At}=Te,mr=(e,r)=>{if(typeof r.expandRange=="function")return r.expandRange(...e,r);e.sort();let t=`[${e.join("-")}]`;try{new RegExp(t)}catch{return e.map(s=>Q.escapeRegex(s)).join("..")}return t},ce=(e,r)=>`Missing ${e}: "${r}" - use "\\\\${r}" to match literal characters`,je=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=At[e]||e;let t={...r},o=typeof t.maxLength=="number"?Math.min($e,t.maxLength):$e,s=e.length;if(s>o)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${o}`);let u={type:"bos",value:"",output:t.prepend||""},c=[u],p=t.capture?"":"?:",g=Te.globChars(t.windows),b=Te.extglobChars(g),{DOT_LITERAL:C,PLUS_LITERAL:L,SLASH_LITERAL:I,ONE_CHAR:G,DOTS_SLASH:_,NO_DOT:w,NO_DOT_SLASH:oe,NO_DOTS_SLASH:X,QMARK:y,QMARK_NO_DOT:q,STAR:se,START_ANCHOR:M}=g,k=f=>`(${p}(?:(?!${M}${f.dot?_:C}).)*?)`,F=t.dot?"":w,h=t.dot?y:q,A=t.bash===!0?k(t):se;t.capture&&(A=`(${A})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let i={input:e,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:c};e=Q.removePrefix(e,i),s=e.length;let B=[],N=[],$=[],n=u,a,W=()=>i.index===s-1,E=i.peek=(f=1)=>e[i.index+f],O=i.advance=()=>e[++i.index]||"",J=()=>e.slice(i.index+1),U=(f="",m=0)=>{i.consumed+=f,i.index+=m},re=f=>{i.output+=f.output!=null?f.output:f.value,U(f.value)},$t=()=>{let f=1;for(;E()==="!"&&(E(2)!=="("||E(3)==="?");)O(),i.start++,f++;return f%2===0?!1:(i.negated=!0,i.start++,!0)},Re=f=>{i[f]++,$.push(f)},ne=f=>{i[f]--,$.pop()},R=f=>{if(n.type==="globstar"){let m=i.braces>0&&(f.type==="comma"||f.type==="brace"),l=f.extglob===!0||B.length&&(f.type==="pipe"||f.type==="paren");f.type!=="slash"&&f.type!=="paren"&&!m&&!l&&(i.output=i.output.slice(0,-n.output.length),n.type="star",n.value="*",n.output=A,i.output+=n.output)}if(B.length&&f.type!=="paren"&&(B[B.length-1].inner+=f.value),(f.value||f.output)&&re(f),n&&n.type==="text"&&f.type==="text"){n.output=(n.output||n.value)+f.value,n.value+=f.value;return}f.prev=n,c.push(f),n=f},be=(f,m)=>{let l={...b[m],conditions:1,inner:""};l.prev=n,l.parens=i.parens,l.output=i.output;let d=(t.capture?"(":"")+l.open;Re("parens"),R({type:f,value:m,output:i.output?"":G}),R({type:"paren",extglob:!0,value:O(),output:d}),B.push(l)},vt=f=>{let m=f.close+(t.capture?")":""),l;if(f.type==="negate"){let d=A;if(f.inner&&f.inner.length>1&&f.inner.includes("/")&&(d=k(t)),(d!==A||W()||/^\)+$/.test(J()))&&(m=f.close=`)$))${d}`),f.inner.includes("*")&&(l=J())&&/^\.[^\\/.]+$/.test(l)){let S=je(l,{...r,fastpaths:!1}).output;m=f.close=`)${S})${d})`}f.prev.type==="bos"&&(i.negatedExtglob=!0)}R({type:"paren",extglob:!0,value:a,output:m}),ne("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let f=!1,m=e.replace(yr,(l,d,S,D,H,Le)=>D==="\\"?(f=!0,l):D==="?"?d?d+D+(H?y.repeat(H.length):""):Le===0?h+(H?y.repeat(H.length):""):y.repeat(S.length):D==="."?C.repeat(S.length):D==="*"?d?d+D+(H?A:""):A:d?l:`\\${l}`);return f===!0&&(t.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===e&&t.contains===!0?(i.output=e,i):(i.output=Q.wrapOutput(m,i,r),i)}for(;!W();){if(a=O(),a==="\0")continue;if(a==="\\"){let l=E();if(l==="/"&&t.bash!==!0||l==="."||l===";")continue;if(!l){a+="\\",R({type:"text",value:a});continue}let d=/^\\+/.exec(J()),S=0;if(d&&d[0].length>2&&(S=d[0].length,i.index+=S,S%2!==0&&(a+="\\")),t.unescape===!0?a=O():a+=O(),i.brackets===0){R({type:"text",value:a});continue}}if(i.brackets>0&&(a!=="]"||n.value==="["||n.value==="[^")){if(t.posix!==!1&&a===":"){let l=n.value.slice(1);if(l.includes("[")&&(n.posix=!0,l.includes(":"))){let d=n.value.lastIndexOf("["),S=n.value.slice(0,d),D=n.value.slice(d+2),H=_r[D];if(H){n.value=S+H,i.backtrack=!0,O(),!u.output&&c.indexOf(n)===1&&(u.output=G);continue}}}(a==="["&&E()!==":"||a==="-"&&E()==="]")&&(a=`\\${a}`),a==="]"&&(n.value==="["||n.value==="[^")&&(a=`\\${a}`),t.posix===!0&&a==="!"&&n.value==="["&&(a="^"),n.value+=a,re({value:a});continue}if(i.quotes===1&&a!=='"'){a=Q.escapeRegex(a),n.value+=a,re({value:a});continue}if(a==='"'){i.quotes=i.quotes===1?0:1,t.keepQuotes===!0&&R({type:"text",value:a});continue}if(a==="("){Re("parens"),R({type:"paren",value:a});continue}if(a===")"){if(i.parens===0&&t.strictBrackets===!0)throw new SyntaxError(ce("opening","("));let l=B[B.length-1];if(l&&i.parens===l.parens+1){vt(B.pop());continue}R({type:"paren",value:a,output:i.parens?")":"\\)"}),ne("parens");continue}if(a==="["){if(t.nobracket===!0||!J().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(ce("closing","]"));a=`\\${a}`}else Re("brackets");R({type:"bracket",value:a});continue}if(a==="]"){if(t.nobracket===!0||n&&n.type==="bracket"&&n.value.length===1){R({type:"text",value:a,output:`\\${a}`});continue}if(i.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(ce("opening","["));R({type:"text",value:a,output:`\\${a}`});continue}ne("brackets");let l=n.value.slice(1);if(n.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(a=`/${a}`),n.value+=a,re({value:a}),t.literalBrackets===!1||Q.hasRegexChars(l))continue;let d=Q.escapeRegex(n.value);if(i.output=i.output.slice(0,-n.value.length),t.literalBrackets===!0){i.output+=d,n.value=d;continue}n.value=`(${p}${d}|${n.value})`,i.output+=n.value;continue}if(a==="{"&&t.nobrace!==!0){Re("braces");let l={type:"brace",value:a,output:"(",outputIndex:i.output.length,tokensIndex:i.tokens.length};N.push(l),R(l);continue}if(a==="}"){let l=N[N.length-1];if(t.nobrace===!0||!l){R({type:"text",value:a,output:a});continue}let d=")";if(l.dots===!0){let S=c.slice(),D=[];for(let H=S.length-1;H>=0&&(c.pop(),S[H].type!=="brace");H--)S[H].type!=="dots"&&D.unshift(S[H].value);d=mr(D,t),i.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=i.output.slice(0,l.outputIndex),D=i.tokens.slice(l.tokensIndex);l.value=l.output="\\{",a=d="\\}",i.output=S;for(let H of D)i.output+=H.output||H.value}R({type:"brace",value:a,output:d}),ne("braces"),N.pop();continue}if(a==="|"){B.length>0&&B[B.length-1].conditions++,R({type:"text",value:a});continue}if(a===","){let l=a,d=N[N.length-1];d&&$[$.length-1]==="braces"&&(d.comma=!0,l="|"),R({type:"comma",value:a,output:l});continue}if(a==="/"){if(n.type==="dot"&&i.index===i.start+1){i.start=i.index+1,i.consumed="",i.output="",c.pop(),n=u;continue}R({type:"slash",value:a,output:I});continue}if(a==="."){if(i.braces>0&&n.type==="dot"){n.value==="."&&(n.output=C);let l=N[N.length-1];n.type="dots",n.output+=a,n.value+=a,l.dots=!0;continue}if(i.braces+i.parens===0&&n.type!=="bos"&&n.type!=="slash"){R({type:"text",value:a,output:C});continue}R({type:"dot",value:a,output:C});continue}if(a==="?"){if(!(n&&n.value==="(")&&t.noextglob!==!0&&E()==="("&&E(2)!=="?"){be("qmark",a);continue}if(n&&n.type==="paren"){let d=E(),S=a;(n.value==="("&&!/[!=<:]/.test(d)||d==="<"&&!/<([!=]|\w+>)/.test(J()))&&(S=`\\${a}`),R({type:"text",value:a,output:S});continue}if(t.dot!==!0&&(n.type==="slash"||n.type==="bos")){R({type:"qmark",value:a,output:q});continue}R({type:"qmark",value:a,output:y});continue}if(a==="!"){if(t.noextglob!==!0&&E()==="("&&(E(2)!=="?"||!/[!=<:]/.test(E(3)))){be("negate",a);continue}if(t.nonegate!==!0&&i.index===0){$t();continue}}if(a==="+"){if(t.noextglob!==!0&&E()==="("&&E(2)!=="?"){be("plus",a);continue}if(n&&n.value==="("||t.regex===!1){R({type:"plus",value:a,output:L});continue}if(n&&(n.type==="bracket"||n.type==="paren"||n.type==="brace")||i.parens>0){R({type:"plus",value:a});continue}R({type:"plus",value:L});continue}if(a==="@"){if(t.noextglob!==!0&&E()==="("&&E(2)!=="?"){R({type:"at",extglob:!0,value:a,output:""});continue}R({type:"text",value:a});continue}if(a!=="*"){(a==="$"||a==="^")&&(a=`\\${a}`);let l=Er.exec(J());l&&(a+=l[0],i.index+=l[0].length),R({type:"text",value:a});continue}if(n&&(n.type==="globstar"||n.star===!0)){n.type="star",n.star=!0,n.value+=a,n.output=A,i.backtrack=!0,i.globstar=!0,U(a);continue}let f=J();if(t.noextglob!==!0&&/^\([^?]/.test(f)){be("star",a);continue}if(n.type==="star"){if(t.noglobstar===!0){U(a);continue}let l=n.prev,d=l.prev,S=l.type==="slash"||l.type==="bos",D=d&&(d.type==="star"||d.type==="globstar");if(t.bash===!0&&(!S||f[0]&&f[0]!=="/")){R({type:"star",value:a,output:""});continue}let H=i.braces>0&&(l.type==="comma"||l.type==="brace"),Le=B.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!H&&!Le){R({type:"star",value:a,output:""});continue}for(;f.slice(0,3)==="/**";){let Ce=e[i.index+4];if(Ce&&Ce!=="/")break;f=f.slice(3),U("/**",3)}if(l.type==="bos"&&W()){n.type="globstar",n.value+=a,n.output=k(t),i.output=n.output,i.globstar=!0,U(a);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!D&&W()){i.output=i.output.slice(0,-(l.output+n.output).length),l.output=`(?:${l.output}`,n.type="globstar",n.output=k(t)+(t.strictSlashes?")":"|$)"),n.value+=a,i.globstar=!0,i.output+=l.output+n.output,U(a);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&f[0]==="/"){let Ce=f[1]!==void 0?"|$":"";i.output=i.output.slice(0,-(l.output+n.output).length),l.output=`(?:${l.output}`,n.type="globstar",n.output=`${k(t)}${I}|${I}${Ce})`,n.value+=a,i.output+=l.output+n.output,i.globstar=!0,U(a+O()),R({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&f[0]==="/"){n.type="globstar",n.value+=a,n.output=`(?:^|${I}|${k(t)}${I})`,i.output=n.output,i.globstar=!0,U(a+O()),R({type:"slash",value:"/",output:""});continue}i.output=i.output.slice(0,-n.output.length),n.type="globstar",n.output=k(t),n.value+=a,i.output+=n.output,i.globstar=!0,U(a);continue}let m={type:"star",value:a,output:A};if(t.bash===!0){m.output=".*?",(n.type==="bos"||n.type==="slash")&&(m.output=F+m.output),R(m);continue}if(n&&(n.type==="bracket"||n.type==="paren")&&t.regex===!0){m.output=a,R(m);continue}(i.index===i.start||n.type==="slash"||n.type==="dot")&&(n.type==="dot"?(i.output+=oe,n.output+=oe):t.dot===!0?(i.output+=X,n.output+=X):(i.output+=F,n.output+=F),E()!=="*"&&(i.output+=G,n.output+=G)),R(m)}for(;i.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(ce("closing","]"));i.output=Q.escapeLast(i.output,"["),ne("brackets")}for(;i.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(ce("closing",")"));i.output=Q.escapeLast(i.output,"("),ne("parens")}for(;i.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(ce("closing","}"));i.output=Q.escapeLast(i.output,"{"),ne("braces")}if(t.strictSlashes!==!0&&(n.type==="star"||n.type==="bracket")&&R({type:"maybe_slash",value:"",output:`${I}?`}),i.backtrack===!0){i.output="";for(let f of i.tokens)i.output+=f.output!=null?f.output:f.value,f.suffix&&(i.output+=f.suffix)}return i};je.fastpaths=(e,r)=>{let t={...r},o=typeof t.maxLength=="number"?Math.min($e,t.maxLength):$e,s=e.length;if(s>o)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${o}`);e=At[e]||e;let{DOT_LITERAL:u,SLASH_LITERAL:c,ONE_CHAR:p,DOTS_SLASH:g,NO_DOT:b,NO_DOTS:C,NO_DOTS_SLASH:L,STAR:I,START_ANCHOR:G}=Te.globChars(t.windows),_=t.dot?C:b,w=t.dot?L:b,oe=t.capture?"":"?:",X={negated:!1,prefix:""},y=t.bash===!0?".*?":I;t.capture&&(y=`(${y})`);let q=F=>F.noglobstar===!0?y:`(${oe}(?:(?!${G}${F.dot?g:u}).)*?)`,se=F=>{switch(F){case"*":return`${_}${p}${y}`;case".*":return`${u}${p}${y}`;case"*.*":return`${_}${y}${u}${p}${y}`;case"*/*":return`${_}${y}${c}${p}${w}${y}`;case"**":return _+q(t);case"**/*":return`(?:${_}${q(t)}${c})?${w}${p}${y}`;case"**/*.*":return`(?:${_}${q(t)}${c})?${w}${y}${u}${p}${y}`;case"**/.*":return`(?:${_}${q(t)}${c})?${u}${p}${y}`;default:{let h=/^(.*?)\.(\w+)$/.exec(F);if(!h)return;let A=se(h[1]);return A?A+u+h[2]:void 0}}},M=Q.removePrefix(e,X),k=se(M);return k&&t.strictSlashes!==!0&&(k+=`${c}?`),k};Rt.exports=je});var Et=ae((Xr,_t)=>{"use strict";var xr=dt(),We=bt(),Ct=he(),Or=ge(),Sr=e=>e&&typeof e=="object"&&!Array.isArray(e),v=(e,r,t=!1)=>{if(Array.isArray(e)){let C=e.map(I=>v(I,r,t));return I=>{for(let G of C){let _=G(I);if(_)return _}return!1}}let o=Sr(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let s=r||{},u=s.windows,c=o?v.compileRe(e,r):v.makeRe(e,r,!1,!0),p=c.state;delete c.state;let g=()=>!1;if(s.ignore){let C={...r,ignore:null,onMatch:null,onResult:null};g=v(s.ignore,C,t)}let b=(C,L=!1)=>{let{isMatch:I,match:G,output:_}=v.test(C,c,r,{glob:e,posix:u}),w={glob:e,state:p,regex:c,posix:u,input:C,output:_,match:G,isMatch:I};return typeof s.onResult=="function"&&s.onResult(w),I===!1?(w.isMatch=!1,L?w:!1):g(C)?(typeof s.onIgnore=="function"&&s.onIgnore(w),w.isMatch=!1,L?w:!1):(typeof s.onMatch=="function"&&s.onMatch(w),L?w:!0)};return t&&(b.state=p),b};v.test=(e,r,t,{glob:o,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let u=t||{},c=u.format||(s?Ct.toPosixSlashes:null),p=e===o,g=p&&c?c(e):e;return p===!1&&(g=c?c(e):e,p=g===o),(p===!1||u.capture===!0)&&(u.matchBase===!0||u.basename===!0?p=v.matchBase(e,r,t,s):p=r.exec(g)),{isMatch:!!p,match:p,output:g}};v.matchBase=(e,r,t)=>(r instanceof RegExp?r:v.makeRe(r,t)).test(Ct.basename(e));v.isMatch=(e,r,t)=>v(r,t)(e);v.parse=(e,r)=>Array.isArray(e)?e.map(t=>v.parse(t,r)):We(e,{...r,fastpaths:!1});v.scan=(e,r)=>xr(e,r);v.compileRe=(e,r,t=!1,o=!1)=>{if(t===!0)return e.output;let s=r||{},u=s.contains?"":"^",c=s.contains?"":"$",p=`${u}(?:${e.output})${c}`;e&&e.negated===!0&&(p=`^(?!${p}).*$`);let g=v.toRegex(p,r);return o===!0&&(g.state=e),g};v.makeRe=(e,r={},t=!1,o=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=We.fastpaths(e,r)),s.output||(s=We(e,r)),v.compileRe(s,r,t,o)};v.toRegex=(e,r)=>{try{let t=r||{};return new RegExp(e,t.flags||(t.nocase?"i":""))}catch(t){if(r&&r.debug===!0)throw t;return/$^/}};v.constants=Or;_t.exports=v});var Ot=ae((qr,xt)=>{"use strict";var yt=Et(),Tr=he();function mt(e,r,t=!1){return r&&(r.windows===null||r.windows===void 0)&&(r={...r,windows:Tr.isWindows()}),yt(e,r,t)}Object.assign(mt,yt);xt.exports=mt});var Ir={};kt(Ir,{default:()=>Lr});var j=le("@yarnpkg/core");var Ve=(e=0)=>r=>`\x1B[${r+e}m`,Xe=(e=0)=>r=>`\x1B[${38+e};5;${r}m`,qe=(e=0)=>(r,t,o)=>`\x1B[${38+e};2;${r};${t};${o}m`,x={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Hr=Object.keys(x.modifier),Dt=Object.keys(x.color),Bt=Object.keys(x.bgColor),wr=[...Dt,...Bt];function Pt(){let e=new Map;for(let[r,t]of Object.entries(x)){for(let[o,s]of Object.entries(t))x[o]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},t[o]=x[o],e.set(s[0],s[1]);Object.defineProperty(x,r,{value:t,enumerable:!1})}return Object.defineProperty(x,"codes",{value:e,enumerable:!1}),x.color.close="\x1B[39m",x.bgColor.close="\x1B[49m",x.color.ansi=Ve(),x.color.ansi256=Xe(),x.color.ansi16m=qe(),x.bgColor.ansi=Ve(10),x.bgColor.ansi256=Xe(10),x.bgColor.ansi16m=qe(10),Object.defineProperties(x,{rgbToAnsi256:{value(r,t,o){return r===t&&t===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(r){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!t)return[0,0,0];let[o]=t;o.length===3&&(o=[...o].map(u=>u+u).join(""));let s=Number.parseInt(o,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:r=>x.rgbToAnsi256(...x.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let t,o,s;if(r>=232)t=((r-232)*10+8)/255,o=t,s=t;else{r-=16;let p=r%36;t=Math.floor(r/36)/5,o=Math.floor(p/6)/5,s=p%6/5}let u=Math.max(t,o,s)*2;if(u===0)return 30;let c=30+(Math.round(s)<<2|Math.round(o)<<1|Math.round(t));return u===2&&(c+=60),c},enumerable:!1},rgbToAnsi:{value:(r,t,o)=>x.ansi256ToAnsi(x.rgbToAnsi256(r,t,o)),enumerable:!1},hexToAnsi:{value:r=>x.ansi256ToAnsi(x.hexToAnsi256(r)),enumerable:!1}}),x}var Gt=Pt(),V=Gt;var me=Ee(le("process"),1),Qe=Ee(le("os"),1),Ie=Ee(le("tty"),1);function K(e,r=globalThis.Deno?globalThis.Deno.args:me.default.argv){let t=e.startsWith("-")?"":e.length===1?"-":"--",o=r.indexOf(t+e),s=r.indexOf("--");return o!==-1&&(s===-1||o<s)}var{env:T}=me.default,ye;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?ye=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(ye=1);function Ft(){if("FORCE_COLOR"in T)return T.FORCE_COLOR==="true"?1:T.FORCE_COLOR==="false"?0:T.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}function jt(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Wt(e,{streamIsTTY:r,sniffFlags:t=!0}={}){let o=Ft();o!==void 0&&(ye=o);let s=t?ye:o;if(s===0)return 0;if(t){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(e&&!r&&s===void 0)return 0;let u=s||0;if(T.TERM==="dumb")return u;if(me.default.platform==="win32"){let c=Qe.default.release().split(".");return Number(c[0])>=10&&Number(c[2])>=10586?Number(c[2])>=14931?3:2:1}if("CI"in T)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(c=>c in T)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(c=>c in T)||T.CI_NAME==="codeship"?1:u;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor"||T.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in T){let c=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return c>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:u}function Ye(e,r={}){let t=Wt(e,{streamIsTTY:e&&e.isTTY,...r});return jt(t)}var Ut={stdout:Ye({isTTY:Ie.default.isatty(1)}),stderr:Ye({isTTY:Ie.default.isatty(2)})},Ze=Ut;function ze(e,r,t){let o=e.indexOf(r);if(o===-1)return e;let s=r.length,u=0,c="";do c+=e.slice(u,o)+r+t,u=o+s,o=e.indexOf(r,u);while(o!==-1);return c+=e.slice(u),c}function Je(e,r,t,o){let s=0,u="";do{let c=e[o-1]==="\r";u+=e.slice(s,c?o-1:o)+r+(c?`\r
`:`
`)+t,s=o+1,o=e.indexOf(`
`,s)}while(o!==-1);return u+=e.slice(s),u}var{stdout:et,stderr:tt}=Ze,Ne=Symbol("GENERATOR"),ie=Symbol("STYLER"),fe=Symbol("IS_EMPTY"),rt=["ansi","ansi","ansi256","ansi16m"],ue=Object.create(null),Kt=(e,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=et?et.level:0;e.level=r.level===void 0?t:r.level};var Vt=e=>{let r=(...t)=>t.join(" ");return Kt(r,e),Object.setPrototypeOf(r,pe.prototype),r};function pe(e){return Vt(e)}Object.setPrototypeOf(pe.prototype,Function.prototype);for(let[e,r]of Object.entries(V))ue[e]={get(){let t=xe(this,we(r.open,r.close,this[ie]),this[fe]);return Object.defineProperty(this,e,{value:t}),t}};ue.visible={get(){let e=xe(this,this[ie],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var He=(e,r,t,...o)=>e==="rgb"?r==="ansi16m"?V[t].ansi16m(...o):r==="ansi256"?V[t].ansi256(V.rgbToAnsi256(...o)):V[t].ansi(V.rgbToAnsi(...o)):e==="hex"?He("rgb",r,t,...V.hexToRgb(...o)):V[t][e](...o),Xt=["rgb","hex","ansi256"];for(let e of Xt){ue[e]={get(){let{level:t}=this;return function(...o){let s=we(He(e,rt[t],"color",...o),V.color.close,this[ie]);return xe(this,s,this[fe])}}};let r="bg"+e[0].toUpperCase()+e.slice(1);ue[r]={get(){let{level:t}=this;return function(...o){let s=we(He(e,rt[t],"bgColor",...o),V.bgColor.close,this[ie]);return xe(this,s,this[fe])}}}}var qt=Object.defineProperties(()=>{},{...ue,level:{enumerable:!0,get(){return this[Ne].level},set(e){this[Ne].level=e}}}),we=(e,r,t)=>{let o,s;return t===void 0?(o=e,s=r):(o=t.openAll+e,s=r+t.closeAll),{open:e,close:r,openAll:o,closeAll:s,parent:t}},xe=(e,r,t)=>{let o=(...s)=>Yt(o,s.length===1?""+s[0]:s.join(" "));return Object.setPrototypeOf(o,qt),o[Ne]=e,o[ie]=r,o[fe]=t,o},Yt=(e,r)=>{if(e.level<=0||!r)return e[fe]?"":r;let t=e[ie];if(t===void 0)return r;let{openAll:o,closeAll:s}=t;if(r.includes("\x1B"))for(;t!==void 0;)r=ze(r,t.close,t.open),t=t.parent;let u=r.indexOf(`
`);return u!==-1&&(r=Je(r,s,o,u)),o+r+s};Object.defineProperties(pe.prototype,ue);var Qt=pe(),Fr=pe({level:tt?tt.level:0});var Oe=Qt;var Ue=le("@yarnpkg/core"),St=Ee(Ot()),Ae="root",z="catalog:",Z=class extends Error{constructor(t,o){super(t);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},ve=class{constructor(){this.configCache=new Map}async readConfiguration(r){let o=r.cwd,s=this.configCache.get(o);if(s)return s;let u=r.configuration.get("catalogs")||{},c=u;if(c.list=Object.entries(u.list).reduce((p,[g,b])=>(typeof b=="string"?p[Ae]={...p[Ae]||{},[g]:b}:p[g]=b,p),{}),!this.isValidConfiguration(c))throw new Z("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'warn' | 'strict' }, list: { [alias: string]: { [packageName: string]: string } } }",Z.INVALID_FORMAT);return this.configCache.set(o,c),c}async getRange(r,t,o){let s=await this.readConfiguration(r),u=t.length===0?Ae:t,c=s.list?.[u];if(!c||typeof c=="string")throw new Z(`Alias "${u}" not found in .yarnrc.yml catalogs.`,Z.INVALID_ALIAS);let p=c[o];if(!p)throw new Z(`Package "${o}" not found in alias "${u}"`,Z.INVALID_ALIAS);return/^[^:]+:/.test(p)?p:`${r.configuration.get("defaultProtocol")}${p}`}async getDefaultAliasGroups(r){let t=await this.readConfiguration(r.project);if(t.options){if(await this.shouldIgnoreWorkspace(r))return[];if(t.options.default){if(Array.isArray(t.options.default))return t.options.default;if(t.options.default==="max"){let o=Object.keys(t.list||{}),s=[...r.manifest.dependencies,...r.manifest.devDependencies],u=Object.fromEntries(o.map(p=>[p,0]));for(let[p,g]of s)if(g.range.startsWith(z)){let b=g.range.substring(z.length);u[b]=(u[b]||0)+1}let c=Math.max(...Object.values(u));return Object.keys(u).filter(p=>u[p]===c)}}}return[]}async findDependency(r,t){let o=Ue.structUtils.stringifyIdent(t),s=await this.readConfiguration(r),u=Object.entries(s.list||{}).filter(([c,p])=>typeof p=="string"?o===p:Object.keys(p).includes(o));return u.length===0?[]:u.map(([c,p])=>{let g=typeof p=="string"?p:p[o];return[c,g]})}clearCache(r){this.configCache.delete(r)}async shouldIgnoreWorkspace(r){if(!r.manifest.name)return!1;let t=await this.readConfiguration(r.project);return t.options?.ignoredWorkspaces?(0,St.isMatch)(Ue.structUtils.stringifyIdent(r.manifest.name),t.options.ignoredWorkspaces):!1}async getValidationLevel(r){let t=await this.readConfiguration(r.project);return t.options?.validation?t.options.validation:"warn"}isValidConfiguration(r){if(!r||typeof r!="object"||!("list"in r)||!r.list||typeof r.list!="object")return!1;for(let[t,o]of Object.entries(r.list)){if(!o||typeof o!="object")return!1;for(let s of Object.values(o))if(typeof s!="string")return!1}if("options"in r&&r.options&&typeof r.options=="object"){if("ignoredWorkspaces"in r.options&&r.options.ignoredWorkspaces&&(!Array.isArray(r.options.ignoredWorkspaces)||r.options.ignoredWorkspaces.length===0))return!1;if("default"in r.options&&r.options.default){if(Array.isArray(r.options.default)){if(r.options.default.length===0)return!1;let t=Object.keys(r.list);for(let o of r.options.default)if(o!=="root"&&!t.includes(o))return!1}else if(typeof r.options.default!="string"||r.options.default!=="max")return!1}if("validation"in r.options&&(typeof r.options.validation!="string"||!["warn","strict"].includes(r.options.validation)))return!1}return!0}};var te=new ve,$r={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:j.SettingsType.ANY,default:{}}},hooks:{validateWorkspace:async(e,r)=>{let t=await vr(e);if(t.length>0){let s=t.join(", "),u=await te.getValidationLevel(e),c=`The following dependencies are listed in the catalogs but not using the catalog protocol: ${s}. Consider using the catalog protocol instead.`;u==="strict"?r.reportError(j.MessageName.INVALID_MANIFEST,c):u==="warn"&&r.reportWarning(j.MessageName.INVALID_MANIFEST,c)}let o=[...Object.values(e.manifest.raw.dependencies||{}),...Object.values(e.manifest.raw.devDependencies||{})].some(s=>s.startsWith(z));await te.shouldIgnoreWorkspace(e)&&o&&r.reportError(j.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},reduceDependency:async(e,r,...t)=>{let o=e.range.startsWith(z),s=e.range.includes("catalog%3A")&&e.range.startsWith("patch:");if(!o&&!s)return e;try{let u="",c=e.range;if(o)u=e.range.slice(z.length);else if(s){let L=e.range.match(/catalog%3A([^#&]*)/);L&&(u=L[1]||"")}let p=j.structUtils.stringifyIdent(e),g=await te.getRange(r,u,p),b;o?b=j.structUtils.makeDescriptor(j.structUtils.makeIdent(e.scope,e.name),g):b=j.structUtils.makeDescriptor(j.structUtils.makeIdent(e.scope,e.name),c.replace(/catalog%3A[^#&]*/,g));let C=await r.configuration.reduceHook(L=>L.reduceDependency,b,r,...t);return C!==b?C:b}catch(u){throw u instanceof Z?new Error(`Failed to resolve ${j.structUtils.stringifyDescriptor(e)}: ${u.message}`):u}},afterWorkspaceDependencyAddition:async(e,r,t)=>{Tt(e,t)},afterWorkspaceDependencyReplacement:async(e,r,t,o)=>{Tt(e,o)}}};async function vr(e){let r=await te.readConfiguration(e.project),t=new Set;if(r.list){for(let[u,c]of Object.entries(r.list))if(typeof c=="object")for(let p of Object.keys(c))t.add(p)}let o=[...Object.entries(e.manifest.raw.dependencies||{}),...Object.entries(e.manifest.raw.devDependencies||{})],s=[];for(let[u,c]of o)c.startsWith(z)||t.has(u)&&s.push(u);return s}async function Tt(e,r){if(r.range.startsWith(z)){if(await te.shouldIgnoreWorkspace(e))throw new Error(Oe.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await te.shouldIgnoreWorkspace(e))return;let t=await te.findDependency(e.project,r);if(t.length===0)return;let o=await te.getDefaultAliasGroups(e);if(o.length>0){for(let g of o)if(t.some(([b])=>b===g)){r.range=`${z}${g}`;return}}let s=t.map(([g])=>g===Ae?"":g),u=s.filter(g=>g!=="").length>0?` (${s.join(", ")})`:"",c=await te.getValidationLevel(e),p=`\u27A4 ${r.name} is listed in the catalogs config${u}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${r.name}@${z}${s[0]}' instead.`;if(c==="strict")throw new Error(Oe.red(p));c==="warn"&&console.warn(Oe.yellow(p))}var Lr=$r;return Mt(Ir);})();
return plugin;
}
};
