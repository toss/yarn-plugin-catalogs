/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Ht=Object.create;var _e=Object.defineProperty;var kt=Object.getOwnPropertyDescriptor;var wt=Object.getOwnPropertyNames;var Nt=Object.getPrototypeOf,Dt=Object.prototype.hasOwnProperty;var ie=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var ae=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Mt=(r,e)=>{for(var t in e)_e(r,t,{get:e[t],enumerable:!0})},Xe=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of wt(e))!Dt.call(r,n)&&n!==t&&_e(r,n,{get:()=>e[n],enumerable:!(o=kt(e,n))||o.enumerable});return r};var Ee=(r,e,t)=>(t=r!=null?Ht(Nt(r)):{},Xe(e||!r||!r.__esModule?_e(t,"default",{value:r,enumerable:!0}):t,r)),Pt=r=>Xe(_e({},"__esModule",{value:!0}),r);var he=ae((Vr,ct)=>{"use strict";var Z="\\\\/",st=`[^${Z}]`,ee="\\.",Jt="\\+",er="\\?",Se="\\/",tr="(?=.)",it="[^/]",De=`(?:${Se}|$)`,at=`(?:^|${Se})`,Me=`${ee}{1,2}${De}`,rr=`(?!${ee})`,or=`(?!${at}${Me})`,nr=`(?!${ee}{0,1}${De})`,sr=`(?!${Me})`,ir=`[^.${Se}]`,ar=`${it}*?`,ur="/",ut={DOT_LITERAL:ee,PLUS_LITERAL:Jt,QMARK_LITERAL:er,SLASH_LITERAL:Se,ONE_CHAR:tr,QMARK:it,END_ANCHOR:De,DOTS_SLASH:Me,NO_DOT:rr,NO_DOTS:or,NO_DOT_SLASH:nr,NO_DOTS_SLASH:sr,QMARK_NO_DOT:ir,STAR:ar,START_ANCHOR:at,SEP:ur},cr={...ut,SLASH_LITERAL:`[${Z}]`,QMARK:st,STAR:`${st}*?`,DOTS_SLASH:`${ee}{1,2}(?:[${Z}]|$)`,NO_DOT:`(?!${ee})`,NO_DOTS:`(?!(?:^|[${Z}])${ee}{1,2}(?:[${Z}]|$))`,NO_DOT_SLASH:`(?!${ee}{0,1}(?:[${Z}]|$))`,NO_DOTS_SLASH:`(?!${ee}{1,2}(?:[${Z}]|$))`,QMARK_NO_DOT:`[^.${Z}]`,START_ANCHOR:`(?:^|[${Z}])`,END_ANCHOR:`(?:[${Z}]|$)`,SEP:"\\"},lr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ct.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:lr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(r){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${r.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(r){return r===!0?cr:ut}}});var Ae=ae(j=>{"use strict";var{REGEX_BACKSLASH:fr,REGEX_REMOVE_BACKSLASH:pr,REGEX_SPECIAL_CHARS:gr,REGEX_SPECIAL_CHARS_GLOBAL:dr}=he();j.isObject=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);j.hasRegexChars=r=>gr.test(r);j.isRegexChar=r=>r.length===1&&j.hasRegexChars(r);j.escapeRegex=r=>r.replace(dr,"\\$1");j.toPosixSlashes=r=>r.replace(fr,"/");j.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let r=navigator.platform.toLowerCase();return r==="win32"||r==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};j.removeBackslashes=r=>r.replace(pr,e=>e==="\\"?"":e);j.escapeLast=(r,e,t)=>{let o=r.lastIndexOf(e,t);return o===-1?r:r[o-1]==="\\"?j.escapeLast(r,e,o-1):`${r.slice(0,o)}\\${r.slice(o)}`};j.removePrefix=(r,e={})=>{let t=r;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};j.wrapOutput=(r,e={},t={})=>{let o=t.contains?"":"^",n=t.contains?"":"$",c=`${o}(?:${r})${n}`;return e.negated===!0&&(c=`(?:^(?!${c}).*$)`),c};j.basename=(r,{windows:e}={})=>{let t=r.split(e?/[\\/]/:"/"),o=t[t.length-1];return o===""?t[t.length-2]:o}});var Rt=ae((Xr,At)=>{"use strict";var lt=Ae(),{CHAR_ASTERISK:Pe,CHAR_AT:hr,CHAR_BACKWARD_SLASH:Re,CHAR_COMMA:Ar,CHAR_DOT:Be,CHAR_EXCLAMATION_MARK:Ge,CHAR_FORWARD_SLASH:ht,CHAR_LEFT_CURLY_BRACE:je,CHAR_LEFT_PARENTHESES:Fe,CHAR_LEFT_SQUARE_BRACKET:Rr,CHAR_PLUS:br,CHAR_QUESTION_MARK:ft,CHAR_RIGHT_CURLY_BRACE:Cr,CHAR_RIGHT_PARENTHESES:pt,CHAR_RIGHT_SQUARE_BRACKET:yr}=he(),gt=r=>r===ht||r===Re,dt=r=>{r.isPrefix!==!0&&(r.depth=r.isGlobstar?1/0:1)},_r=(r,e)=>{let t=e||{},o=r.length-1,n=t.parts===!0||t.scanToEnd===!0,c=[],u=[],f=[],g=r,b=-1,C=0,D=0,L=!1,F=!1,y=!1,k=!1,re=!1,Y=!1,E=!1,Q=!1,oe=!1,M=!1,w=0,W,d,A={value:"",depth:0,isGlob:!1},a=()=>b>=o,G=()=>g.charCodeAt(b+1),I=()=>(W=d,g.charCodeAt(++b));for(;b<o;){d=I();let _;if(d===Re){E=A.backslashes=!0,d=I(),d===je&&(Y=!0);continue}if(Y===!0||d===je){for(w++;a()!==!0&&(d=I());){if(d===Re){E=A.backslashes=!0,I();continue}if(d===je){w++;continue}if(Y!==!0&&d===Be&&(d=I())===Be){if(L=A.isBrace=!0,y=A.isGlob=!0,M=!0,n===!0)continue;break}if(Y!==!0&&d===Ar){if(L=A.isBrace=!0,y=A.isGlob=!0,M=!0,n===!0)continue;break}if(d===Cr&&(w--,w===0)){Y=!1,L=A.isBrace=!0,M=!0;break}}if(n===!0)continue;break}if(d===ht){if(c.push(b),u.push(A),A={value:"",depth:0,isGlob:!1},M===!0)continue;if(W===Be&&b===C+1){C+=2;continue}D=b+1;continue}if(t.noext!==!0&&(d===br||d===hr||d===Pe||d===ft||d===Ge)===!0&&G()===Fe){if(y=A.isGlob=!0,k=A.isExtglob=!0,M=!0,d===Ge&&b===C&&(oe=!0),n===!0){for(;a()!==!0&&(d=I());){if(d===Re){E=A.backslashes=!0,d=I();continue}if(d===pt){y=A.isGlob=!0,M=!0;break}}continue}break}if(d===Pe){if(W===Pe&&(re=A.isGlobstar=!0),y=A.isGlob=!0,M=!0,n===!0)continue;break}if(d===ft){if(y=A.isGlob=!0,M=!0,n===!0)continue;break}if(d===Rr){for(;a()!==!0&&(_=I());){if(_===Re){E=A.backslashes=!0,I();continue}if(_===yr){F=A.isBracket=!0,y=A.isGlob=!0,M=!0;break}}if(n===!0)continue;break}if(t.nonegate!==!0&&d===Ge&&b===C){Q=A.negated=!0,C++;continue}if(t.noparen!==!0&&d===Fe){if(y=A.isGlob=!0,n===!0){for(;a()!==!0&&(d=I());){if(d===Fe){E=A.backslashes=!0,d=I();continue}if(d===pt){M=!0;break}}continue}break}if(y===!0){if(M=!0,n===!0)continue;break}}t.noext===!0&&(k=!1,y=!1);let T=g,s="",i="";C>0&&(s=g.slice(0,C),g=g.slice(C),D-=C),T&&y===!0&&D>0?(T=g.slice(0,D),i=g.slice(D)):y===!0?(T="",i=g):T=g,T&&T!==""&&T!=="/"&&T!==g&&gt(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),t.unescape===!0&&(i&&(i=lt.removeBackslashes(i)),T&&E===!0&&(T=lt.removeBackslashes(T)));let U={prefix:s,input:r,start:C,base:T,glob:i,isBrace:L,isBracket:F,isGlob:y,isExtglob:k,isGlobstar:re,negated:Q,negatedExtglob:oe};if(t.tokens===!0&&(U.maxDepth=0,gt(d)||u.push(A),U.tokens=u),t.parts===!0||t.tokens===!0){let _;for(let x=0;x<c.length;x++){let J=_?_+1:C,V=c[x],te=r.slice(J,V);t.tokens&&(x===0&&C!==0?(u[x].isPrefix=!0,u[x].value=s):u[x].value=te,dt(u[x]),U.maxDepth+=u[x].depth),(x!==0||te!=="")&&f.push(te),_=V}if(_&&_+1<r.length){let x=r.slice(_+1);f.push(x),t.tokens&&(u[u.length-1].value=x,dt(u[u.length-1]),U.maxDepth+=u[u.length-1].depth)}U.slashes=c,U.parts=f}return U};At.exports=_r});var yt=ae((qr,Ct)=>{"use strict";var ve=he(),z=Ae(),{MAX_LENGTH:Te,POSIX_REGEX_SOURCE:Er,REGEX_NON_SPECIAL_CHARS:mr,REGEX_SPECIAL_CHARS_BACKREF:Or,REPLACEMENTS:bt}=ve,xr=(r,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...r,e);r.sort();let t=`[${r.join("-")}]`;try{new RegExp(t)}catch{return r.map(n=>z.escapeRegex(n)).join("..")}return t},le=(r,e)=>`Missing ${r}: "${e}" - use "\\\\${e}" to match literal characters`,We=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");r=bt[r]||r;let t={...e},o=typeof t.maxLength=="number"?Math.min(Te,t.maxLength):Te,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let c={type:"bos",value:"",output:t.prepend||""},u=[c],f=t.capture?"":"?:",g=ve.globChars(t.windows),b=ve.extglobChars(g),{DOT_LITERAL:C,PLUS_LITERAL:D,SLASH_LITERAL:L,ONE_CHAR:F,DOTS_SLASH:y,NO_DOT:k,NO_DOT_SLASH:re,NO_DOTS_SLASH:Y,QMARK:E,QMARK_NO_DOT:Q,STAR:oe,START_ANCHOR:M}=g,w=p=>`(${f}(?:(?!${M}${p.dot?y:C}).)*?)`,W=t.dot?"":k,d=t.dot?E:Q,A=t.bash===!0?w(t):oe;t.capture&&(A=`(${A})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let a={input:r,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};r=z.removePrefix(r,a),n=r.length;let G=[],I=[],T=[],s=c,i,U=()=>a.index===n-1,_=a.peek=(p=1)=>r[a.index+p],x=a.advance=()=>r[++a.index]||"",J=()=>r.slice(a.index+1),V=(p="",m=0)=>{a.consumed+=p,a.index+=m},te=p=>{a.output+=p.output!=null?p.output:p.value,V(p.value)},Lt=()=>{let p=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)x(),a.start++,p++;return p%2===0?!1:(a.negated=!0,a.start++,!0)},be=p=>{a[p]++,T.push(p)},ne=p=>{a[p]--,T.pop()},R=p=>{if(s.type==="globstar"){let m=a.braces>0&&(p.type==="comma"||p.type==="brace"),l=p.extglob===!0||G.length&&(p.type==="pipe"||p.type==="paren");p.type!=="slash"&&p.type!=="paren"&&!m&&!l&&(a.output=a.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=A,a.output+=s.output)}if(G.length&&p.type!=="paren"&&(G[G.length-1].inner+=p.value),(p.value||p.output)&&te(p),s&&s.type==="text"&&p.type==="text"){s.output=(s.output||s.value)+p.value,s.value+=p.value;return}p.prev=s,u.push(p),s=p},Ce=(p,m)=>{let l={...b[m],conditions:1,inner:""};l.prev=s,l.parens=a.parens,l.output=a.output;let h=(t.capture?"(":"")+l.open;be("parens"),R({type:p,value:m,output:a.output?"":F}),R({type:"paren",extglob:!0,value:x(),output:h}),G.push(l)},It=p=>{let m=p.close+(t.capture?")":""),l;if(p.type==="negate"){let h=A;if(p.inner&&p.inner.length>1&&p.inner.includes("/")&&(h=w(t)),(h!==A||U()||/^\)+$/.test(J()))&&(m=p.close=`)$))${h}`),p.inner.includes("*")&&(l=J())&&/^\.[^\\/.]+$/.test(l)){let S=We(l,{...e,fastpaths:!1}).output;m=p.close=`)${S})${h})`}p.prev.type==="bos"&&(a.negatedExtglob=!0)}R({type:"paren",extglob:!0,value:i,output:m}),ne("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(r)){let p=!1,m=r.replace(Or,(l,h,S,P,H,Ie)=>P==="\\"?(p=!0,l):P==="?"?h?h+P+(H?E.repeat(H.length):""):Ie===0?d+(H?E.repeat(H.length):""):E.repeat(S.length):P==="."?C.repeat(S.length):P==="*"?h?h+P+(H?A:""):A:h?l:`\\${l}`);return p===!0&&(t.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===r&&t.contains===!0?(a.output=r,a):(a.output=z.wrapOutput(m,a,e),a)}for(;!U();){if(i=x(),i==="\0")continue;if(i==="\\"){let l=_();if(l==="/"&&t.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",R({type:"text",value:i});continue}let h=/^\\+/.exec(J()),S=0;if(h&&h[0].length>2&&(S=h[0].length,a.index+=S,S%2!==0&&(i+="\\")),t.unescape===!0?i=x():i+=x(),a.brackets===0){R({type:"text",value:i});continue}}if(a.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(t.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let h=s.value.lastIndexOf("["),S=s.value.slice(0,h),P=s.value.slice(h+2),H=Er[P];if(H){s.value=S+H,a.backtrack=!0,x(),!c.output&&u.indexOf(s)===1&&(c.output=F);continue}}}(i==="["&&_()!==":"||i==="-"&&_()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),t.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,te({value:i});continue}if(a.quotes===1&&i!=='"'){i=z.escapeRegex(i),s.value+=i,te({value:i});continue}if(i==='"'){a.quotes=a.quotes===1?0:1,t.keepQuotes===!0&&R({type:"text",value:i});continue}if(i==="("){be("parens"),R({type:"paren",value:i});continue}if(i===")"){if(a.parens===0&&t.strictBrackets===!0)throw new SyntaxError(le("opening","("));let l=G[G.length-1];if(l&&a.parens===l.parens+1){It(G.pop());continue}R({type:"paren",value:i,output:a.parens?")":"\\)"}),ne("parens");continue}if(i==="["){if(t.nobracket===!0||!J().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(le("closing","]"));i=`\\${i}`}else be("brackets");R({type:"bracket",value:i});continue}if(i==="]"){if(t.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){R({type:"text",value:i,output:`\\${i}`});continue}if(a.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(le("opening","["));R({type:"text",value:i,output:`\\${i}`});continue}ne("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,te({value:i}),t.literalBrackets===!1||z.hasRegexChars(l))continue;let h=z.escapeRegex(s.value);if(a.output=a.output.slice(0,-s.value.length),t.literalBrackets===!0){a.output+=h,s.value=h;continue}s.value=`(${f}${h}|${s.value})`,a.output+=s.value;continue}if(i==="{"&&t.nobrace!==!0){be("braces");let l={type:"brace",value:i,output:"(",outputIndex:a.output.length,tokensIndex:a.tokens.length};I.push(l),R(l);continue}if(i==="}"){let l=I[I.length-1];if(t.nobrace===!0||!l){R({type:"text",value:i,output:i});continue}let h=")";if(l.dots===!0){let S=u.slice(),P=[];for(let H=S.length-1;H>=0&&(u.pop(),S[H].type!=="brace");H--)S[H].type!=="dots"&&P.unshift(S[H].value);h=xr(P,t),a.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=a.output.slice(0,l.outputIndex),P=a.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=h="\\}",a.output=S;for(let H of P)a.output+=H.output||H.value}R({type:"brace",value:i,output:h}),ne("braces"),I.pop();continue}if(i==="|"){G.length>0&&G[G.length-1].conditions++,R({type:"text",value:i});continue}if(i===","){let l=i,h=I[I.length-1];h&&T[T.length-1]==="braces"&&(h.comma=!0,l="|"),R({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&a.index===a.start+1){a.start=a.index+1,a.consumed="",a.output="",u.pop(),s=c;continue}R({type:"slash",value:i,output:L});continue}if(i==="."){if(a.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=I[I.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(a.braces+a.parens===0&&s.type!=="bos"&&s.type!=="slash"){R({type:"text",value:i,output:C});continue}R({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&t.noextglob!==!0&&_()==="("&&_(2)!=="?"){Ce("qmark",i);continue}if(s&&s.type==="paren"){let h=_(),S=i;(s.value==="("&&!/[!=<:]/.test(h)||h==="<"&&!/<([!=]|\w+>)/.test(J()))&&(S=`\\${i}`),R({type:"text",value:i,output:S});continue}if(t.dot!==!0&&(s.type==="slash"||s.type==="bos")){R({type:"qmark",value:i,output:Q});continue}R({type:"qmark",value:i,output:E});continue}if(i==="!"){if(t.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){Ce("negate",i);continue}if(t.nonegate!==!0&&a.index===0){Lt();continue}}if(i==="+"){if(t.noextglob!==!0&&_()==="("&&_(2)!=="?"){Ce("plus",i);continue}if(s&&s.value==="("||t.regex===!1){R({type:"plus",value:i,output:D});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||a.parens>0){R({type:"plus",value:i});continue}R({type:"plus",value:D});continue}if(i==="@"){if(t.noextglob!==!0&&_()==="("&&_(2)!=="?"){R({type:"at",extglob:!0,value:i,output:""});continue}R({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=mr.exec(J());l&&(i+=l[0],a.index+=l[0].length),R({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=A,a.backtrack=!0,a.globstar=!0,V(i);continue}let p=J();if(t.noextglob!==!0&&/^\([^?]/.test(p)){Ce("star",i);continue}if(s.type==="star"){if(t.noglobstar===!0){V(i);continue}let l=s.prev,h=l.prev,S=l.type==="slash"||l.type==="bos",P=h&&(h.type==="star"||h.type==="globstar");if(t.bash===!0&&(!S||p[0]&&p[0]!=="/")){R({type:"star",value:i,output:""});continue}let H=a.braces>0&&(l.type==="comma"||l.type==="brace"),Ie=G.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!H&&!Ie){R({type:"star",value:i,output:""});continue}for(;p.slice(0,3)==="/**";){let ye=r[a.index+4];if(ye&&ye!=="/")break;p=p.slice(3),V("/**",3)}if(l.type==="bos"&&U()){s.type="globstar",s.value+=i,s.output=w(t),a.output=s.output,a.globstar=!0,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!P&&U()){a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=w(t)+(t.strictSlashes?")":"|$)"),s.value+=i,a.globstar=!0,a.output+=l.output+s.output,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&p[0]==="/"){let ye=p[1]!==void 0?"|$":"";a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${w(t)}${L}|${L}${ye})`,s.value+=i,a.output+=l.output+s.output,a.globstar=!0,V(i+x()),R({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&p[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${L}|${w(t)}${L})`,a.output=s.output,a.globstar=!0,V(i+x()),R({type:"slash",value:"/",output:""});continue}a.output=a.output.slice(0,-s.output.length),s.type="globstar",s.output=w(t),s.value+=i,a.output+=s.output,a.globstar=!0,V(i);continue}let m={type:"star",value:i,output:A};if(t.bash===!0){m.output=".*?",(s.type==="bos"||s.type==="slash")&&(m.output=W+m.output),R(m);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&t.regex===!0){m.output=i,R(m);continue}(a.index===a.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(a.output+=re,s.output+=re):t.dot===!0?(a.output+=Y,s.output+=Y):(a.output+=W,s.output+=W),_()!=="*"&&(a.output+=F,s.output+=F)),R(m)}for(;a.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing","]"));a.output=z.escapeLast(a.output,"["),ne("brackets")}for(;a.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing",")"));a.output=z.escapeLast(a.output,"("),ne("parens")}for(;a.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(le("closing","}"));a.output=z.escapeLast(a.output,"{"),ne("braces")}if(t.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&R({type:"maybe_slash",value:"",output:`${L}?`}),a.backtrack===!0){a.output="";for(let p of a.tokens)a.output+=p.output!=null?p.output:p.value,p.suffix&&(a.output+=p.suffix)}return a};We.fastpaths=(r,e)=>{let t={...e},o=typeof t.maxLength=="number"?Math.min(Te,t.maxLength):Te,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);r=bt[r]||r;let{DOT_LITERAL:c,SLASH_LITERAL:u,ONE_CHAR:f,DOTS_SLASH:g,NO_DOT:b,NO_DOTS:C,NO_DOTS_SLASH:D,STAR:L,START_ANCHOR:F}=ve.globChars(t.windows),y=t.dot?C:b,k=t.dot?D:b,re=t.capture?"":"?:",Y={negated:!1,prefix:""},E=t.bash===!0?".*?":L;t.capture&&(E=`(${E})`);let Q=W=>W.noglobstar===!0?E:`(${re}(?:(?!${F}${W.dot?g:c}).)*?)`,oe=W=>{switch(W){case"*":return`${y}${f}${E}`;case".*":return`${c}${f}${E}`;case"*.*":return`${y}${E}${c}${f}${E}`;case"*/*":return`${y}${E}${u}${f}${k}${E}`;case"**":return y+Q(t);case"**/*":return`(?:${y}${Q(t)}${u})?${k}${f}${E}`;case"**/*.*":return`(?:${y}${Q(t)}${u})?${k}${E}${c}${f}${E}`;case"**/.*":return`(?:${y}${Q(t)}${u})?${c}${f}${E}`;default:{let d=/^(.*?)\.(\w+)$/.exec(W);if(!d)return;let A=oe(d[1]);return A?A+c+d[2]:void 0}}},M=z.removePrefix(r,Y),w=oe(M);return w&&t.strictSlashes!==!0&&(w+=`${u}?`),w};Ct.exports=We});var mt=ae((Yr,Et)=>{"use strict";var Sr=Rt(),Ue=yt(),_t=Ae(),vr=he(),Tr=r=>r&&typeof r=="object"&&!Array.isArray(r),$=(r,e,t=!1)=>{if(Array.isArray(r)){let C=r.map(L=>$(L,e,t));return L=>{for(let F of C){let y=F(L);if(y)return y}return!1}}let o=Tr(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},c=n.windows,u=o?$.compileRe(r,e):$.makeRe(r,e,!1,!0),f=u.state;delete u.state;let g=()=>!1;if(n.ignore){let C={...e,ignore:null,onMatch:null,onResult:null};g=$(n.ignore,C,t)}let b=(C,D=!1)=>{let{isMatch:L,match:F,output:y}=$.test(C,u,e,{glob:r,posix:c}),k={glob:r,state:f,regex:u,posix:c,input:C,output:y,match:F,isMatch:L};return typeof n.onResult=="function"&&n.onResult(k),L===!1?(k.isMatch=!1,D?k:!1):g(C)?(typeof n.onIgnore=="function"&&n.onIgnore(k),k.isMatch=!1,D?k:!1):(typeof n.onMatch=="function"&&n.onMatch(k),D?k:!0)};return t&&(b.state=f),b};$.test=(r,e,t,{glob:o,posix:n}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};let c=t||{},u=c.format||(n?_t.toPosixSlashes:null),f=r===o,g=f&&u?u(r):r;return f===!1&&(g=u?u(r):r,f=g===o),(f===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?f=$.matchBase(r,e,t,n):f=e.exec(g)),{isMatch:!!f,match:f,output:g}};$.matchBase=(r,e,t)=>(e instanceof RegExp?e:$.makeRe(e,t)).test(_t.basename(r));$.isMatch=(r,e,t)=>$(e,t)(r);$.parse=(r,e)=>Array.isArray(r)?r.map(t=>$.parse(t,e)):Ue(r,{...e,fastpaths:!1});$.scan=(r,e)=>Sr(r,e);$.compileRe=(r,e,t=!1,o=!1)=>{if(t===!0)return r.output;let n=e||{},c=n.contains?"":"^",u=n.contains?"":"$",f=`${c}(?:${r.output})${u}`;r&&r.negated===!0&&(f=`^(?!${f}).*$`);let g=$.toRegex(f,e);return o===!0&&(g.state=r),g};$.makeRe=(r,e={},t=!1,o=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(n.output=Ue.fastpaths(r,e)),n.output||(n=Ue(r,e)),$.compileRe(n,e,t,o)};$.toRegex=(r,e)=>{try{let t=e||{};return new RegExp(r,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};$.constants=vr;Et.exports=$});var vt=ae((Qr,St)=>{"use strict";var Ot=mt(),$r=Ae();function xt(r,e,t=!1){return e&&(e.windows===null||e.windows===void 0)&&(e={...e,windows:$r.isWindows()}),Ot(r,e,t)}Object.assign(xt,Ot);St.exports=xt});var kr={};Mt(kr,{default:()=>Hr});var fe=ie("@yarnpkg/core");var qe=(r=0)=>e=>`\x1B[${e+r}m`,Ye=(r=0)=>e=>`\x1B[${38+r};5;${e}m`,Qe=(r=0)=>(e,t,o)=>`\x1B[${38+r};2;${e};${t};${o}m`,O={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Nr=Object.keys(O.modifier),Bt=Object.keys(O.color),Gt=Object.keys(O.bgColor),Dr=[...Bt,...Gt];function jt(){let r=new Map;for(let[e,t]of Object.entries(O)){for(let[o,n]of Object.entries(t))O[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},t[o]=O[o],r.set(n[0],n[1]);Object.defineProperty(O,e,{value:t,enumerable:!1})}return Object.defineProperty(O,"codes",{value:r,enumerable:!1}),O.color.close="\x1B[39m",O.bgColor.close="\x1B[49m",O.color.ansi=qe(),O.color.ansi256=Ye(),O.color.ansi16m=Qe(),O.bgColor.ansi=qe(10),O.bgColor.ansi256=Ye(10),O.bgColor.ansi16m=Qe(10),Object.defineProperties(O,{rgbToAnsi256:{value(e,t,o){return e===t&&t===o?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(e){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[o]=t;o.length===3&&(o=[...o].map(c=>c+c).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:e=>O.rgbToAnsi256(...O.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let t,o,n;if(e>=232)t=((e-232)*10+8)/255,o=t,n=t;else{e-=16;let f=e%36;t=Math.floor(e/36)/5,o=Math.floor(f/6)/5,n=f%6/5}let c=Math.max(t,o,n)*2;if(c===0)return 30;let u=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(t));return c===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(e,t,o)=>O.ansi256ToAnsi(O.rgbToAnsi256(e,t,o)),enumerable:!1},hexToAnsi:{value:e=>O.ansi256ToAnsi(O.hexToAnsi256(e)),enumerable:!1}}),O}var Ft=jt(),q=Ft;var Oe=Ee(ie("process"),1),ze=Ee(ie("os"),1),He=Ee(ie("tty"),1);function K(r,e=globalThis.Deno?globalThis.Deno.args:Oe.default.argv){let t=r.startsWith("-")?"":r.length===1?"-":"--",o=e.indexOf(t+r),n=e.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:v}=Oe.default,me;K("no-color")||K("no-colors")||K("color=false")||K("color=never")?me=0:(K("color")||K("colors")||K("color=true")||K("color=always"))&&(me=1);function Wt(){if("FORCE_COLOR"in v)return v.FORCE_COLOR==="true"?1:v.FORCE_COLOR==="false"?0:v.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(v.FORCE_COLOR,10),3)}function Ut(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Vt(r,{streamIsTTY:e,sniffFlags:t=!0}={}){let o=Wt();o!==void 0&&(me=o);let n=t?me:o;if(n===0)return 0;if(t){if(K("color=16m")||K("color=full")||K("color=truecolor"))return 3;if(K("color=256"))return 2}if("TF_BUILD"in v&&"AGENT_NAME"in v)return 1;if(r&&!e&&n===void 0)return 0;let c=n||0;if(v.TERM==="dumb")return c;if(Oe.default.platform==="win32"){let u=ze.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in v)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(u=>u in v)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(u=>u in v)||v.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in v)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(v.TEAMCITY_VERSION)?1:0;if(v.COLORTERM==="truecolor"||v.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in v){let u=Number.parseInt((v.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(v.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(v.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(v.TERM)||"COLORTERM"in v?1:c}function Ze(r,e={}){let t=Vt(r,{streamIsTTY:r&&r.isTTY,...e});return Ut(t)}var Kt={stdout:Ze({isTTY:He.default.isatty(1)}),stderr:Ze({isTTY:He.default.isatty(2)})},Je=Kt;function et(r,e,t){let o=r.indexOf(e);if(o===-1)return r;let n=e.length,c=0,u="";do u+=r.slice(c,o)+e+t,c=o+n,o=r.indexOf(e,c);while(o!==-1);return u+=r.slice(c),u}function tt(r,e,t,o){let n=0,c="";do{let u=r[o-1]==="\r";c+=r.slice(n,u?o-1:o)+e+(u?`\r
`:`
`)+t,n=o+1,o=r.indexOf(`
`,n)}while(o!==-1);return c+=r.slice(n),c}var{stdout:rt,stderr:ot}=Je,ke=Symbol("GENERATOR"),ue=Symbol("STYLER"),pe=Symbol("IS_EMPTY"),nt=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null),Xt=(r,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=rt?rt.level:0;r.level=e.level===void 0?t:e.level};var qt=r=>{let e=(...t)=>t.join(" ");return Xt(e,r),Object.setPrototypeOf(e,ge.prototype),e};function ge(r){return qt(r)}Object.setPrototypeOf(ge.prototype,Function.prototype);for(let[r,e]of Object.entries(q))ce[r]={get(){let t=xe(this,Ne(e.open,e.close,this[ue]),this[pe]);return Object.defineProperty(this,r,{value:t}),t}};ce.visible={get(){let r=xe(this,this[ue],!0);return Object.defineProperty(this,"visible",{value:r}),r}};var we=(r,e,t,...o)=>r==="rgb"?e==="ansi16m"?q[t].ansi16m(...o):e==="ansi256"?q[t].ansi256(q.rgbToAnsi256(...o)):q[t].ansi(q.rgbToAnsi(...o)):r==="hex"?we("rgb",e,t,...q.hexToRgb(...o)):q[t][r](...o),Yt=["rgb","hex","ansi256"];for(let r of Yt){ce[r]={get(){let{level:t}=this;return function(...o){let n=Ne(we(r,nt[t],"color",...o),q.color.close,this[ue]);return xe(this,n,this[pe])}}};let e="bg"+r[0].toUpperCase()+r.slice(1);ce[e]={get(){let{level:t}=this;return function(...o){let n=Ne(we(r,nt[t],"bgColor",...o),q.bgColor.close,this[ue]);return xe(this,n,this[pe])}}}}var Qt=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this[ke].level},set(r){this[ke].level=r}}}),Ne=(r,e,t)=>{let o,n;return t===void 0?(o=r,n=e):(o=t.openAll+r,n=e+t.closeAll),{open:r,close:e,openAll:o,closeAll:n,parent:t}},xe=(r,e,t)=>{let o=(...n)=>Zt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Qt),o[ke]=r,o[ue]=e,o[pe]=t,o},Zt=(r,e)=>{if(r.level<=0||!e)return r[pe]?"":e;let t=r[ue];if(t===void 0)return e;let{openAll:o,closeAll:n}=t;if(e.includes("\x1B"))for(;t!==void 0;)e=et(e,t.close,t.open),t=t.parent;let c=e.indexOf(`
`);return c!==-1&&(e=tt(e,n,o,c)),o+e+n};Object.defineProperties(ge.prototype,ce);var zt=ge(),Wr=ge({level:ot?ot.level:0});var de=zt;var $e=ie("@yarnpkg/core");var Ve=ie("@yarnpkg/core"),Tt=Ee(vt()),se="root",N="catalog:",X=class extends Error{constructor(t,o){super(t);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},Ke=class{constructor(){this.configCache=new Map}getInheritanceChain(e){let t=e.split("/"),o=[];for(let n=0;n<t.length;n++)o.push(t.slice(0,n+1).join("/"));return o}resolveInheritedRange(e,t,o){let n=this.getInheritanceChain(t);for(let u=n.length-1;u>=0;u--){let f=n[u],g=e.list?.[f];if(g&&typeof g=="object"){let b=g[o];if(b)return b}}if(e.list&&typeof e.list=="object"){let u=e.list[o];if(typeof u=="string")return u}let c=e.list?.[se];if(c&&typeof c=="object"){let u=c[o];if(u)return u}return null}validateInheritanceStructure(e){if(!e.list)return!0;let t=Object.keys(e.list);for(let o of t)if(typeof e.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let c=0;c<n.length-1;c++){let u=n[c];if(!t.includes(u)&&u!==se)return!1}}return!0}async readConfiguration(e){let o=e.cwd,n=this.configCache.get(o);if(n)return n;let c=e.configuration.get("catalogs")||{},u=c;if(c.list?u.list=Object.entries(c.list).reduce((f,[g,b])=>(typeof b=="string"?f[se]={...f[se]||{},[g]:b}:f[g]=b,f),{}):u.list={},!this.isValidConfiguration(u))throw new X("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'warn' | 'strict' }, list: { [alias: string]: { [packageName: string]: string } } }",X.INVALID_FORMAT);if(!this.validateInheritanceStructure(u))throw new X("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",X.INVALID_ALIAS);return this.configCache.set(o,u),u}async getRange(e,t,o){let n=await this.readConfiguration(e),c=t.length===0?se:t,u=this.resolveInheritedRange(n,c,o);if(u)return/^[^:]+:/.test(u)?u:`${e.configuration.get("defaultProtocol")}${u}`;let f=n.list?.[c];if(!f||typeof f=="string")throw new X(`Alias "${c}" not found in .yarnrc.yml catalogs.`,X.INVALID_ALIAS);let g=f[o];if(!g)throw new X(`Package "${o}" not found in alias "${c}"`,X.INVALID_ALIAS);return/^[^:]+:/.test(g)?g:`${e.configuration.get("defaultProtocol")}${g}`}async getDefaultAliasGroups(e){let t=await this.readConfiguration(e.project);if(t.options){if(await this.shouldIgnoreWorkspace(e))return[];if(t.options.default){if(Array.isArray(t.options.default))return t.options.default;if(t.options.default==="max"){let o=Object.keys(t.list||{}),n=[...e.manifest.dependencies,...e.manifest.devDependencies],c=Object.fromEntries(o.map(f=>[f,0]));for(let[f,g]of n)if(g.range.startsWith(N)){let b=g.range.substring(N.length);c[b]=(c[b]||0)+1}let u=Math.max(...Object.values(c));return Object.keys(c).filter(f=>c[f]===u)}}}return[]}async findDependency(e,t){let o=Ve.structUtils.stringifyIdent(t),n=await this.readConfiguration(e),c=[],u=Object.entries(n.list||{}).filter(([f,g])=>typeof g=="string"?o===g:Object.keys(g).includes(o));c.push(...u.map(([f,g])=>{let b=typeof g=="string"?g:g[o];return[f,b]}));for(let[f]of Object.entries(n.list||{})){if(c.some(([b])=>b===f))continue;let g=this.resolveInheritedRange(n,f,o);g&&c.push([f,g])}return c}clearCache(e){this.configCache.delete(e)}async shouldIgnoreWorkspace(e){if(!e.manifest.name)return!1;let t=await this.readConfiguration(e.project);return t.options?.ignoredWorkspaces?(0,Tt.isMatch)(Ve.structUtils.stringifyIdent(e.manifest.name),t.options.ignoredWorkspaces):!1}async getValidationLevel(e){let t=await this.readConfiguration(e.project);return t.options?.validation?t.options.validation:"warn"}isValidConfiguration(e){if(!e||typeof e!="object"||!("list"in e)||!e.list||typeof e.list!="object")return!1;for(let[t,o]of Object.entries(e.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in e&&e.options&&typeof e.options=="object"){if("ignoredWorkspaces"in e.options&&e.options.ignoredWorkspaces&&(!Array.isArray(e.options.ignoredWorkspaces)||e.options.ignoredWorkspaces.length===0))return!1;if("default"in e.options&&e.options.default){if(Array.isArray(e.options.default)){if(e.options.default.length===0)return!1;let t=Object.keys(e.list||{});for(let o of e.options.default)if(o!=="root"&&!t.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),c=!0;for(let u of n)if(u!=="root"&&!t.includes(u)){c=!1;break}if(!c)return!1}else return!1}else if(typeof e.options.default!="string"||e.options.default!=="max")return!1}if("validation"in e.options&&(typeof e.options.validation!="string"||!["warn","strict"].includes(e.options.validation)))return!1}return!0}},B=new Ke;var Le=class{supportsDescriptor(e,t){return e.range.startsWith(N)}supportsLocator(e,t){return e.reference.startsWith(N)}shouldPersistResolution(e,t){return!1}bindDescriptor(e,t,o){return e}getResolutionDependencies(e,t){return{}}async getCandidates(e,t,o){let n=e.range.slice(N.length),c=await B.getRange(o.project,n,$e.structUtils.stringifyIdent(e));return o.resolver.getCandidates({...e,range:c},t,o)}async getSatisfying(e,t,o,n){let c=e.range.slice(N.length),u=await B.getRange(n.project,c,$e.structUtils.stringifyIdent(e));return n.resolver.getSatisfying({...e,range:u},t,o,n)}async resolve(e,t){let o=e.reference.slice(N.length),n=await B.getRange(t.project,o,$e.structUtils.stringifyIdent(e));return t.resolver.resolve({...e,reference:n},t)}};var Lr={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:fe.SettingsType.ANY,default:{}}},resolvers:[Le],hooks:{validateWorkspace:async(r,e)=>{let t=await B.shouldIgnoreWorkspace(r);if(!t){let n=await Ir(r);if(n.length>0){let c=de.yellow(n.join(", ")),u=await B.getValidationLevel(r),f=`The following dependencies are listed in the catalogs but not using the catalog protocol: ${c}. Consider using the catalog protocol instead.`;u==="strict"?e.reportError(fe.MessageName.INVALID_MANIFEST,f):u==="warn"&&e.reportWarning(fe.MessageName.INVALID_MANIFEST,f)}}let o=[...Object.values(r.manifest.raw.dependencies||{}),...Object.values(r.manifest.raw.devDependencies||{})].some(n=>n.startsWith(N));t&&o&&e.reportError(fe.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},afterWorkspaceDependencyAddition:async(r,e,t)=>{$t(r,t)},afterWorkspaceDependencyReplacement:async(r,e,t,o)=>{$t(r,o)},beforeWorkspacePacking:async(r,e)=>{if(await B.shouldIgnoreWorkspace(r))return;let t=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of t){let n=e[o];if(!(!n||typeof n!="object"))for(let[c,u]of Object.entries(n)){let f=u;if(f.startsWith(N))try{let g=f.slice(N.length),b=await B.getRange(r.project,g,c);n[c]=b}catch(g){throw g instanceof X?new Error(`Failed to resolve catalog dependency ${c}@${f} during packaging: ${g.message}`):g}}}}}};async function Ir(r){let e=await B.readConfiguration(r.project),t=new Set;if(e.list){for(let[c,u]of Object.entries(e.list))if(typeof u=="object")for(let f of Object.keys(u))t.add(f)}let o=[...Object.entries(r.manifest.raw.dependencies||{}),...Object.entries(r.manifest.raw.devDependencies||{})],n=[];for(let[c,u]of o)u.startsWith(N)||t.has(c)&&n.push(c);return n}async function $t(r,e){if(e.range.startsWith(N)){if(await B.shouldIgnoreWorkspace(r))throw new Error(de.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await B.shouldIgnoreWorkspace(r))return;let t=await B.findDependency(r.project,e);if(t.length===0)return;let o=await B.getDefaultAliasGroups(r);if(o.length>0){for(let g of o)if(t.some(([b])=>b===g)){e.range=`${N}${g}`;return}}let n=t.map(([g])=>g===se?"":g),c=n.filter(g=>g!=="").length>0?` (${n.join(", ")})`:"",u=await B.getValidationLevel(r),f=`\u27A4 ${e.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${e.name}@${N}${n[0]}' instead.`;if(u==="strict")throw new Error(de.red(f));u==="warn"&&console.warn(de.yellow(f))}var Hr=Lr;return Pt(kr);})();
return plugin;
}
};
