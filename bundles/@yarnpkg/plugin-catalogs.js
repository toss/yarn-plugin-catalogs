/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var wt=Object.create;var me=Object.defineProperty;var kt=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Pt=Object.prototype.hasOwnProperty;var ae=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var ue=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Dt=(r,t)=>{for(var e in t)me(r,e,{get:t[e],enumerable:!0})},Xe=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Nt(t))!Pt.call(r,n)&&n!==e&&me(r,n,{get:()=>t[n],enumerable:!(o=kt(t,n))||o.enumerable});return r};var Ee=(r,t,e)=>(e=r!=null?wt(Ht(r)):{},Xe(t||!r||!r.__esModule?me(e,"default",{value:r,enumerable:!0}):e,r)),Mt=r=>Xe(me({},"__esModule",{value:!0}),r);var Ae=ue((Ur,ct)=>{"use strict";var Q="\\\\/",st=`[^${Q}]`,te="\\.",Jt="\\+",er="\\?",Se="\\/",tr="(?=.)",it="[^/]",Pe=`(?:${Se}|$)`,at=`(?:^|${Se})`,De=`${te}{1,2}${Pe}`,rr=`(?!${te})`,or=`(?!${at}${De})`,nr=`(?!${te}{0,1}${Pe})`,sr=`(?!${De})`,ir=`[^.${Se}]`,ar=`${it}*?`,ur="/",ut={DOT_LITERAL:te,PLUS_LITERAL:Jt,QMARK_LITERAL:er,SLASH_LITERAL:Se,ONE_CHAR:tr,QMARK:it,END_ANCHOR:Pe,DOTS_SLASH:De,NO_DOT:rr,NO_DOTS:or,NO_DOT_SLASH:nr,NO_DOTS_SLASH:sr,QMARK_NO_DOT:ir,STAR:ar,START_ANCHOR:at,SEP:ur},cr={...ut,SLASH_LITERAL:`[${Q}]`,QMARK:st,STAR:`${st}*?`,DOTS_SLASH:`${te}{1,2}(?:[${Q}]|$)`,NO_DOT:`(?!${te})`,NO_DOTS:`(?!(?:^|[${Q}])${te}{1,2}(?:[${Q}]|$))`,NO_DOT_SLASH:`(?!${te}{0,1}(?:[${Q}]|$))`,NO_DOTS_SLASH:`(?!${te}{1,2}(?:[${Q}]|$))`,QMARK_NO_DOT:`[^.${Q}]`,START_ANCHOR:`(?:^|[${Q}])`,END_ANCHOR:`(?:[${Q}]|$)`,SEP:"\\"},lr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ct.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:lr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(r){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${r.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(r){return r===!0?cr:ut}}});var Re=ue(B=>{"use strict";var{REGEX_BACKSLASH:fr,REGEX_REMOVE_BACKSLASH:pr,REGEX_SPECIAL_CHARS:gr,REGEX_SPECIAL_CHARS_GLOBAL:dr}=Ae();B.isObject=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);B.hasRegexChars=r=>gr.test(r);B.isRegexChar=r=>r.length===1&&B.hasRegexChars(r);B.escapeRegex=r=>r.replace(dr,"\\$1");B.toPosixSlashes=r=>r.replace(fr,"/");B.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let r=navigator.platform.toLowerCase();return r==="win32"||r==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};B.removeBackslashes=r=>r.replace(pr,t=>t==="\\"?"":t);B.escapeLast=(r,t,e)=>{let o=r.lastIndexOf(t,e);return o===-1?r:r[o-1]==="\\"?B.escapeLast(r,t,o-1):`${r.slice(0,o)}\\${r.slice(o)}`};B.removePrefix=(r,t={})=>{let e=r;return e.startsWith("./")&&(e=e.slice(2),t.prefix="./"),e};B.wrapOutput=(r,t={},e={})=>{let o=e.contains?"":"^",n=e.contains?"":"$",c=`${o}(?:${r})${n}`;return t.negated===!0&&(c=`(?:^(?!${c}).*$)`),c};B.basename=(r,{windows:t}={})=>{let e=r.split(t?/[\\/]/:"/"),o=e[e.length-1];return o===""?e[e.length-2]:o}});var Rt=ue((Xr,At)=>{"use strict";var lt=Re(),{CHAR_ASTERISK:Me,CHAR_AT:hr,CHAR_BACKWARD_SLASH:be,CHAR_COMMA:Ar,CHAR_DOT:Ge,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:ht,CHAR_LEFT_CURLY_BRACE:je,CHAR_LEFT_PARENTHESES:Fe,CHAR_LEFT_SQUARE_BRACKET:Rr,CHAR_PLUS:br,CHAR_QUESTION_MARK:ft,CHAR_RIGHT_CURLY_BRACE:Cr,CHAR_RIGHT_PARENTHESES:pt,CHAR_RIGHT_SQUARE_BRACKET:yr}=Ae(),gt=r=>r===ht||r===be,dt=r=>{r.isPrefix!==!0&&(r.depth=r.isGlobstar?1/0:1)},_r=(r,t)=>{let e=t||{},o=r.length-1,n=e.parts===!0||e.scanToEnd===!0,c=[],a=[],p=[],f=r,A=-1,C=0,H=0,$=!1,j=!1,y=!1,k=!1,ne=!1,q=!1,m=!1,Y=!1,se=!1,P=!1,N=0,F,d,R={value:"",depth:0,isGlob:!1},u=()=>A>=o,G=()=>f.charCodeAt(A+1),I=()=>(F=d,f.charCodeAt(++A));for(;A<o;){d=I();let _;if(d===be){m=R.backslashes=!0,d=I(),d===je&&(q=!0);continue}if(q===!0||d===je){for(N++;u()!==!0&&(d=I());){if(d===be){m=R.backslashes=!0,I();continue}if(d===je){N++;continue}if(q!==!0&&d===Ge&&(d=I())===Ge){if($=R.isBrace=!0,y=R.isGlob=!0,P=!0,n===!0)continue;break}if(q!==!0&&d===Ar){if($=R.isBrace=!0,y=R.isGlob=!0,P=!0,n===!0)continue;break}if(d===Cr&&(N--,N===0)){q=!1,$=R.isBrace=!0,P=!0;break}}if(n===!0)continue;break}if(d===ht){if(c.push(A),a.push(R),R={value:"",depth:0,isGlob:!1},P===!0)continue;if(F===Ge&&A===C+1){C+=2;continue}H=A+1;continue}if(e.noext!==!0&&(d===br||d===hr||d===Me||d===ft||d===Be)===!0&&G()===Fe){if(y=R.isGlob=!0,k=R.isExtglob=!0,P=!0,d===Be&&A===C&&(se=!0),n===!0){for(;u()!==!0&&(d=I());){if(d===be){m=R.backslashes=!0,d=I();continue}if(d===pt){y=R.isGlob=!0,P=!0;break}}continue}break}if(d===Me){if(F===Me&&(ne=R.isGlobstar=!0),y=R.isGlob=!0,P=!0,n===!0)continue;break}if(d===ft){if(y=R.isGlob=!0,P=!0,n===!0)continue;break}if(d===Rr){for(;u()!==!0&&(_=I());){if(_===be){m=R.backslashes=!0,I();continue}if(_===yr){j=R.isBracket=!0,y=R.isGlob=!0,P=!0;break}}if(n===!0)continue;break}if(e.nonegate!==!0&&d===Be&&A===C){Y=R.negated=!0,C++;continue}if(e.noparen!==!0&&d===Fe){if(y=R.isGlob=!0,n===!0){for(;u()!==!0&&(d=I());){if(d===Fe){m=R.backslashes=!0,d=I();continue}if(d===pt){P=!0;break}}continue}break}if(y===!0){if(P=!0,n===!0)continue;break}}e.noext===!0&&(k=!1,y=!1);let T=f,s="",i="";C>0&&(s=f.slice(0,C),f=f.slice(C),H-=C),T&&y===!0&&H>0?(T=f.slice(0,H),i=f.slice(H)):y===!0?(T="",i=f):T=f,T&&T!==""&&T!=="/"&&T!==f&&gt(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),e.unescape===!0&&(i&&(i=lt.removeBackslashes(i)),T&&m===!0&&(T=lt.removeBackslashes(T)));let W={prefix:s,input:r,start:C,base:T,glob:i,isBrace:$,isBracket:j,isGlob:y,isExtglob:k,isGlobstar:ne,negated:Y,negatedExtglob:se};if(e.tokens===!0&&(W.maxDepth=0,gt(d)||a.push(R),W.tokens=a),e.parts===!0||e.tokens===!0){let _;for(let v=0;v<c.length;v++){let ee=_?_+1:C,V=c[v],re=r.slice(ee,V);e.tokens&&(v===0&&C!==0?(a[v].isPrefix=!0,a[v].value=s):a[v].value=re,dt(a[v]),W.maxDepth+=a[v].depth),(v!==0||re!=="")&&p.push(re),_=V}if(_&&_+1<r.length){let v=r.slice(_+1);p.push(v),e.tokens&&(a[a.length-1].value=v,dt(a[a.length-1]),W.maxDepth+=a[a.length-1].depth)}W.slashes=c,W.parts=p}return W};At.exports=_r});var yt=ue((qr,Ct)=>{"use strict";var Te=Ae(),Z=Re(),{MAX_LENGTH:Le,POSIX_REGEX_SOURCE:mr,REGEX_NON_SPECIAL_CHARS:Er,REGEX_SPECIAL_CHARS_BACKREF:Or,REPLACEMENTS:bt}=Te,vr=(r,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...r,t);r.sort();let e=`[${r.join("-")}]`;try{new RegExp(e)}catch{return r.map(n=>Z.escapeRegex(n)).join("..")}return e},fe=(r,t)=>`Missing ${r}: "${t}" - use "\\\\${t}" to match literal characters`,We=(r,t)=>{if(typeof r!="string")throw new TypeError("Expected a string");r=bt[r]||r;let e={...t},o=typeof e.maxLength=="number"?Math.min(Le,e.maxLength):Le,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let c={type:"bos",value:"",output:e.prepend||""},a=[c],p=e.capture?"":"?:",f=Te.globChars(e.windows),A=Te.extglobChars(f),{DOT_LITERAL:C,PLUS_LITERAL:H,SLASH_LITERAL:$,ONE_CHAR:j,DOTS_SLASH:y,NO_DOT:k,NO_DOT_SLASH:ne,NO_DOTS_SLASH:q,QMARK:m,QMARK_NO_DOT:Y,STAR:se,START_ANCHOR:P}=f,N=g=>`(${p}(?:(?!${P}${g.dot?y:C}).)*?)`,F=e.dot?"":k,d=e.dot?m:Y,R=e.bash===!0?N(e):se;e.capture&&(R=`(${R})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let u={input:r,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};r=Z.removePrefix(r,u),n=r.length;let G=[],I=[],T=[],s=c,i,W=()=>u.index===n-1,_=u.peek=(g=1)=>r[u.index+g],v=u.advance=()=>r[++u.index]||"",ee=()=>r.slice(u.index+1),V=(g="",E=0)=>{u.consumed+=g,u.index+=E},re=g=>{u.output+=g.output!=null?g.output:g.value,V(g.value)},$t=()=>{let g=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)v(),u.start++,g++;return g%2===0?!1:(u.negated=!0,u.start++,!0)},Ce=g=>{u[g]++,T.push(g)},ie=g=>{u[g]--,T.pop()},b=g=>{if(s.type==="globstar"){let E=u.braces>0&&(g.type==="comma"||g.type==="brace"),l=g.extglob===!0||G.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!E&&!l&&(u.output=u.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,u.output+=s.output)}if(G.length&&g.type!=="paren"&&(G[G.length-1].inner+=g.value),(g.value||g.output)&&re(g),s&&s.type==="text"&&g.type==="text"){s.output=(s.output||s.value)+g.value,s.value+=g.value;return}g.prev=s,a.push(g),s=g},ye=(g,E)=>{let l={...A[E],conditions:1,inner:""};l.prev=s,l.parens=u.parens,l.output=u.output;let h=(e.capture?"(":"")+l.open;Ce("parens"),b({type:g,value:E,output:u.output?"":j}),b({type:"paren",extglob:!0,value:v(),output:h}),G.push(l)},It=g=>{let E=g.close+(e.capture?")":""),l;if(g.type==="negate"){let h=R;if(g.inner&&g.inner.length>1&&g.inner.includes("/")&&(h=N(e)),(h!==R||W()||/^\)+$/.test(ee()))&&(E=g.close=`)$))${h}`),g.inner.includes("*")&&(l=ee())&&/^\.[^\\/.]+$/.test(l)){let x=We(l,{...t,fastpaths:!1}).output;E=g.close=`)${x})${h})`}g.prev.type==="bos"&&(u.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:i,output:E}),ie("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(r)){let g=!1,E=r.replace(Or,(l,h,x,D,w,Ie)=>D==="\\"?(g=!0,l):D==="?"?h?h+D+(w?m.repeat(w.length):""):Ie===0?d+(w?m.repeat(w.length):""):m.repeat(x.length):D==="."?C.repeat(x.length):D==="*"?h?h+D+(w?R:""):R:h?l:`\\${l}`);return g===!0&&(e.unescape===!0?E=E.replace(/\\/g,""):E=E.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),E===r&&e.contains===!0?(u.output=r,u):(u.output=Z.wrapOutput(E,u,t),u)}for(;!W();){if(i=v(),i==="\0")continue;if(i==="\\"){let l=_();if(l==="/"&&e.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",b({type:"text",value:i});continue}let h=/^\\+/.exec(ee()),x=0;if(h&&h[0].length>2&&(x=h[0].length,u.index+=x,x%2!==0&&(i+="\\")),e.unescape===!0?i=v():i+=v(),u.brackets===0){b({type:"text",value:i});continue}}if(u.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(e.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let h=s.value.lastIndexOf("["),x=s.value.slice(0,h),D=s.value.slice(h+2),w=mr[D];if(w){s.value=x+w,u.backtrack=!0,v(),!c.output&&a.indexOf(s)===1&&(c.output=j);continue}}}(i==="["&&_()!==":"||i==="-"&&_()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),e.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,re({value:i});continue}if(u.quotes===1&&i!=='"'){i=Z.escapeRegex(i),s.value+=i,re({value:i});continue}if(i==='"'){u.quotes=u.quotes===1?0:1,e.keepQuotes===!0&&b({type:"text",value:i});continue}if(i==="("){Ce("parens"),b({type:"paren",value:i});continue}if(i===")"){if(u.parens===0&&e.strictBrackets===!0)throw new SyntaxError(fe("opening","("));let l=G[G.length-1];if(l&&u.parens===l.parens+1){It(G.pop());continue}b({type:"paren",value:i,output:u.parens?")":"\\)"}),ie("parens");continue}if(i==="["){if(e.nobracket===!0||!ee().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(fe("closing","]"));i=`\\${i}`}else Ce("brackets");b({type:"bracket",value:i});continue}if(i==="]"){if(e.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:i,output:`\\${i}`});continue}if(u.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(fe("opening","["));b({type:"text",value:i,output:`\\${i}`});continue}ie("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,re({value:i}),e.literalBrackets===!1||Z.hasRegexChars(l))continue;let h=Z.escapeRegex(s.value);if(u.output=u.output.slice(0,-s.value.length),e.literalBrackets===!0){u.output+=h,s.value=h;continue}s.value=`(${p}${h}|${s.value})`,u.output+=s.value;continue}if(i==="{"&&e.nobrace!==!0){Ce("braces");let l={type:"brace",value:i,output:"(",outputIndex:u.output.length,tokensIndex:u.tokens.length};I.push(l),b(l);continue}if(i==="}"){let l=I[I.length-1];if(e.nobrace===!0||!l){b({type:"text",value:i,output:i});continue}let h=")";if(l.dots===!0){let x=a.slice(),D=[];for(let w=x.length-1;w>=0&&(a.pop(),x[w].type!=="brace");w--)x[w].type!=="dots"&&D.unshift(x[w].value);h=vr(D,e),u.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let x=u.output.slice(0,l.outputIndex),D=u.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=h="\\}",u.output=x;for(let w of D)u.output+=w.output||w.value}b({type:"brace",value:i,output:h}),ie("braces"),I.pop();continue}if(i==="|"){G.length>0&&G[G.length-1].conditions++,b({type:"text",value:i});continue}if(i===","){let l=i,h=I[I.length-1];h&&T[T.length-1]==="braces"&&(h.comma=!0,l="|"),b({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&u.index===u.start+1){u.start=u.index+1,u.consumed="",u.output="",a.pop(),s=c;continue}b({type:"slash",value:i,output:$});continue}if(i==="."){if(u.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=I[I.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(u.braces+u.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:i,output:C});continue}b({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&e.noextglob!==!0&&_()==="("&&_(2)!=="?"){ye("qmark",i);continue}if(s&&s.type==="paren"){let h=_(),x=i;(s.value==="("&&!/[!=<:]/.test(h)||h==="<"&&!/<([!=]|\w+>)/.test(ee()))&&(x=`\\${i}`),b({type:"text",value:i,output:x});continue}if(e.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:i,output:Y});continue}b({type:"qmark",value:i,output:m});continue}if(i==="!"){if(e.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){ye("negate",i);continue}if(e.nonegate!==!0&&u.index===0){$t();continue}}if(i==="+"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){ye("plus",i);continue}if(s&&s.value==="("||e.regex===!1){b({type:"plus",value:i,output:H});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||u.parens>0){b({type:"plus",value:i});continue}b({type:"plus",value:H});continue}if(i==="@"){if(e.noextglob!==!0&&_()==="("&&_(2)!=="?"){b({type:"at",extglob:!0,value:i,output:""});continue}b({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=Er.exec(ee());l&&(i+=l[0],u.index+=l[0].length),b({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=R,u.backtrack=!0,u.globstar=!0,V(i);continue}let g=ee();if(e.noextglob!==!0&&/^\([^?]/.test(g)){ye("star",i);continue}if(s.type==="star"){if(e.noglobstar===!0){V(i);continue}let l=s.prev,h=l.prev,x=l.type==="slash"||l.type==="bos",D=h&&(h.type==="star"||h.type==="globstar");if(e.bash===!0&&(!x||g[0]&&g[0]!=="/")){b({type:"star",value:i,output:""});continue}let w=u.braces>0&&(l.type==="comma"||l.type==="brace"),Ie=G.length&&(l.type==="pipe"||l.type==="paren");if(!x&&l.type!=="paren"&&!w&&!Ie){b({type:"star",value:i,output:""});continue}for(;g.slice(0,3)==="/**";){let _e=r[u.index+4];if(_e&&_e!=="/")break;g=g.slice(3),V("/**",3)}if(l.type==="bos"&&W()){s.type="globstar",s.value+=i,s.output=N(e),u.output=s.output,u.globstar=!0,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!D&&W()){u.output=u.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=N(e)+(e.strictSlashes?")":"|$)"),s.value+=i,u.globstar=!0,u.output+=l.output+s.output,V(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&g[0]==="/"){let _e=g[1]!==void 0?"|$":"";u.output=u.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${N(e)}${$}|${$}${_e})`,s.value+=i,u.output+=l.output+s.output,u.globstar=!0,V(i+v()),b({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&g[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${$}|${N(e)}${$})`,u.output=s.output,u.globstar=!0,V(i+v()),b({type:"slash",value:"/",output:""});continue}u.output=u.output.slice(0,-s.output.length),s.type="globstar",s.output=N(e),s.value+=i,u.output+=s.output,u.globstar=!0,V(i);continue}let E={type:"star",value:i,output:R};if(e.bash===!0){E.output=".*?",(s.type==="bos"||s.type==="slash")&&(E.output=F+E.output),b(E);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&e.regex===!0){E.output=i,b(E);continue}(u.index===u.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(u.output+=ne,s.output+=ne):e.dot===!0?(u.output+=q,s.output+=q):(u.output+=F,s.output+=F),_()!=="*"&&(u.output+=j,s.output+=j)),b(E)}for(;u.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(fe("closing","]"));u.output=Z.escapeLast(u.output,"["),ie("brackets")}for(;u.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(fe("closing",")"));u.output=Z.escapeLast(u.output,"("),ie("parens")}for(;u.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(fe("closing","}"));u.output=Z.escapeLast(u.output,"{"),ie("braces")}if(e.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${$}?`}),u.backtrack===!0){u.output="";for(let g of u.tokens)u.output+=g.output!=null?g.output:g.value,g.suffix&&(u.output+=g.suffix)}return u};We.fastpaths=(r,t)=>{let e={...t},o=typeof e.maxLength=="number"?Math.min(Le,e.maxLength):Le,n=r.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);r=bt[r]||r;let{DOT_LITERAL:c,SLASH_LITERAL:a,ONE_CHAR:p,DOTS_SLASH:f,NO_DOT:A,NO_DOTS:C,NO_DOTS_SLASH:H,STAR:$,START_ANCHOR:j}=Te.globChars(e.windows),y=e.dot?C:A,k=e.dot?H:A,ne=e.capture?"":"?:",q={negated:!1,prefix:""},m=e.bash===!0?".*?":$;e.capture&&(m=`(${m})`);let Y=F=>F.noglobstar===!0?m:`(${ne}(?:(?!${j}${F.dot?f:c}).)*?)`,se=F=>{switch(F){case"*":return`${y}${p}${m}`;case".*":return`${c}${p}${m}`;case"*.*":return`${y}${m}${c}${p}${m}`;case"*/*":return`${y}${m}${a}${p}${k}${m}`;case"**":return y+Y(e);case"**/*":return`(?:${y}${Y(e)}${a})?${k}${p}${m}`;case"**/*.*":return`(?:${y}${Y(e)}${a})?${k}${m}${c}${p}${m}`;case"**/.*":return`(?:${y}${Y(e)}${a})?${c}${p}${m}`;default:{let d=/^(.*?)\.(\w+)$/.exec(F);if(!d)return;let R=se(d[1]);return R?R+c+d[2]:void 0}}},P=Z.removePrefix(r,q),N=se(P);return N&&e.strictSlashes!==!0&&(N+=`${a}?`),N};Ct.exports=We});var Et=ue((Yr,mt)=>{"use strict";var xr=Rt(),Ve=yt(),_t=Re(),Sr=Ae(),Tr=r=>r&&typeof r=="object"&&!Array.isArray(r),L=(r,t,e=!1)=>{if(Array.isArray(r)){let C=r.map($=>L($,t,e));return $=>{for(let j of C){let y=j($);if(y)return y}return!1}}let o=Tr(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=t||{},c=n.windows,a=o?L.compileRe(r,t):L.makeRe(r,t,!1,!0),p=a.state;delete a.state;let f=()=>!1;if(n.ignore){let C={...t,ignore:null,onMatch:null,onResult:null};f=L(n.ignore,C,e)}let A=(C,H=!1)=>{let{isMatch:$,match:j,output:y}=L.test(C,a,t,{glob:r,posix:c}),k={glob:r,state:p,regex:a,posix:c,input:C,output:y,match:j,isMatch:$};return typeof n.onResult=="function"&&n.onResult(k),$===!1?(k.isMatch=!1,H?k:!1):f(C)?(typeof n.onIgnore=="function"&&n.onIgnore(k),k.isMatch=!1,H?k:!1):(typeof n.onMatch=="function"&&n.onMatch(k),H?k:!0)};return e&&(A.state=p),A};L.test=(r,t,e,{glob:o,posix:n}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};let c=e||{},a=c.format||(n?_t.toPosixSlashes:null),p=r===o,f=p&&a?a(r):r;return p===!1&&(f=a?a(r):r,p=f===o),(p===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?p=L.matchBase(r,t,e,n):p=t.exec(f)),{isMatch:!!p,match:p,output:f}};L.matchBase=(r,t,e)=>(t instanceof RegExp?t:L.makeRe(t,e)).test(_t.basename(r));L.isMatch=(r,t,e)=>L(t,e)(r);L.parse=(r,t)=>Array.isArray(r)?r.map(e=>L.parse(e,t)):Ve(r,{...t,fastpaths:!1});L.scan=(r,t)=>xr(r,t);L.compileRe=(r,t,e=!1,o=!1)=>{if(e===!0)return r.output;let n=t||{},c=n.contains?"":"^",a=n.contains?"":"$",p=`${c}(?:${r.output})${a}`;r&&r.negated===!0&&(p=`^(?!${p}).*$`);let f=L.toRegex(p,t);return o===!0&&(f.state=r),f};L.makeRe=(r,t={},e=!1,o=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(n.output=Ve.fastpaths(r,t)),n.output||(n=Ve(r,t)),L.compileRe(n,t,e,o)};L.toRegex=(r,t)=>{try{let e=t||{};return new RegExp(r,e.flags||(e.nocase?"i":""))}catch(e){if(t&&t.debug===!0)throw e;return/$^/}};L.constants=Sr;mt.exports=L});var St=ue((Qr,xt)=>{"use strict";var Ot=Et(),Lr=Re();function vt(r,t,e=!1){return t&&(t.windows===null||t.windows===void 0)&&(t={...t,windows:Lr.isWindows()}),Ot(r,t,e)}Object.assign(vt,Ot);xt.exports=vt});var kr={};Dt(kr,{default:()=>wr});var oe=ae("@yarnpkg/core");var qe=(r=0)=>t=>`\x1B[${t+r}m`,Ye=(r=0)=>t=>`\x1B[${38+r};5;${t}m`,Qe=(r=0)=>(t,e,o)=>`\x1B[${38+r};2;${t};${e};${o}m`,O={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Hr=Object.keys(O.modifier),Gt=Object.keys(O.color),Bt=Object.keys(O.bgColor),Pr=[...Gt,...Bt];function jt(){let r=new Map;for(let[t,e]of Object.entries(O)){for(let[o,n]of Object.entries(e))O[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[o]=O[o],r.set(n[0],n[1]);Object.defineProperty(O,t,{value:e,enumerable:!1})}return Object.defineProperty(O,"codes",{value:r,enumerable:!1}),O.color.close="\x1B[39m",O.bgColor.close="\x1B[49m",O.color.ansi=qe(),O.color.ansi256=Ye(),O.color.ansi16m=Qe(),O.bgColor.ansi=qe(10),O.bgColor.ansi256=Ye(10),O.bgColor.ansi16m=Qe(10),Object.defineProperties(O,{rgbToAnsi256:{value(t,e,o){return t===e&&e===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[o]=e;o.length===3&&(o=[...o].map(c=>c+c).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>O.rgbToAnsi256(...O.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,o,n;if(t>=232)e=((t-232)*10+8)/255,o=e,n=e;else{t-=16;let p=t%36;e=Math.floor(t/36)/5,o=Math.floor(p/6)/5,n=p%6/5}let c=Math.max(e,o,n)*2;if(c===0)return 30;let a=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(e));return c===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,e,o)=>O.ansi256ToAnsi(O.rgbToAnsi256(t,e,o)),enumerable:!1},hexToAnsi:{value:t=>O.ansi256ToAnsi(O.hexToAnsi256(t)),enumerable:!1}}),O}var Ft=jt(),X=Ft;var ve=Ee(ae("process"),1),ze=Ee(ae("os"),1),we=Ee(ae("tty"),1);function U(r,t=globalThis.Deno?globalThis.Deno.args:ve.default.argv){let e=r.startsWith("-")?"":r.length===1?"-":"--",o=t.indexOf(e+r),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:S}=ve.default,Oe;U("no-color")||U("no-colors")||U("color=false")||U("color=never")?Oe=0:(U("color")||U("colors")||U("color=true")||U("color=always"))&&(Oe=1);function Wt(){if("FORCE_COLOR"in S)return S.FORCE_COLOR==="true"?1:S.FORCE_COLOR==="false"?0:S.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(S.FORCE_COLOR,10),3)}function Vt(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Ut(r,{streamIsTTY:t,sniffFlags:e=!0}={}){let o=Wt();o!==void 0&&(Oe=o);let n=e?Oe:o;if(n===0)return 0;if(e){if(U("color=16m")||U("color=full")||U("color=truecolor"))return 3;if(U("color=256"))return 2}if("TF_BUILD"in S&&"AGENT_NAME"in S)return 1;if(r&&!t&&n===void 0)return 0;let c=n||0;if(S.TERM==="dumb")return c;if(ve.default.platform==="win32"){let a=ze.default.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in S)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(a=>a in S)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(a=>a in S)||S.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in S)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(S.TEAMCITY_VERSION)?1:0;if(S.COLORTERM==="truecolor"||S.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in S){let a=Number.parseInt((S.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(S.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(S.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(S.TERM)||"COLORTERM"in S?1:c}function Ze(r,t={}){let e=Ut(r,{streamIsTTY:r&&r.isTTY,...t});return Vt(e)}var Kt={stdout:Ze({isTTY:we.default.isatty(1)}),stderr:Ze({isTTY:we.default.isatty(2)})},Je=Kt;function et(r,t,e){let o=r.indexOf(t);if(o===-1)return r;let n=t.length,c=0,a="";do a+=r.slice(c,o)+t+e,c=o+n,o=r.indexOf(t,c);while(o!==-1);return a+=r.slice(c),a}function tt(r,t,e,o){let n=0,c="";do{let a=r[o-1]==="\r";c+=r.slice(n,a?o-1:o)+t+(a?`\r
`:`
`)+e,n=o+1,o=r.indexOf(`
`,n)}while(o!==-1);return c+=r.slice(n),c}var{stdout:rt,stderr:ot}=Je,ke=Symbol("GENERATOR"),ce=Symbol("STYLER"),ge=Symbol("IS_EMPTY"),nt=["ansi","ansi","ansi256","ansi16m"],le=Object.create(null),Xt=(r,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=rt?rt.level:0;r.level=t.level===void 0?e:t.level};var qt=r=>{let t=(...e)=>e.join(" ");return Xt(t,r),Object.setPrototypeOf(t,de.prototype),t};function de(r){return qt(r)}Object.setPrototypeOf(de.prototype,Function.prototype);for(let[r,t]of Object.entries(X))le[r]={get(){let e=xe(this,He(t.open,t.close,this[ce]),this[ge]);return Object.defineProperty(this,r,{value:e}),e}};le.visible={get(){let r=xe(this,this[ce],!0);return Object.defineProperty(this,"visible",{value:r}),r}};var Ne=(r,t,e,...o)=>r==="rgb"?t==="ansi16m"?X[e].ansi16m(...o):t==="ansi256"?X[e].ansi256(X.rgbToAnsi256(...o)):X[e].ansi(X.rgbToAnsi(...o)):r==="hex"?Ne("rgb",t,e,...X.hexToRgb(...o)):X[e][r](...o),Yt=["rgb","hex","ansi256"];for(let r of Yt){le[r]={get(){let{level:e}=this;return function(...o){let n=He(Ne(r,nt[e],"color",...o),X.color.close,this[ce]);return xe(this,n,this[ge])}}};let t="bg"+r[0].toUpperCase()+r.slice(1);le[t]={get(){let{level:e}=this;return function(...o){let n=He(Ne(r,nt[e],"bgColor",...o),X.bgColor.close,this[ce]);return xe(this,n,this[ge])}}}}var Qt=Object.defineProperties(()=>{},{...le,level:{enumerable:!0,get(){return this[ke].level},set(r){this[ke].level=r}}}),He=(r,t,e)=>{let o,n;return e===void 0?(o=r,n=t):(o=e.openAll+r,n=t+e.closeAll),{open:r,close:t,openAll:o,closeAll:n,parent:e}},xe=(r,t,e)=>{let o=(...n)=>Zt(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Qt),o[ke]=r,o[ce]=t,o[ge]=e,o},Zt=(r,t)=>{if(r.level<=0||!t)return r[ge]?"":t;let e=r[ce];if(e===void 0)return t;let{openAll:o,closeAll:n}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=et(t,e.close,e.open),e=e.parent;let c=t.indexOf(`
`);return c!==-1&&(t=tt(t,n,o,c)),o+t+n};Object.defineProperties(de.prototype,le);var zt=de(),Wr=de({level:ot?ot.level:0});var he=zt;var Ue=ae("@yarnpkg/core"),Tt=Ee(St());var z="root",M="catalog:";var K=class extends Error{constructor(e,o){super(e);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},pe=class{constructor(){this.configCache=new Map}getInheritanceChain(t){let e=t.split("/"),o=[];for(let n=0;n<e.length;n++)o.push(e.slice(0,n+1).join("/"));return o}resolveInheritedRange(t,e,o){let n=this.getInheritanceChain(e);for(let a=n.length-1;a>=0;a--){let p=n[a],f=t.list?.[p];if(f&&typeof f=="object"){let A=f[o];if(A)return A}}if(t.list&&typeof t.list=="object"){let a=t.list[o];if(typeof a=="string")return a}let c=t.list?.[z];if(c&&typeof c=="object"){let a=c[o];if(a)return a}return null}validateInheritanceStructure(t){if(!t.list)return!0;let e=Object.keys(t.list);for(let o of e)if(typeof t.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let c=0;c<n.length-1;c++){let a=n[c];if(!e.includes(a)&&a!==z)return!1}}return!0}async readConfiguration(t){let o=t.cwd,n=this.configCache.get(o);if(n)return n;let c=t.configuration.get("catalogs")||{},a=c;if(c.list?a.list=Object.entries(c.list).reduce((p,[f,A])=>(typeof A=="string"?p[z]={...p[z]||{},[f]:A}:p[f]=A,p),{}):a.list={},!this.isValidConfiguration(a))throw new K("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'off' | 'warn' | 'strict' | { [package: string]: 'off' | 'warn' | 'strict' } }, list: { [alias: string]: { [packageName: string]: string } } }",K.INVALID_FORMAT);if(!this.validateInheritanceStructure(a))throw new K("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",K.INVALID_ALIAS);return this.configCache.set(o,a),a}async getRange(t,e,o){let n=await this.readConfiguration(t),c=e.length===0?z:e,a=this.resolveInheritedRange(n,c,o);if(a)return/^[^:]+:/.test(a)?a:`${t.configuration.get("defaultProtocol")}${a}`;let p=n.list?.[c];if(!p||typeof p=="string")throw new K(`Alias "${c}" not found in .yarnrc.yml catalogs.`,K.INVALID_ALIAS);let f=p[o];if(!f)throw new K(`Package "${o}" not found in alias "${c}"`,K.INVALID_ALIAS);return/^[^:]+:/.test(f)?f:`${t.configuration.get("defaultProtocol")}${f}`}async getDefaultAliasGroups(t){let e=await this.readConfiguration(t.project);if(e.options){if(await this.shouldIgnoreWorkspace(t))return[];if(e.options.default){if(Array.isArray(e.options.default))return e.options.default;if(e.options.default==="max"){let o=Object.keys(e.list||{}),n=[...t.manifest.dependencies,...t.manifest.devDependencies],c=Object.fromEntries(o.map(p=>[p,0]));for(let[p,f]of n)if(f.range.startsWith(M)){let A=f.range.substring(M.length);c[A]=(c[A]||0)+1}let a=Math.max(...Object.values(c));return Object.keys(c).filter(p=>c[p]===a)}}}return[]}async findAllAccessibleGroups(t,e){let o=await this.readConfiguration(t),n=[];for(let c of Object.keys(o.list||{}))this.resolveInheritedRange(o,c,e)&&n.push(c);return n}async getGroupValidationLevel(t,e){let n=(await this.readConfiguration(t.project)).options?.validation||"warn";if(typeof n=="string")return n;let c=this.getInheritanceChain(e);for(let a=c.length-1;a>=0;a--){let p=c[a];if(n[p]!==void 0)return n[p]}return"warn"}async getValidationLevelForPackage(t,e){let o=await this.findAllAccessibleGroups(t.project,e);if(o.length===0)return"off";let n=[];for(let c of o){let a=await this.getGroupValidationLevel(t,c);n.push(a)}return n.includes("strict")?"strict":n.includes("warn")?"warn":"off"}async findDependency(t,e){let o=Ue.structUtils.stringifyIdent(e),n=await this.readConfiguration(t),c=[],a=Object.entries(n.list||{}).filter(([p,f])=>typeof f=="string"?o===f:Object.keys(f).includes(o));c.push(...a.map(([p,f])=>{let A=typeof f=="string"?f:f[o];return[p,A]}));for(let[p]of Object.entries(n.list||{})){if(c.some(([A])=>A===p))continue;let f=this.resolveInheritedRange(n,p,o);f&&c.push([p,f])}return c}clearCache(t){this.configCache.delete(t)}async shouldIgnoreWorkspace(t){if(!t.manifest.name)return!1;let e=await this.readConfiguration(t.project);return e.options?.ignoredWorkspaces?(0,Tt.isMatch)(Ue.structUtils.stringifyIdent(t.manifest.name),e.options.ignoredWorkspaces):!1}async getValidationLevel(t){let e=await this.readConfiguration(t.project);return e.options?.validation&&typeof e.options.validation=="string"?e.options.validation:"warn"}isValidConfiguration(t){if(!t||typeof t!="object"||!("list"in t)||!t.list||typeof t.list!="object")return!1;for(let[e,o]of Object.entries(t.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in t&&t.options&&typeof t.options=="object"){if("ignoredWorkspaces"in t.options&&t.options.ignoredWorkspaces&&(!Array.isArray(t.options.ignoredWorkspaces)||t.options.ignoredWorkspaces.length===0))return!1;if("default"in t.options&&t.options.default){if(Array.isArray(t.options.default)){if(t.options.default.length===0)return!1;let e=Object.keys(t.list||{});for(let o of t.options.default)if(o!=="root"&&!e.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),c=!0;for(let a of n)if(a!=="root"&&!e.includes(a)){c=!1;break}if(!c)return!1}else return!1}else if(typeof t.options.default!="string"||t.options.default!=="max")return!1}if("validation"in t.options){let e=t.options.validation;if(typeof e=="string"){if(!["warn","strict","off"].includes(e))return!1}else if(typeof e=="object"&&e!==null)for(let[o,n]of Object.entries(e)){if(typeof n!="string"||!["warn","strict","off"].includes(n))return!1;let c=Object.keys(t.list||{});if(!c.includes(o)&&o!==z)if(o.includes("/")){let a=this.getInheritanceChain(o),p=!0;for(let f of a)if(f!==z&&!c.includes(f)){p=!1;break}if(!p)return!1}else return!1}else return!1}}return!0}};var Ke=ae("@yarnpkg/core");var $e=class{constructor(){this.configReader=new pe}supportsDescriptor(t,e){return!!t.range.startsWith(M)}supportsLocator(t,e){return!!t.reference.startsWith(M)}shouldPersistResolution(t,e){return!1}bindDescriptor(t,e,o){return t}getResolutionDependencies(t,e){return{}}async getCandidates(t,e,o){try{let n=t.range.slice(M.length),c=Ke.structUtils.stringifyIdent(t),a=await this.configReader.getRange(o.project,n,c);return o.resolver.getCandidates(Ke.structUtils.makeDescriptor(t,a),e,o)}catch{throw new Error(`Failed to resolve catalog ${t}`)}}async getSatisfying(t,e,o,n){return n.resolver.getSatisfying(t,e,o,n)}async resolve(t,e){return e.resolver.resolve(t,e)}};var J=new pe,$r={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:oe.SettingsType.ANY,default:{}}},resolvers:[$e],hooks:{validateWorkspace:async(r,t)=>{let e=await J.shouldIgnoreWorkspace(r);if(!e){let n=await Ir(r);if(n.length>0){let c=n.filter(f=>f.validationLevel==="strict"),a=n.filter(f=>f.validationLevel==="warn"),p=f=>`The following dependencies are listed in the catalogs but not using the catalog protocol: ${f.map(C=>he.yellow(C.packageName)).join(", ")}. Consider using the catalog protocol instead.`;c.length>0&&t.reportError(oe.MessageName.INVALID_MANIFEST,p(c)),a.length>0&&t.reportWarning(oe.MessageName.INVALID_MANIFEST,p(a))}}let o=[...Object.values(r.manifest.raw.dependencies||{}),...Object.values(r.manifest.raw.devDependencies||{})].some(n=>n.startsWith(M));e&&o&&t.reportError(oe.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},afterWorkspaceDependencyAddition:async(r,t,e)=>{Lt(r,e)},afterWorkspaceDependencyReplacement:async(r,t,e,o)=>{Lt(r,o)},beforeWorkspacePacking:async(r,t)=>{if(await J.shouldIgnoreWorkspace(r))return;let e=["dependencies","devDependencies","peerDependencies","optionalDependencies"];for(let o of e){let n=t[o];if(!(!n||typeof n!="object"))for(let[c,a]of Object.entries(n)){let p=a;if(p.startsWith(M))try{let f=p.slice(M.length),A=await J.getRange(r.project,f,c);n[c]=A}catch(f){throw f instanceof K?new Error(`Failed to resolve catalog dependency ${c}@${p} during packaging: ${f.message}`):f}}}}}};async function Ir(r){let t=[...Object.entries(r.manifest.raw.dependencies||{}),...Object.entries(r.manifest.raw.devDependencies||{})],e=[];for(let[o,n]of t){if(n.startsWith(M))continue;let a=await J.findAllAccessibleGroups(r.project,o);if(a.length>0){let p=await J.getValidationLevelForPackage(r,o);p!=="off"&&e.push({packageName:o,validationLevel:p,applicableGroups:a})}}return e}async function Lt(r,t){if(t.range.startsWith(M)){if(await J.shouldIgnoreWorkspace(r))throw new Error(he.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await J.shouldIgnoreWorkspace(r))return;let e=await J.findDependency(r.project,t);if(e.length===0)return;let o=await J.getDefaultAliasGroups(r);if(o.length>0){for(let f of o)if(e.some(([A])=>A===f)){t.range=`${M}${f}`;return}}let n=e.map(([f])=>f===z?"":f),c=n.filter(f=>f!=="").length>0?` (${n.join(", ")})`:"",a=await J.getValidationLevelForPackage(r,oe.structUtils.stringifyIdent(t)),p=`\u27A4 ${t.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${t.name}@${M}${n[0]}' instead.`;if(a==="strict")throw new Error(he.red(p));a==="warn"&&console.warn(he.yellow(p))}var wr=$r;return Mt(kr);})();
return plugin;
}
};
